<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BookTOM</title>
  <meta name="description" content="" />
  <meta property="og:title" content="Tom Kongerslev" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="BookTom" />
  <meta property="og:image" content="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" />
  <link id="favicon" rel="icon" href="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" type="image/x-icon" />
  <link rel="preload" href="https://tommichael88.github.io/booktomnyc/images/tomshandylogo_newest.webp?raw=true" as="image" />
  <link rel="preload" href="https://tommichael88.github.io/booktomnyc/images/profile-image.webp?raw=true" as="image" />
  <link rel="preload" href="https://tommichael88.github.io/booktomnyc/js/marquee.js" as="script" />
  <link rel="shortcut icon" href="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" type="image/x-icon" />
  <link rel="apple-touch-icon" href="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" />
  <link rel="stylesheet" href="https://tommichael88.github.io/booktomnyc/External/styles.css" />
  <!-- Font Awesome 6.5.2 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer">

  <!-- Bootstrap 5.3.3 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <style>
    /* ========== CORE ELEMENTS ========== */
    :root {
      --bg-card: #1e1e1e;
      --bg-card-hover: #2a2a2a;
      --primary: #474747;
      --primary-hover: #ffffff;
      --text-primary: #f5f5f5;
      --text-secondary: #c0c0c0;
      --accent-light: rgba(250, 0, 0, 1);
      --accent: rgba(250, 0, 0, 1);
      --selected-bg: rgba(250, 0, 0, 0.1);
      --border-radius: 8px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Ubuntu', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    html,
    body {
      min-height: 100vh;
      background-color: var(--bg-dark);
      color: var(--text-primary);
    }

    body {
      padding: 10px;
      margin: auto;
      max-width: 468px;
    }

    /* ========== HEADER & TYPOGRAPHY ========== */
    .header,
    header {
      display: flex;
      background: rgba(168, 168, 168, .55);
      padding: 10px;
      border-radius: var(--border-radius);
      margin: 10px;
      text-align: center;
    }

    .header h1 {
      font-size: 1rem;
      font-weight: 700;
      background: linear-gradient(225deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      display: inline-block;
      position: relative;
    }

    .header h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 50%;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      border-radius: 3px;
    }

    h1 {
      font-size: 2rem;
      color: #454545;
    }

    /* ========== PAGE BACKGROUND ========== */
    .pg_background {
      background-image: url(https://github.com/tommichael88/booktomnyc/blob/main/images/background_16b.jpg?raw=true);
      background-size: cover;
      background-attachment: fixed;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: -1;
    }

    .fab-container {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 9999
    }

    .fab {
      opacity: 45%;
      background-color: transparent;
      border: none;
      outline: 0;
      cursor: pointer;
      transition: opacity .3s ease
    }

    .fab img {
      width: 40px;
      height: 40px
    }

    .fab:hover {
      opacity: 100%
    }

    .qrc_page_wrapper {
      background-size: cover;
      /* background-repeat: no-repeat; */
      /* background-repeat: no-repeat; */
      background-position: inherit;
      /* background-position: center center; */
      background-color: var(--qrc-secondary);
      max-width: 1000%;
      /* min-height: 50vh; max-height: 100vh; */
      padding: 0;
      padding-top: 0.1px;
      padding-bottom: 0.1px;
      overflow: auto;
      position: relative;
      height: 100vh;
    }

    .qrc_page_inner {
      max-width: 490px;
      margin: auto;
      position: relative;
      padding: 15px 15px 1px 15px;
      -webkit-border-top-left-radius: var(--qrc-border-radius);
      -webkit-border-top-right-radius: var(--qrc-border-radius);
      -moz-border-radius-topleft: var(--qrc-border-radius);
      -moz-border-radius-topright: var(--qrc-border-radius);
      border-top-left-radius: var(--qrc-border-radius);
      border-top-right-radius: var(--qrc-border-radius);
      padding-bottom: 90px;
      z-index: 9;
    }

    .profile-image {
      display: block;
      width: 100%;
      height: auto;
      border-radius: var(--border-radius);
      margin: 10px auto;
      box-sizing: border-box
    }

    .highlight-box {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 15px;
      /* Reduced vertical padding */
      gap: 2%;
      background: linear-gradient(125deg, silver 10%, silver 20%, #474747 70%, #000 80%, #000 95%);
      box-shadow: 0 4px 0 rgba(169, 169, 169, .95);
      overflow: hidden;
      /* Contains overflowing elements */
      position: relative;
      /* For z-index context */
    }

    .thandylogo {
      max-height: 30px;
      width: auto;
      flex: 0 0 auto;
      box-shadow: 0 4px 0 rgba(95, 95, 95, .85);
      z-index: 1;
      /* Keeps logo above other elements */
    }

    .tom_kongerslev {
      flex: 1 1 auto;
      min-width: 0;
      /* Allows text truncation */
      margin: 0 10px;
      /* Reduced margin */
      position: relative;
      z-index: 1;
    }

    .tom_kongerslev img {
      max-height: 40px;
      width: auto;
      max-width: 100%;
      /* Ensures image doesn't overflow */
    }

    /* ========== BUTTONS & CONTROLS ========== */
    .contact-button {
      background: #000;
      flex: 0 1 auto;
      /* Allows button to shrink */
      padding: 6px 12px;
      /* More balanced padding */
      color: white;
      border-radius: 5px;
      font-weight: bold;
      font-size: 0.9em;
      /* Smaller font size */
      text-transform: uppercase;
      border: 2px outset silver;
      cursor: pointer;
      white-space: nowrap;
      /* Prevents text wrapping */
      z-index: 1;
    }

    .contact-button:hover {
      background-color: rgba(169, 169, 169, .75);
      color: #000000;
    }

    .contactModal {
      display: none;
      position: fixed;
      z-index: 2;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(1, 1, 1, .45)
    }

    .contactModal-content {
      background-color: rgba(1, 0, 0, .75);
      color: silver;
      margin: 10%;
      padding: 20px;
      border-radius: 10px;
      width: 80%;
      max-width: 600px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, .2);
      animation: fadeIn .3s ease
    }

    /* ========== SERVICE CARDS & GRIDS ========== */
    .contactModalClose {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: 700;
      cursor: pointer;
      transition: color .3s ease
    }

    .contactModalClose:hover {
      color: #fff
    }

    .contactModal-actions {
      display: flex;
      justify-content: space-around;
      align-items: center
    }

    .contact-option-btn {
      display: inline-block;
      width: 50%;
      padding: 10px;
      margin: 10px 0;
      border: none;
      border-radius: 10px;
      font-size: 8px;
      cursor: pointer;
      transition: background-color .3s ease
    }

    .contact-option-btn:hover {
      background-color: #e0e0e0
    }

    .card-schedule-service {
      display: block;
      border: 1px outset rgba(0, 0, 0, .75);
      background-color: rgba(255, 255, 255, .5);
      border-radius: 10px;
      box-shadow: 4px 4px 8px rgba(95, 95, 95, .85);
      text-align: center;
      padding: auto;
      margin: auto;
      overflow: hidden;
      box-sizing: border-box
        /* Contain iframe contents */
    }

    .new-service-request-grid-topper {
      padding: 4px;
      border: 2px outset rgba(0, 0, 0, .99);
      color: silver;
      display: flex;
      justify-content: center;
      text-justify: bottom;
      text-align: center;
      text-decoration: bold;
      object-fit: contain
    }

    .reschedule-service-button {
      font-weight: 700;
      background-color: transparent;
      color: silver;
      border: px outset silver;
      border-radius: 0;
      padding: 2px auto;
      font-size: .75rem;
      cursor: pointer;
      object-fit: contain;
      transition: background-color .3s ease
    }

    .reschedule-service-button:hover {
      color: silver;
      background-color: #000;
    }

    /* .page-container {} */
    .menu-container {
      display: grid;
      place-items: center;
      padding: 0;
      margin: 0;
      width: 100%;
    }

    #categories-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1px;
      max-width: 400px;
      margin: 1px auto;
      width: 100%;
    }

    .category-tile {
      background: rgba(166, 166, 166, 0.5);
      color: #000;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.55), 0 -1px 1px rgba(255, 255, 255, 0.3);
      border: 2px inset #c0c0c0;
      padding: 4px;
      width: 100%;
      aspect-ratio: 1 / 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      /* Important for text fitting */
      overflow: hidden;
      box-sizing: border-box;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .category-tile h2 {
      font-size: 0.9em;
      line-height: 1.2;
      margin: 0;
      padding: 0;
      word-break: break-word;
    }

    /* Underline Animation */
    .category-tile::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 15px;
      width: 0;
      height: 2px;
      background: linear-gradient(25deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      transform-origin: center;
      margin: 0 auto;
      right: 0;
    }

    .category-tile:hover::after {
      width: 80%;
      left: 10%;
    }

    /* Text Glow Effect */
    .category-tile:hover h2 {
      text-shadow: 0 0 8px rgba(222, 0, 0, 0.6),
        0 0 12px rgba(222, 0, 0, 0.4),
        0 0 16px rgba(222, 0, 0, 0.2);
      color: #fff;
    }

    /* Icon Styling */
    .category-icon {
      font-size: 2rem;
      margin-bottom: 4px;
      background: linear-gradient(25deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.6), 1px 1px 0 rgba(255, 255, 255, 0.2);
      transition: all 0.4s ease-out;
    }

    /* Hover Effects */
    .category-tile:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 15px rgba(222, 0, 0, 0.2);
      border-color: var(--accent);
    }

    .category-tile:hover .category-icon {
      transform: scale(1.1);
    }

    /* Animations */
    @keyframes underlineExpand {
      0% {
        width: 0;
        left: 50%;
      }

      100% {
        width: 80%;
        left: 10%;
      }
    }

    .category-tile::after:hover {
      animation: underlineExpand 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }

    /* Existing animations kept below */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes tapAnimation {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(0.95);
      }

      100% {
        transform: scale(1);
      }
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.05);
      }

      100% {
        transform: scale(1);
      }
    }

    @keyframes shake {

      0%,
      100% {
        transform: translateX(0);
      }

      20%,
      60% {
        transform: translateX(-5px);
      }

      40%,
      80% {
        transform: translateX(5px);
      }
    }

    @keyframes backgroundPulse {
      0% {
        opacity: 0;
        transform: scaleX(0);
      }

      50% {
        opacity: 0.4;
        transform: scaleX(1);
      }

      100% {
        opacity: 0;
      }
    }

    .search-btn {
      background: none;
      border: none;
      color: #c0c0c0;
      font-size: 1.2rem;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .search-input {
      width: 50%;
      padding: 0.75rem 1rem;
      background: var(--bg-card);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      color: #c0c0c0;
      font-size: 01rem;
      transition: all 0.3s ease;
    }

    /* Cart Button */
    .cart-btn {
      background: #fff;
      border: none;
      border-radius: 50%;
      width: 2.5rem;
      height: 2.5rem;
      position: relative;
      box-shadow: 0 4px 25px rgba(222, 0, 0, 0.45);
      cursor: pointer;
    }

    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: white;
      color: #000;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 1rem;
      font-weight: 700;
    }

    /* SEARCH RESULTS */
    #searchResults {
      display: none;
      position: absolute;
      top: 70px;
      left: 2rem;
      right: 2rem;
      background: #fff;
      color: #454547;
      border: 1px solid var(--accent);
      border-radius: 4px;
      z-index: 1100;
      max-height: 300px;
      overflow-y: auto;
    }

    #searchResults div {
      padding: 0.5rem;
      cursor: pointer;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    #searchResults div:hover {
      background: var(--bg-card-hover);
    }

    /* MISCELLANEOUS */
    .no-results {
      text-align: center;
      padding: 2rem;
      color: var(--text-secondary);
      display: none;
    }

    /* SERVICE SELECTION & details */
    .details-grid,
    #selectedServicesList:
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: .5rem;
        align-items: center;
        color: #474747;
        box-size: border-box; (Should be box-sizing: border-box;)
        border: 1px solid rgba(0, 0, 0, 0.5);

    #selectedServicesSection, #serviceSelectionContainer, 
    .service-selection-grid:
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: .5rem;
        align-items: center;
        background: #fff;

    .service-selection-card:
        background: var(--bg-card);
        padding: .5rem;
        border-radius: 10px;
        transition: all 0.2s ease;
        cursor: pointer;
        object-fit: contain 
       
       
        }

/* Ensure the main container for the service selection is properly sized */
#serviceSelectionContainer {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* Maintains a 2-column layout */
  gap: .75rem; /* Slightly increase gap for better visual separation */
  /* Remove align-items: center here unless you specifically need it for the container itself,
     as it can sometimes interfere with individual item sizing. */
  background: #fff; /* Keep background as is */
  padding: 1rem; /* Add some padding around the grid if not already present from a parent */
  max-width: 468px; /* Assuming this matches your body's max-width for consistency */
  margin: 0 auto; /* Center it */
  box-sizing: border-box; /* Crucial for consistent sizing including padding */
}

/* Apply these styles to the direct grid container if it's the one wrapping the cards */
.service-selection-grid { /* Assuming this class wraps the actual cards */
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* 2 columns, equal width */
  gap: .75rem; /* Consistent gap */
  /* If this is nested, it might not need max-width/margin-auto */
  width: 100%; /* Ensure it takes full width of its parent */
  box-sizing: border-box;
}

/* Styles for the individual service cards */
.service-selection-card {
  background: var(--bg-card);
  padding: .75rem; /* Adjust padding for better content fit and visual appeal */
  border-radius: 10px;
  transition: all 0.2s ease;
  cursor: pointer;
  box-sizing: border-box; /* Ensure padding/border are included in the width/height */

  /* --- KEY ADDITIONS FOR PROPORTIONAL TILES --- */
  width: 100%; /* Ensure it fills its grid cell width */
  aspect-ratio: 1 / 1; /* Make the card square, similar to category tiles */
  display: flex; /* Enable flexbox for internal content alignment */
  flex-direction: column; /* Stack children vertically */
  justify-content: center; /* Center content vertically */
  align-items: center; /* Center content horizontally */
  text-align: center; /* Center text */
  /* --- END KEY ADDITIONS --- */

  /* REMOVE this, it's for images/videos, not div elements */
  /* object-fit: contain; */
}

.service-selection-card:hover {
  background: var(--bg-card-hover);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.service-selection-card h4 {
  font-size: 0.7rem; /* Slightly smaller to fit more text */
  margin: 0.2rem 0; /* Reduced margin to save vertical space */
  line-height: 1.2; /* Tighter line height for multi-line text */
  word-break: break-word; /* Allow long words to break */
}

.service-selection-card p {
  font-size: 0.75rem; /* Make description text smaller if needed */
  color: var(--text-secondary);
  margin: 0; /* Remove default margins */
  padding: 0; /* Remove default paddings */
  line-height: 1.2;
  word-break: break-word;
}

.service-price {
  color: var(--accent);
  font-weight: 600;
  font-size: 0.8rem; /* Adjust price font size */
  margin: 0.2rem 0; /* Reduced margin */
}

.service-selection-icon {
      align-items: center;
      font-size: 2rem;
      margin-bottom: 1rem;
      filter: grayscale(100%);
      color: black;
}

/* Corrected typo */
#selectedServicesList {
    box-sizing: border-box; /* Corrected property name */
    /* ... rest of your styles */
}

    .details-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.1rem;
      padding: 0.1rem;
      aspect-ratio: 1/1;
      align-items: column;
    }

    .detail-card {
      background: var(--bg-card);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 0.75rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .detail-card:hover {
      background: var(--bg-card-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .detail-card.selected {
      background: var(--selected-bg);
      border-color: var(--accent);
    }

    /* MODAL */
    .modal-overlay {
      position: fixed;
      top: 70px;
      right: 20px;
      width: 380px;
      max-height: calc(100vh - 100px);
      background: transparent;
      display: none;
      z-index: 1000;
      animation: fadeIn 0.3s ease;
    }

    .modal-content {
      background: rgba(30, 30, 30, 0.98);
      color: #c0c0c0;
      backdrop-filter: blur(12px);
      border-radius: 12px;
      border: 1px solid rgba(222, 0, 0, 0.3);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
      overflow: hidden;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
    }

    .modal-header {
      padding: 1.2rem;
      border-bottom: 1px solid rgba(222, 0, 0, 0.2);
      position: relative;
      background: rgba(0, 0, 0, 0.2);
    }

    .modal-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .close-btn {
      position: absolute;
      top: 1.2rem;
      right: 1.2rem;
      background: none;
      border: none;
      color: var(--text-primary);
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.2s;
      opacity: 0.7;
    }

    .close-btn:hover {
      color: var(--accent);
      opacity: 1;
    }

    .service-list {
      background: #454547;
      padding: 1rem;
      overflow-y: auto;
      flex-grow: 1;
    }

    .service-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8rem 1rem;
      border-bottom: 1px solid rgba(240, 240, 240, 0.1);
      transition: all 0.3s ease;
      box-sizing: border-box
    }

    .service-item:hover {
      background: rgba(255, 255, 255, 0.03);
    }

    .subtotal {
      display: flex;
      justify-content: space-between;
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .subtotal-value {
      font-weight: 600;
      color: var(--text-primary);
    }

    .service-notes {
      font-style: italic;
      margin-top: 0.3rem;
    }

    .summary-section {
      padding: 1.2rem;
      border-top: 1px solid rgba(222, 0, 0, 0.2);
      background: rgba(0, 0, 0, 0.2);
    }

    /* TASK DETAILS & FURNITURE details */
    .task-details {
      margin-top: 1rem;
      padding: 0.75rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      border-left: 3px solid var(--accent);
    }

    .task-details h3 {
      margin-bottom: 1rem;
      color: var(--text-primary);
      font-size: 1.1rem;
    }

    .task-details select,
    .task-details textarea {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 1rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-primary);
      border-radius: 6px;
      font-size: 0.9rem;
    }

    .task-details textarea {
      min-height: 80px;
      resize: vertical;
    }

    /* FURNITURE details */
    .furniture-items {
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: 0.5rem;
    }

    .furniture-type-selection {
      margin: 1rem 0;
      padding: 1rem;
      background: var(--bg-card);
      border-radius: var(--border-radius);
    }

    .furniture-type-selection label {
      margin-right: 1.5rem;
    }

    #furniture-select {
      width: 100%;
      margin: 1rem 0;
    }

    #furnitureSelect,
    #furnituredetailsSection {
      display: none;
      margin-bottom: 1.5rem;
    }

    #furnituredetailsSection button {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 0.5rem;
      transition: all 0.2s ease;
    }

    #furnituredetailsSection button:hover {
      background-color: var(--accent);
    }

    #selectedFurnitureList {
      list-style: none;
      margin: 1rem 0;
    }

    #selectedFurnitureList li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      background: var(--bg-card);
      border-radius: 6px;
      margin-bottom: 0.5rem;
    }

    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      padding: 0 1.2rem 1.2rem;
    }

    .book-more-button {
      background: linear-gradient(125deg, silver 10%, silver 20%, #474747 70%, #000 80%, #000 95%);
      font-weight: 700;
      color: #fff;
      border: 4px outset #000;
      padding: 12px 40px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
      border-radius: 5px;
    }

    .checkout-button,
    .client-login {
      background: radial-gradient(circle, silver 5%, #de0000 40%, #8a0615 60%, #8a0615 90%);
      font-weight: 700;
      color: #fff;
      border: 4px outset #000;
      padding: 12px 40px;
      font-size: 16px;
      margin-top: 20px;
      border-radius: 5px;
      cursor: pointer
    }

    .book-more-button:hover,
    .checkout-button:hover,
    .client-login:hover {
      background: #000000;
      transition: all .3s ease;
      color: #c0c0c0;
    }

    .clear-all-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0.6rem 1.25rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .back-button {
      background: var(--bg-card);
      color: var(--text-primary);
      border: 1px solid var(--accent);
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      font-weight: 300;
      font-size: small;
      cursor: pointer;
      transition: all 0.2s ease;
      display: block;
      margin-top: 1rem;
    }

    .back-button:hover {
      background: rgba(222, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .back-button::before {
      content: "‚Üê";
      margin-right: 0.5rem;
    }

    .card-invoices {
      display: block;
      border: 1px outset rgba(0, 0, 0, .75);
      background-color: rgba(255, 255, 255, .5);
      border-radius: 10px;
      box-shadow: 4px 4px 8px rgba(95, 95, 95, .85);
      text-align: center;
      padding: 2px;
      margin-top: 4rem;
      box-sizing: border-box
    }

    .card-invoices h1 {
      color: #000;
      font-size: 5vw
    }

    .card-invoices p {
      color: #666
    }

    footer {
      display: flex;
      font-weight: 700;
      color: #454547;
      text-align: middle;
      justify-content: center;
      margin-top: 4rem;
    }

    footer a {
      font-size: 10px;
      margin: 2% 2%
    }

    /* TOUCH-FRIENDLY ELEMENTS */
    .category-tile,
    .service-selection-card,
    .detail-card {
      touch-action: manipulation;
      /* Improve touch responsiveness */
    }

    button,
    input,
    select {
      min-height: 44px;
      /* ADA compliant touch target */
    }

    /* ========== ANIMATIONS & EFFECTS ========== */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes tapAnimation {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(0.95);
      }

      100% {
        transform: scale(1);
      }
    }

    @keyframes textGlow {
      0% {
        text-shadow: 0 0 5px rgba(222, 0, 0, 0);
      }

      100% {
        text-shadow: 0 0 8px rgba(222, 0, 0, 0.6), 0 0 12px rgba(222, 0, 0, 0.4), 0 0 16px rgba(222, 0, 0, 0.2);
      }
    }

    @keyframes underlineExpand {
      0% {
        width: 0;
        left: 50%;
      }

      100% {
        width: 80%;
        left: 10%;
      }
    }

    .tap-animate {
      animation: tapAnimation 0.3s ease;
    }

    /* ========== RESPONSIVE ADJUSTMENTS ========== */
    @media (max-width: 400px) {
      .page-container {
        overflow-x: auto;
      }

      #categories-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 480px) {
      .highlight-box {
        gap: 1%;
        padding: 8px 10px;
      }

      .thandylogo {
        max-height: 25px;
      }

      .tom_kongerslev img {
        max-height: 35px;
      }

      .contact-button {
        padding: 4px 8px;
        font-size: 0.8em;
      }

      #categories-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 600px) {
      #categories-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>

  <script src="https://tommichael88.github.io/booktomnyc/js/marquee.js" defer></script>
</head>

<body style="font-family:Roboto">
  <div class="pg_background" style="background-image:url(https://github.com/tommichael88/booktomnyc/blob/main/images/background_16b.jpg?raw=true)"></div>
  <div class="fab-container"></div>
  <div class="qrc_page_inner">
    <div class="section qrc_gallery">
      <div class="qrc_gallery_wrapper">
        <div class="qrc_gallery_list">
          <div class="profile-image-container">
            <img class="profile-image" src="https://tommichael88.github.io/booktomnyc/images/TomKongerslev_nobg.png?raw=true" alt="Profile Image">
          </div>

          <span class="highlight-box">
            <img class="thandylogo" src="https://raw.githubusercontent.com/tommichael88/booktomnyc/refs/heads/main/images/thandylogo.png" alt="HandyTech logo">
            <div class="tom_kongerslev">
              <img src="https://tommichael88.github.io/booktomnyc/images/tmk_ai_signature2b.png?raw=true" alt="Tom Kongerslev signature">
            </div>
            <button id="contactBtn" class="contact-button">CONTACT ‚â£</button>
          </span>

          <div class="card-schedule-service">
            <h1 style="color:#454545;text-align:center;font-size:2rem;line-height:.85; margin-bottom:2.5rem;margin-top:3rem;">
              <img src="https://github.com/tommichael88/booktomnyc/blob/main/images/calendar.png?raw=true" style="max-width:45px;height:auto;padding:2px" alt="Service Calendar Icon">
              <font><i>SERVICE</i></font><br>
              <b>SCHEDULE</b>
            </h1>
            <div class="new-service-request-grid-topper" style="display:flex;justify-content:space-between;align-items:center;font-size:1rem;background: linear-gradient(25deg, #000 1%, #8a0615 20%, #de0000 40%, #8a0615 60%, #000 95%);color: #fff">
              <span><u>·¥∫·µâ ∑</u> <b>Service Request ‚ñº</b></span>
              <button class="reschedule-service-button">‚û§ üóìÔ∏è View | Edit Ô∏è</button>
            </div>

            <!-- Categories Grid -->
            <div class="menu-container" id="categories-grid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:0;margin-bottom:0">
              <div class="category-tile" data-category="Minor Home Repairs">
                <div class="category-icon">üè†</div>
                <h2>Minor Home Repairs</h2>
              </div>
              <div class="category-tile" data-category="Furniture Fixes & Assembly">
                <div class="category-icon">üõãÔ∏è</div>
                <h2>Furniture Fixes</h2>

              </div>
              <div class="category-tile" data-category="Wall Mounting">
                <div class="category-icon">üñºÔ∏è</div>
                <h2>Wall Mounting</h2>

              </div>
              <div class="category-tile" data-category="Electrical Help">
                <div class="category-icon">üí°</div>
                <h2>Electrical Help</h2>
              </div>
              <div class="category-tile" data-category="Plumbing Help">
                <div class="category-icon">üöø</div>
                <h2>Plumbing Help</h2>

              </div>
              <div class="category-tile" data-category="Computer Repairs">
                <div class="category-icon">üíª</div>
                <h2>Computer Repairs</h2>
              </div>
            </div>
            <!-- Floating Cart FAB (hidden if no items) -->
            <div id="cartFab" class="fab-container" style="display: none;">
              <button class="fab" onclick="toggleCartModal()">
                üìÉ <span id="fabCartCount">0</span>
              </button>
            </div>
            <!-- Search Modal -->
            <div id="searchModal" class="modal-overlay">
              <div class="modal-content">
                <div class="modal-header">
                  <h2 class="modal-title">Search Services</h2>
                  <button class="close-btn" onclick="closeSearchModal()">√ó</button>
                </div>
                <input type="text" class="search-input" id="modalSearchInput" placeholder="" />
                <div id="modalSearchResults" class="service-list"></div>
              </div>
            </div>

            <!-- Cart Modal -->
            <div id="modalOverlay" class="modal-overlay">
              <div class="modal-content">
                <div class="modal-header">
                  <h2 class="modal-title">Your Selected Services</h2>
                  <button class="close-btn" onclick="toggleCartModal()">√ó</button>
                </div>
                <div id="modalServiceList" class="service-list"></div>
                <div class="summary-section">
                  <div class="subtotal">
                    <span>Subtotal (<span id="serviceCount">0</span> items):</span>
                    <span id="modalTotal">$0</span>
                  </div>
                </div>
                <div class="action-buttons">
                  <button class="book-more-button" onclick="showCategories()">‚ûï More Services</button>
                  <button class="checkout-button" onclick="bookServices()">Checkout</button>
                </div>
              </div>
            </div>
            <!-- Service Selection Container (for chosen category) -->
            <div id="serviceSelectionContainer" style="display: none;">
              <div id="selectedSection"></div>
              <!-- Furniture Details (if applicable) -->
              <div class="task-details" id="furnituredetailsSection" style="display: none;">
                <h4>Select Your Furniture Item</h4>
                <div>
                  <label>
                    <input type="radio" name="furnitureType" value="ikea" checked> IKEA
                  </label>
                  <label>
                    <input type="radio" name="furnitureType" value="generic"> Non‚ÄëIKEA
                  </label>
                </div>
                <select id="furniture-select">
                  <option value="">Select Here</option>
                </select>
                <button class="book-more-button" onclick="addFurnitureItem()">Add Furniture Item</button>
                <ul id="selectedFurnitureList"></ul>
                <button class="clear-all-btn" onclick="clearAllFurnitureItems()">Clear Furniture Items</button>
              </div>
            </div>

            <!-- Service Details Container (shows service details and note input) -->
            <div id="servicedetailsContainer" style="display: none;"></div>

            <!-- Selected Services Summary -->
            <div id="selectedServicesSection" style="display: none;">
              <h4>Services Requested</h4>
              <div id="selectedServicesList"></div>
              <div id="estimateTotal" class="estimate-total" style="display: none;">
                <span>Estimated Subtotal:</span>
                <span id="totalAmount">$0</span>
              </div>
              <div class="action-buttons">
                <button class="clear-all-btn" style="width: 25%; margin-right: 50%; background-color: grey;" onclick="clearAllServices()">Clear All</button>
                <button class="book-more-button" onclick="showCategories()">‚ûï More Services</button>
                <button class="checkout-button" onclick="bookServices()">Checkout</button>
              </div>
            </div>
          </div>
        </div>
        <div class="card-invoices" style="color:#fff">
          <h1 style="color:rgba(155,0,0,.99)">
            <img src="https://tommichael88.github.io/booktomnyc/images/zohoinvoice?raw=true" alt="Zoho Invoice favicon" style="max-width:50px;height:auto;text-align:center;padding:2px;margin:10px">
            <br>
            <span style="font-size:2.5rem">
              <b>INVOICES</b>
            </span>
          </h1>
          <p style="font-size:1rem;padding:4px">view invoices ‚Ä¢ process payments ‚Ä¢ digital receipts ‚Ä¢ review quote estimates ‚Ä¢ share documents ‚Ä¢ transaction history ‚Ä¢ expense receipts</p>
          <button class="client-login">üîê ùóñùóüùóúùóòùó°ùóß PORTAL</button>
          <br>
          <br>

        </div>
      </div>
    </div>
  </div>
  <footer>
    <a href="https://tommichael88.github.io/booktomnyc/Privacy%20Policy">Privacy Policy</a> |
    <a href="https://tommichael88.github.io/booktomnyc/ServiceAgreement#annex-a">Service Scope</a> |
    <a href="https://tommichael88.github.io/booktomnyc/ServiceAgreement">Service Agreement</a>
  </footer>

  <script>
    /* Global state and configuration */
    const state = {
      selectedServices: [],
      furnitureItems: [],
      currentView: 'categories' // 'categories' | 'services' | 'details' | 'summary'
    };
    const furnitureHourlyRate = 40;
    /* --------------------------
       IKEA Furniture Process
       -------------------------- */
    const ikeaFurniture = [{
        category: "BEKANT",
        items: ["Desk + Underframe"]
      },
      {
        category: "BESTA",
        items: ["Single frame, shelves/floor standing", "Single frame, door/drawer, floor standing", "Single frame/wall mounting"]
      },
      {
        category: "BILLY",
        items: ["Bookcase 1x frame"]
      },
      {
        category: "BJURSTA",
        items: ["Extendable table"]
      },
      {
        category: "BRIMNES",
        items: ["Bed frame", "2 drawer chest", "3 drawer chest", "4 drawer chest", "Bed frame & storage", "Headboard", "Wardrobe 2x doors", "Wardrobe 3x doors", "Nightstand", "Daybed 2x drawers"]
      },
      {
        category: "BRUSALI",
        items: ["Bed frame", "Bed + 4 storage boxes", "3 drawer chest", "Nightstand"]
      },
      {
        category: "FINGAL",
        items: ["Swivel chair"]
      },
      {
        category: "FRIHETEN",
        items: ["Sofa bed & chaise"]
      },
      {
        category: "GALANT",
        items: ["2x drawer", "3x drawer", "4x drawer", "Cabinet (sliding doors)"]
      },
      {
        category: "HEMNES",
        items: ["Bed frame", "2 drawer chest", "3 drawer chest", "6 drawer chest", "Dresser 8x drawer", "Nightstand", "Daybed & 3 drawers"]
      },
      {
        category: "KALLAX",
        items: ["Shelving unit 5x5", "Shelving unit 4x4", "Shelving unit 2x4", "Shelving unit 1x4", "Shelving unit 2x2", "Insert + 2 drawers", "Insert + door"]
      },
      {
        category: "LACK",
        items: ["Side table", "Coffee table", "TV Unit"]
      },
      {
        category: "LINNMON ADILS",
        items: ["Table (table top and four legs)"]
      },
      {
        category: "MALM",
        items: ["Bed Frame", "Bed Frame + 4 Storage boxes", "2 Drawer Chest", "3 Drawer Chest", "4 Drawer Chest", "6 Drawer Chest", "6 Drawer Dresser", "Lift bed"]
      },
      {
        category: "MICKE",
        items: ["Desk + 1 Drawer", "Desk + Drawers & Storage", "Add-on unit"]
      },
      {
        category: "MORVIK",
        items: ["Wardrobe"]
      },
      {
        category: "PAX",
        items: ["One frame, hinged doors, up to 3 addons", "Two frames, sliding doors, up to 5 addons"]
      },
      {
        category: "SODERHAMN",
        items: ["Sofa one seat section + cover"]
      },
      {
        category: "TRYSIL",
        items: ["Bed Frame", "3 Drawer Chest", "Nightstand", "Wardrobe"]
      },
      {
        category: "OTHER NOT LISTED",
        items: ["NOT LISTED or UNKNOWN"]
      }
    ];
    const genericFurniture = [
      "Desk", "Chair", "Bookcase", "Dresser", "Bed Frame",
      "Sofa", "Table", "Cabinet", "Shelving Unit", "Wardrobe"
    ];

    function initFurnituredetails() {
      const furnitureSelect = document.getElementById('furniture-select');
      const isIKEA = document.querySelector('input[name="furnitureType"]:checked').value === 'ikea';
      furnitureSelect.innerHTML = '<option value="">Select Here</option>';
      if (isIKEA) {
        ikeaFurniture.forEach(group => {
          const optgroup = document.createElement('optgroup');
          optgroup.label = group.category;
          group.items.forEach(item => {
            const option = document.createElement('option');
            option.value = `${group.category} - ${item}`;
            option.textContent = item;
            optgroup.appendChild(option);
          });
          furnitureSelect.appendChild(optgroup);
        });
      } else {
        genericFurniture.forEach(item => {
          const option = document.createElement('option');
          option.value = item;
          option.textContent = item;
          furnitureSelect.appendChild(option);
        });
      }
    }

    function addFurnitureItem() {
      const furnitureSelect = document.getElementById('furniture-select');
      const selectedItem = furnitureSelect.value;
      if (!selectedItem) return;
      const selectedFurnitureList = document.getElementById('selectedFurnitureList');
      const li = document.createElement('li');
      li.textContent = selectedItem;
      const button = document.createElement('button');
      button.className = "remove-item";
      button.innerHTML = '‚úï';
      button.onclick = function() {
        li.remove();
        removeFurnitureItem(selectedItem);
      };
      li.appendChild(button);
      selectedFurnitureList.appendChild(li);
      state.furnitureItems.push(selectedItem);
      furnitureSelect.value = "";
    }

    function removeFurnitureItem(item) {
      state.furnitureItems = state.furnitureItems.filter(i => i !== item);
    }

    function clearAllFurnitureItems() {
      document.getElementById('selectedFurnitureList').innerHTML = "";
      state.furnitureItems = [];
    }
    /* --------------------------
       Service & Cart Functions
       -------------------------- */
    function updateCartDisplay() {
      const count = state.selectedServices.length;
      document.getElementById('fabCartCount').textContent = count;
      document.getElementById('cartFab').style.display = count > 0 ? 'block' : 'none';
    }

    function addToCart(serviceEntry) {
      state.selectedServices.push(serviceEntry);
      updateCartDisplay();
      updateSelectedServices();
    }

    function updateSelectedServices() {
      const list = document.getElementById('selectedServicesList');
      list.innerHTML = "";
      let total = 0;
      state.selectedServices.forEach(service => {
        const priceVal = parseFloat(service.price.replace(/[^0-9.]/g, '')) || 0;
        total += priceVal;
        const div = document.createElement('div');
        div.className = 'selected-service-item';
        div.innerHTML = `
    <div class="selected-service-icon">${service.icon}</div>
    <div class="selected-service-text">
      <h4>${service.name}</h4>
      <div>${service.detail}</div>
      ${service.notes ? `<div class="service-notes">${service.notes}</div>` : ''}
      ${service.furnitureItems?.length > 0 ? 
        `<div class="furniture-items">
          <strong>Items:</strong> ${service.furnitureItems.join(', ')}
         </div>` : ''}
    </div>
    <div class="selected-service-price">${service.price}</div>
    <button class="remove-service-btn" onclick="removeService('${service.id}')">‚úï</button>
  `;
        list.appendChild(div);
      });
      document.getElementById('estimateTotal').style.display = 'flex';
      document.getElementById('totalAmount').textContent = "$" + total.toFixed(2);
      document.getElementById('selectedServicesSection').style.display = 'block';
    }

    function removeService(id) {
      state.selectedServices = state.selectedServices.filter(s => s.id !== id);
      updateSelectedServices();
      updateCartDisplay();
      if (state.selectedServices.length === 0) {
        showCategories();
      }
    }

    function showCategories() {
      state.currentView = 'categories';
      document.getElementById('categories-grid').style.display = 'grid';
      document.getElementById('serviceSelectionContainer').style.display = 'none';
      document.getElementById('servicedetailsContainer').style.display = 'none';
      document.getElementById('selectedServicesSection').style.display = 'none';
    }

    function showCategoryServices(category) {
      // Hide the categories grid
      document.getElementById('categories-grid').style.display = 'none';
      // Get the section to update
      const section = document.getElementById('selectedSection');
      section.innerHTML = ""; // Clear previous content
      // Add the category heading
      const h3 = document.createElement("h3");
      h3.textContent = category + " Services";
      section.appendChild(h3);
      // Build the service grid
      const grid = document.createElement('div');
      grid.className = 'service-selection-grid';
      // Defensive: Check if category exists
      if (!serviceData[category]) {
        const err = document.createElement('p');
        err.textContent = "No services found for this category.";
        section.appendChild(err);
        return;
      }
      // Create a card for each service in this category
      Object.keys(serviceData[category]).forEach(service => {
        const info = serviceData[category][service];
        const card = document.createElement('div');
        card.className = 'service-selection-card';
        // Icon (emoji, safe as text)
        const iconDiv = document.createElement('div');
        iconDiv.className = 'service-selection-icon';
        iconDiv.textContent = info.icon;
        // Service name
        const h4 = document.createElement('h4');
        h4.textContent = service;
        // Description
        const p = document.createElement('p');
        p.textContent = info.description;
        // Price
        const priceDiv = document.createElement('div');
        priceDiv.className = 'service-price';
        priceDiv.textContent = info.price;
        // Assemble the card
        card.appendChild(iconDiv);
        card.appendChild(h4);
        card.appendChild(p);
        card.appendChild(priceDiv);
        // Add click event to show service details
        card.addEventListener('click', () => {
          showServicedetails(category, service);
        });
        grid.appendChild(card);
      });
      section.appendChild(grid);
      // Back button
      const backBtn = document.createElement('button');
      backBtn.className = 'back-button';
      backBtn.textContent = 'Back to Categories';
      backBtn.onclick = showCategories;
      section.appendChild(backBtn);
      // Furniture details toggle
      if (category === "Furniture Fixes & Assembly") {
        document.getElementById('furnituredetailsSection').style.display = 'block';
        initFurnituredetails();
      } else {
        document.getElementById('furnituredetailsSection').style.display = 'none';
      }
      document.getElementById('serviceSelectionContainer').style.display = 'block';
      document.getElementById('servicedetailsContainer').style.display = 'none';
    }

    function showServicedetails(category, service, preselecteddetail) {
      state.currentView = 'details';
      document.getElementById('categories-grid').style.display = 'none';
      document.getElementById('serviceSelectionContainer').style.display = 'none';
      const container = document.getElementById('servicedetailsContainer');
      container.innerHTML = "";
      container.style.display = 'block';
      const header = document.createElement('h3');
      header.textContent = service;
      container.appendChild(header);
      const grid = document.createElement('div');
      grid.className = 'details-grid';
      const info = serviceData[category][service];
      // Create detail cards
      info.details.forEach(detail => {
        const card = document.createElement('div');
        card.className = 'detail-card';
        card.textContent = detail;
        card.addEventListener('click', () => {
          Array.from(grid.children).forEach(c => c.classList.remove('selected'));
          card.classList.add('selected');
          noteInput.style.display = 'block';
          // Show furniture selection only after detail is selected
          if (info.requiresFurnitureSelection) {
            furnitureSelection.style.display = 'block';
          }
        });
        if (preselecteddetail && detail.toLowerCase().includes(preselecteddetail.toLowerCase())) {
          card.classList.add('selected');
        }
        grid.appendChild(card);
      });
      container.appendChild(grid);
      // Create furniture selection elements
      const furnitureSelection = document.createElement('div');
      furnitureSelection.style.display = 'none';
      furnitureSelection.innerHTML = `
    <div class="furniture-type-selection">
      <label><input type="radio" name="furnitureType" value="ikea" checked> IKEA</label>
      <label><input type="radio" name="furnitureType" value="generic"> Non-IKEA</label>
    </div>
    <select id="furniture-select">
      <option value="">Select Furniture Item</option>
    </select>
    <button class="add-item-btn" onclick="addFurnitureItem()">Add Item</button>
    <ul id="selectedFurnitureList"></ul>
  `;
      // Only add furniture selection for relevant services
      if (info.requiresFurnitureSelection) {
        container.appendChild(furnitureSelection);
        initFurnituredetails();
        // Handle radio button changes
        document.querySelectorAll('input[name="furnitureType"]').forEach(radio => {
          radio.addEventListener('change', () => {
            initFurnituredetails();
            clearAllFurnitureItems();
          });
        });
      }
      const noteInput = document.createElement('textarea');
      noteInput.id = 'serviceNoteInput';
      noteInput.placeholder = 'Enter any additional details regarding the job...';
      noteInput.className = 'service-input-area';
      noteInput.style.display = 'none';
      container.appendChild(noteInput);
      const addBtn = document.createElement('button');
      addBtn.className = 'book-more-button';
      addBtn.textContent = 'Add to Cart';
      addBtn.style.display = 'none';
      addBtn.addEventListener('click', () => {
        const selectedDetail = grid.querySelector('.detail-card.selected');
        if (!selectedDetail) {
          alert('Please select a detail.');
          return;
        }
        if (!noteInput.value.trim()) {
          alert('Please enter job details.');
          return;
        }
        let finalNotes = noteInput.value.trim();
        let finalPrice = info.price;
        if (info.requiresFurnitureSelection) {
          if (state.furnitureItems.length === 0) {
            alert('Please add at least one furniture item.');
            return;
          }
          finalNotes += "\nFurniture Items: " + state.furnitureItems.join(", ");
          finalPrice = `$${furnitureHourlyRate * state.furnitureItems.length}/hour`;
          clearAllFurnitureItems();
        }
        const entry = {
          id: `${category}-${service}-${Date.now()}`,
          category: category,
          name: service,
          price: finalPrice,
          icon: info.icon,
          detail: selectedDetail.textContent,
          notes: finalNotes,
          furnitureItems: [...state.furnitureItems]
        };
        addToCart(entry);
        container.style.display = 'none';
        document.getElementById('selectedServicesSection').style.display = 'block';
      });
      noteInput.addEventListener('input', function() {
        addBtn.style.display = this.value.trim() ? 'block' : 'none';
      });
      container.appendChild(addBtn);
      const backBtn = document.createElement('button');
      backBtn.className = 'back-button';
      backBtn.textContent = 'Back';
      backBtn.addEventListener('click', () => {
        container.style.display = 'none';
        showCategoryServices(category);
      });
      container.appendChild(backBtn);
    }

    function bookServices() {
      if (state.selectedServices.length === 0) {
        alert("No services selected!");
        return;
      }
      // (Insert appointment details collection if desired)
      alert(`Booking confirmed!
Estimated Total: ${document.getElementById('totalAmount').textContent}
Thank you!`);
      clearAllServices();
    }

    function clearAllServices() {
      state.selectedServices = [];
      updateCartDisplay();
      document.getElementById('selectedServicesSection').style.display = 'none';
      showCategories();
    }
    /* --------------------------
       Cart Modal Functions
       -------------------------- */
    function updateCartModal() {
      const modalList = document.getElementById('modalServiceList');
      modalList.innerHTML = "";
      let total = 0;
      state.selectedServices.forEach(service => {
        const div = document.createElement('div');
        div.className = 'service-item';
        div.innerHTML = `<span>${service.name}</span>
            <span class="service-price">${service.price}</span>
            <button class="remove-btn" onclick="removeService('${service.id}')">‚úï</button>`;
        modalList.appendChild(div);
        total += parseFloat(service.price.replace(/[^0-9.]/g, '')) || 0;
      });
      document.getElementById('serviceCount').textContent = state.selectedServices.length;
      document.getElementById('modalTotal').textContent = "$" + total.toFixed(2);
    }

    function toggleCartModal() {
      const modal = document.getElementById('modalOverlay');
      if (modal.style.display === 'block') {
        modal.style.display = 'none';
      } else {
        updateCartModal();
        modal.style.display = 'block';
      }
    }
    /* --------------------------
       Search Modal Functions
       -------------------------- */
    function performSearch(query) {
      const results = [];
      query = query.toLowerCase().trim();
      Object.keys(serviceData).forEach(category => {
        Object.keys(serviceData[category]).forEach(service => {
          const info = serviceData[category][service];
          if (service.toLowerCase().includes(query) || info.description.toLowerCase().includes(query)) {
            results.push({
              category,
              service,
              matchdetail: null
            });
          } else {
            info.details.forEach(detail => {
              if (detail.toLowerCase().includes(query))
                results.push({
                  category,
                  service,
                  matchdetail: detail
                });
            });
          }
        });
      });
      return results;
    }

    function openSearchModal() {
      document.getElementById('searchModal').style.display = 'flex';
      document.getElementById('modalSearchInput').focus();
    }

    function closeSearchModal() {
      document.getElementById('searchModal').style.display = 'none';
    }
    document.getElementById('modalSearchInput').addEventListener('input', function(e) {
      const results = performSearch(e.target.value);
      const container = document.getElementById('modalSearchResults');
      container.innerHTML = "";
      results.forEach(result => {
        const div = document.createElement('div');
        div.className = 'service-item';
        div.textContent =
          result.category +
          " > " +
          result.service +
          (result.matchdetail ? " (detail: " + result.matchdetail + ")" : "");
        div.onclick = () => {
          closeSearchModal();
          showServicedetails(result.category, result.service, result.matchdetail);
        };
        container.appendChild(div);
      });
    });
    /* --------------------------
       Hardcoded Service Data (migrated from your original mapping)
       -------------------------- */
    window.serviceData = {
      "Minor Home Repairs": {
        "Appliances ‚è≤Hourly Service": {
          price: "$70/hour",
          description: "Hourly rate for appliance maintenance, repair, assessment. Excludes specialized service.",
          icon: "üéõÔ∏è",
          details: ["Maintenance", "Repair", "Assessment"]
        },
        "Door Handles & Locks Installation": {
          price: "$70",
          description: "Flat-rate for door knob, lock installation. Hardware provided by client.",
          icon: "üîí",
          details: ["Standard door", "Security lock", "Smart lock"]
        },
        "Furniture Repair ‚è≤Hourly Service": {
          price: "$70/hour",
          description: "Hourly charge for repairing damaged furniture.",
          icon: "ü™ë",
          details: ["Wood furniture", "Upholstery", "Metal furniture"]
        },
        "Hollow Door Repair": {
          price: "$125",
          description: "Flat-rate patch & paint for interior door damage. Materials included.",
          icon: "üö™",
          details: ["Patch & paint", "Hinge repair", "Frame adjustment"]
        },
        "Wall Repair - Patch & Paint": {
          price: "$70",
          description: "Flat-rate interior wall patch & paint repairs. Materials included.",
          icon: "üß±",
          details: ["Small holes", "Large holes", "Cracks"]
        }
      },
      "Wall Mounting": {
        "Curtains/Drapes w. Single Rod Installation": {
          price: "$50",
          description: "Single-rod installation of standard curtains or drapes.",
          icon: "ü™ü",
          details: ["Standard rod", "Tension rod", "Decorative rod"]
        },
        "Frame/Shelf Mounting ‚è≤Hourly Service": {
          price: "$60/hour",
          description: "Hourly service for wall mounting frames and shelves.",
          icon: "üìö",
          details: ["Picture frames", "Shelves", "Wall art"]
        },
        "TV Mounting (Under 60\") + Concealed Cables": {
          price: "$150",
          description: "Flat-rate for TV mounting under 60\" with concealed cables.",
          icon: "üì∫",
          details: ["Drywall", "Concrete", "Brick"]
        },
        "TV Mounting (Under 60\") standard": {
          price: "$60",
          description: "Flat-rate for TV mounting under 60\". Additional hardware costs may apply.",
          icon: "üì∫",
          details: ["Basic mounting", "Tilt mount", "Swivel mount"]
        }
      },
      "Computer Repairs": {
        "Data Transfer / Data Back-Up": {
          price: "$99",
          description: "Copy data or create backups. Excludes additional hardware.",
          icon: "üíæ",
          details: ["External drive", "Cloud backup", "Network transfer"]
        },
        "Part Replacement/Upgrade": {
          price: "$125",
          description: "Replace/upgrade PC hardware parts. Client-provided or expensed parts.",
          icon: "üíª",
          details: ["RAM", "SSD", "Graphics card"]
        },
        "PC Diagnostic Service": {
          price: "$75",
          description: "Diagnose hardware or software issues. Fee credited toward repair services.",
          icon: "üîç",
          details: ["Hardware", "Software", "Performance"]
        },
        "Software Install/Update/Removal": {
          price: "$50",
          description: "Install, update, or remove up to 4 software applications.",
          icon: "üìÄ",
          details: ["Operating system", "Applications", "Drivers"]
        },
        "System Restore": {
          price: "$125",
          description: "Restore PC back to an earlier version of Windows.",
          icon: "‚èÆÔ∏è",
          details: ["Factory reset", "Recovery partition", "Backup restore"]
        },
        "Virus/Malware Removal": {
          price: "$125",
          description: "Remove malicious programs while preserving OS.",
          icon: "üõ°Ô∏è",
          details: ["Scan & remove", "System cleanup", "Prevention setup"]
        }
      },
      "Electrical Help": {
        "Light Fixture Swap": {
          price: "$60",
          description: "Flat-rate to replace an existing light fixture (excluding ceiling fans).",
          icon: "üí°",
          details: ["Ceiling light", "Wall sconce", "Pendant light"]
        }
      },
      "Furniture Fixes & Assembly": {
        "Assembly": {
          price: "$40/hour",
          description: "Furniture assembly service",
          icon: "üõ†Ô∏è",
          details: ["Select furniture type"],
          requiresFurnitureSelection: true
        },
        "Repair": {
          price: "$70/hour",
          description: "Furniture repair service",
          icon: "üî®",
          details: ["Select repair type"],
          requiresFurnitureSelection: true
        }
      },
      "Plumbing Help": {
        "Bidet Accessory Install/Removal": {
          price: "$70",
          description: "Flat-rate for bidet attachment install/removal. Excludes specialized toilets.",
          icon: "üöΩ",
          details: ["Standard bidet", "Smart bidet", "Add-on"]
        },
        "Fixture Swap (Cosmetic)": {
          price: "$70",
          description: "Flat-rate for swapping sink faucet or shower head.",
          icon: "üö∞",
          details: ["Faucet", "Shower head", "Drain cover"]
        },
        "Leak Under Sink Repair": {
          price: "$75",
          description: "Flat-rate repair for a minor leak under the sink.",
          icon: "üíß",
          details: ["Pipe leak", "Drain leak", "Supply line"]
        },
        "Unclog Sink/Shower/Toilet (Minor)": {
          price: "$70",
          description: "Flat-rate for non-major clog removal.",
          icon: "ü™†",
          details: ["Plunger", "Drain snake", "Chemical treatment"]
        }
      }
    };
    /* --------------------------
       DOMContentLoaded ‚Äì wire up category taps, etc.
       -------------------------- */
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('input[name="furnitureType"]').forEach(radio => {
        radio.addEventListener('change', () => {
          initFurnituredetails();
          clearAllFurnitureItems();
        });
      });
    });
    document.addEventListener('DOMContentLoaded', () => {
      initFurnituredetails();
      document.querySelectorAll('.category-tile').forEach(tile => {
        tile.addEventListener('click', function() {
          const category = this.getAttribute('data-category');
          this.classList.add('tap-animate');
          setTimeout(() => this.classList.remove('tap-animate'), 300);
          showCategoryServices(category);
        });
      });
    });
  </script>
</body>

</html>
