      <!DOCTYPE html>
      <html lang="en">

      <head>
          <meta charset="UTF-8" />
          <meta http-equiv="X-UA-Compatible" content="IE=edge" />
          <meta name="viewport" content="width=device-width,initial-scale=1" />
          <title>BookTOM</title>
          <meta name="description" content="" />
          <meta property="og:title" content="Tom Kongerslev" />
          <meta property="og:type" content="website" />
          <meta property="og:description" content="BookTom" />
          <meta property="og:image" content="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" />
          <link id="favicon" rel="icon" href="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" type="image/x-icon" />
          <link rel="preload" href="https://tommichael88.github.io/booktomnyc/images/TomsHandyTech_logo_today_lowres_nobg.png?raw=true" as="image" />
          <link rel="preload" href="https://tommichael88.github.io/booktomnyc/images/TomKongerslev_nobg.png?raw=true" as="image" />
          <link rel="preload" href="https://tommichael88.github.io/booktomnyc/js/marquee.js" as="script" />
          <link rel="shortcut icon" href="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" type="image/x-icon" />
          <link rel="apple-touch-icon" href="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" />
          <link rel="stylesheet" href="https://tommichael88.github.io/booktomnyc/External/styles.css" />
          <!-- Font Awesome 6.5.2 -->
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer">

          <!-- Bootstrap 5.3.3 -->
          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

          <style>
              /* ========== CORE ELEMENTS ========== */
              :root {
                  --bg-card: #1e1e1e;
                  --bg-card-hover: #2a2a2a;
                  --primary: #474747;
                  --primary-hover: #ffffff;
                  --text-primary: #f5f5f5;
                  --text-secondary: #c0c0c0;
                  --accent-light: rgba(250, 0, 0, 1);
                  --accent: rgba(250, 0, 0, 1);
                  --selected-bg: rgba(250, 0, 0, 0.1);
                  --border-radius: 8px;
              }

              * {
                  box-sizing: border-box;
                  margin: 0;
                  padding: 0;
                  font-family: 'Ubuntu', -apple-system, BlinkMacSystemFont, sans-serif;
              }

              html {
                  scroll-behavior: smooth;
              }

              html,
              body {
                  min-height: 100vh;
                  background-color: var(--bg-dark);
                  color: var(--text-primary);
              }

              body {
                  padding: 10px;
                  margin: auto;
                  max-width: 468px;
              }

              /* ========== PAGE BACKGROUND & LAYOUT ========== */
              .pg_background {
                  background-image: url('https://github.com/tommichael88/booktomnyc/blob/main/images/BCO.30cffe35-ab38-43f9-a861-19e8acbf4843E.png?raw=true');
                  background-size: cover;
                  background-attachment: fixed;
                  position: fixed;
                  top: 0;
                  left: 0;
                  right: 0;
                  bottom: 0;
                  z-index: -1;
              }

              .qrc_page_wrapper {
                  background-size: cover;
                  background-position: inherit;
                  background-color: var(--qrc-secondary);
                  max-width: auto;
                  padding: 0;
                  padding-top: 0.1px;
                  padding-bottom: 0.1px;
                  overflow: auto;
                  position: relative;
                  height: 100vh;
              }

              .qrc_page_inner {
                  max-width: 490px;
                  margin: auto;
                  position: relative;
                  padding: 4px 4px 1px 4px;
                  -webkit-border-top-left-radius: var(--qrc-border-radius);
                  -webkit-border-top-right-radius: var(--qrc-border-radius);
                  -moz-border-radius-topleft: var(--qrc-border-radius);
                  -moz-border-radius-topright: var(--qrc-border-radius);
                  border-top-left-radius: var(--qrc-border-radius);
                  border-top-right-radius: var(--qrc-border-radius);
                  padding-bottom: 90px;
                  z-index: 9;
              }

              /* ========== HEADER & PROFILE ELEMENTS ========== */
              .header {
                  display: flex;
                  background: rgba(168, 168, 168, .55);
                  padding: 10px;
                  border-radius: var(--border-radius);
                  margin: 10px;
                  text-align: center;
              }

              .header h1 {
                  font-size: 1rem;
                  font-weight: 700;
                  background: linear-gradient(225deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
                  -webkit-background-clip: text;
                  background-clip: text;
                  color: transparent;
                  display: inline-block;
                  position: relative;
              }

              .header h1::after {
                  content: '';
                  position: absolute;
                  bottom: -10px;
                  left: 50%;
                  transform: translateX(-50%);
                  width: 50%;
                  height: 3px;
                  background: linear-gradient(90deg, var(--primary), var(--accent));
                  border-radius: 3px;
              }

              h1 {
                  font-size: 2rem;
                  color: #454545;
              }

              .profile-image {
                  display: block;
                  width: 100%;
                  height: auto;
                  border-radius: var(--border-radius);
                  margin: 2px 2px 2px 2px auto;
                  box-sizing: border-box;
              }

              .highlight-box {
                  display: flex;
                  align-items: center;
                  justify-content: space-between;
                  padding: 10px 15px;
                  gap: 2%;
                  background: radial-gradient(circle at 20% 30%,
                          #d2d2d2 0%,
                          #fff 10%,
                          transparent 45%,
                          #f5f5f5 70%,
                          #c0c0c0 90%,
                          #474747 100%);
                  box-shadow: 0 4px 0 rgba(169, 169, 169, .95);
                  overflow: hidden;
                  position: relative;
                  border: 2px solid silver;
                  padding-bottom: 2px;
              }

              .thandylogo {
                  max-height: 4rem;
                  width: auto;
                  flex: 0 0 auto;
                  object-fit: contain;
                  box-shadow: 0 4px 0 rgba(95, 95, 95, .85);
                  z-index: 1;
              }

              .tom_kongerslev {
                  flex: 1 1 auto;
                  min-width: 0;
                  margin: auto;
                  position: relative;
                  z-index: 1;
                  object-fit: contain;

              }

              .tom_kongerslev img {
                  max-height: relative;
                  width: auto;
                  max-width: 100%;
              }

              .contact-button {
                  padding: 4px 8px;
                  font-size: 0.8rem;
                  font-weight: 700;


              }

              /* ========== FLOATING ACTION BUTTONS ========== */
              .fab-container {
                  position: fixed;
                  top: 10px;
                  right: 10px;
                  z-index: 9999;
              }

              .fab {
                  color: #FFF;
                  font-weight: 700;
                  opacity: 65%;
                  background-color: #474747;
                  border: 2px solid #454747;
                  border-radius: 10px;
                  outline: 0;
                  cursor: pointer;
                  transition: opacity .3s ease;
              }

              .fab img {
                  width: 100px;
                  height: 150px;
              }

              .fab:hover {
                  opacity: 100%;
              }

              /* ========== CONTACT TOOLBAR ========== */
              .contact-toolbar {
                  display: none;
                  background: radial-gradient(circle at 20% 30%,
                          #d2d2d2 0%,
                          #fff 10%,
                          transparent 45%,
                          #f5f5f5 70%,
                          #c0c0c0 90%,
                          #474747 100%);
                  border: 2px outset rgba(169, 169, 169, 0.8);
                  border-radius: 8px;
                  padding: 12px 8px;
                  margin: 8px auto;
                  justify-content: space-around;
                  align-items: center;
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(222, 0, 0, 0.2);
                  animation: fadeIn 0.3s ease;
                  width: 100%;
                  max-width: 460px;
              }

              .contact-toolbar.active {
                  display: flex;
              }

              .contact-toolbar-item {
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  justify-content: center;
                  padding: 8px 12px;
                  border-radius: 6px;
                  transition: all 0.2s ease;
                  cursor: pointer;
                  text-decoration: none;
                  background: rgba(0, 0, 0, 0.1);
                  border: 1px solid rgba(169, 169, 169, 0.3);
                  color: #c0c0c0;
                  min-width: 70px;
              }

              .contact-toolbar-item:hover {
                  background: radial-gradient(circle at 10% 60%,
                          #c0c0c0 0%,
                          #de0000 40%,
                          #8a0615 60%,
                          #8a0615 90%);
                  transform: translateY(-2px);
                  box-shadow: 0 4px 8px rgba(222, 0, 0, 0.9);
                  border-color: rgba(222, 0, 0, 0.8);
                  color: #ffffff;
              }

              .contact-toolbar-icon {
                  font-size: 1.8rem;
                  margin-bottom: 6px;
                  background: linear-gradient(25deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
                  -webkit-background-clip: text;
                  background-clip: text;
                  -webkit-text-fill-color: transparent;
                  text-shadow: 0 0 5px rgba(0, 0, 0, 0.5), 1px 1px 0 rgba(255, 255, 255, 0.1);
                  transition: all 0.4s ease-out;
              }

              .contact-toolbar-item:hover .contact-toolbar-icon {
                  transform: scale(1.1);
                  text-shadow: 0 0 8px rgba(222, 0, 0, 0.6),
                      0 0 12px rgba(222, 0, 0, 0.4),
                      0 0 16px rgba(222, 0, 0, 0.2);
              }

              .contact-toolbar-label {
                  font-size: 0.75rem;
                  font-weight: 700;
                  text-align: center;
                  text-shadow: 1px 2px 4px rgba(0, 0, 0, 0.9);
                  color: #f5f5f5;
              }

              /* Animation for toolbar appearance */
              @keyframes fadeIn {
                  from {
                      opacity: 0;
                      transform: translateY(-10px);
                  }

                  to {
                      opacity: 1;
                      transform: translateY(0);
                  }
              }

              /* Responsive adjustments */
              @media (max-width: 480px) {
                  .contact-toolbar {
                      padding: 10px 6px;
                  }

                  .contact-toolbar-item {
                      padding: 6px 8px;
                      min-width: 60px;
                  }

                  .contact-toolbar-icon {
                      font-size: 1.5rem;
                      margin-bottom: 4px;
                  }

                  .contact-toolbar-label {
                      font-size: 0.7rem;
                  }
              }

              /* ========== SERVICE SCHEDULE CARD ========== */
              .card-schedule-service {
                  display: block;
                  border: 1px outset rgba(0, 0, 0, .75);
                  background: rgba(255, 255, 255, .95);
                  border-radius: 10px;
                  box-shadow: 4px 4px 8px rgba(95, 95, 95, .85);
                  text-align: center;
                  padding: auto;
                  margin: auto;
                  overflow: hidden;
                  box-sizing: border-box;
              }

              .new-service-request-grid-topper {
                  display: flex;
                  font-size: 1rem;
                  padding: 2px;
                  border: 2px inset rgba(169, 169, 169, .1);
                  color: silver;
                  justify-content: center;
                  text-justify: bottom;
                  text-align: center;
                  text-decoration: bold;
                  object-fit: contain;
              }

              .reschedule-service-button {
                  font-weight: 700;
                  background-color: transparent;
                  color: silver;
                  border: px outset silver;
                  border-radius: 0;
                  padding: 2px auto;
                  font-size: .75rem;
                  cursor: pointer;
                  object-fit: contain;
                  transition: background-color .3s ease;
              }

              .reschedule-service-button:hover {
                  color: silver;
                  background-color: #000;
              }

              /* ========== CATEGORIES GRID ========== */
              .menu-container {
                  display: grid;
                  place-items: center;
                  padding: 0;
                  margin: 0;
                  width: 100%;
              }

              #categories-grid {
                  display: grid;
                  grid-template-columns: repeat(3, 1fr);
                  gap: 1px;
                  max-width: 400px;
                  margin: 1px auto;
                  width: 100%;
              }

              .category-tile {
                  background: rgba(255, 255, 255, .35);
                  color: #000;
                  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.55), 0 -1px 1px rgba(255, 255, 255, 0.3);
                  border: 1px inset #fff;
                  padding: 4px;
                  width: 100%;
                  aspect-ratio: 1 / 1 !important;
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
                  align-items: center;
                  text-align: center;
                  box-sizing: border-box;
                  cursor: pointer;
                  transition: all 0.3s ease;
                  position: relative;
              }

              .category-tile h2 {
                  font-size: 1.1rem;
                  line-height: 1.2;
                  margin: 0;
                  padding: 0;
                  word-break: break-word;
              }

              .category-tile::after {
                  content: '';
                  position: absolute;
                  left: 0;
                  bottom: 15px;
                  width: 0;
                  height: 2px;
                  background: linear-gradient(25deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
                  transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
                  transform-origin: center;
                  margin: 0 auto;
                  right: 0;
              }

              .category-tile:hover::after {
                  width: 80%;
                  left: 10%;
              }

              .category-tile:hover h2 {
                  text-shadow: 0 0 8px rgba(222, 0, 0, 0.6),
                      0 0 12px rgba(222, 0, 0, 0.4),
                      0 0 16px rgba(222, 0, 0, 0.2);
                  color: #fff;
              }

              .category-icon {
                  font-size: 2.5rem;
                  margin-bottom: 4px;
                  background: linear-gradient(25deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
                  -webkit-background-clip: text;
                  background-clip: text;
                  -webkit-text-fill-color: transparent;
                  text-shadow: 0 0 5px rgba(0, 0, 0, 0.5), 1px 1px 0 rgba(255, 255, 255, 0.1);
                  transition: all 0.4s ease-out;
              }

              .category-tile:hover {
                  transform: translateY(-3px);
                  box-shadow: 0 4px 15px rgba(222, 0, 0, 0.2);
                  border-color: var(--accent);
              }

              .category-tile:hover .category-icon {
                  transform: scale(1.1);
              }

              /* ========== SEARCH & CART ELEMENTS ========== */
              .search-btn {
                  background: none;
                  border: none;
                  color: #c0c0c0;
                  font-size: 1.2rem;
                  cursor: pointer;
                  padding: 0.5rem;
                  border-radius: 50%;
                  transition: all 0.3s ease;
              }

              .search-input {
                  width: 50%;
                  padding: 0.75rem 1rem;
                  background: var(--bg-card);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  border-radius: 2px;
                  color: #c0c0c0;
                  font-size: 01rem;
                  transition: all 0.3s ease;
              }

              .cart-btn {
                  background: #fff;
                  border: none;
                  border-radius: 50%;
                  width: 2.5rem;
                  height: 2.5rem;
                  position: relative;
                  box-shadow: 0 4px 25px rgba(222, 0, 0, 0.45);
                  cursor: pointer;
              }

              .cart-count {
                  position: absolute;
                  top: -5px;
                  right: -5px;
                  background: white;
                  color: #000;
                  border-radius: 50%;
                  width: 20px;
                  height: 20px;
                  font-size: 1rem;
                  font-weight: 700;
              }

              #searchResults {
                  display: none;
                  position: absolute;
                  top: 70px;
                  left: 2rem;
                  right: 2rem;
                  background: #fff;
                  color: #454547;
                  border: 1px solid var(--accent);
                  border-radius: 4px;
                  z-index: 1100;
                  max-height: 300px;
                  overflow-y: auto;
              }

              #searchResults div {
                  padding: 0.5rem;
                  cursor: pointer;
                  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
              }

              #searchResults div:hover {
                  background: var(--bg-card-hover);
              }

              .no-results {
                  text-align: center;
                  padding: 2rem;
                  color: var(--text-secondary);
                  display: none;
              }

              /* ========== MODAL SYSTEM ========== */
              .modal-overlay {
                  position: fixed;
                  top: 0;
                  left: 0;
                  right: 0;
                  bottom: 0;
                  background: rgba(0, 0, 0, 0.8);
                  backdrop-filter: blur(8px);
                  display: none;
                  z-index: 10000;
                  animation: fadeIn 0.3s ease;
                  justify-content: center;
                  align-items: center;
                  padding: 1rem;
              }

              .modal-content {
                  background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
                  color: var(--text-primary);
                  border-radius: 16px;
                  border: 1px solid rgba(222, 0, 0, 0.3);
                  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
                  overflow: hidden;
                  max-height: 90vh;
                  display: flex;
                  flex-direction: column;
                  width: 100%;
                  max-width: 450px;
                  position: relative;
              }

              .modal-content::before {
                  content: '';
                  position: absolute;
                  top: 0;
                  left: 0;
                  right: 0;
                  height: 4px;
                  background: linear-gradient(90deg, var(--accent), #8a0615, var(--accent));
              }

              .modal-header {
                  padding: 1.5rem;
                  border-bottom: 1px solid rgba(222, 0, 0, 0.2);
                  position: relative;
                  background: rgba(0, 0, 0, 0.2);
              }

              .modal-title {
                  margin: 0;
                  font-size: 1.3rem;
                  font-weight: 700;
                  color: var(--text-primary);
                  text-align: center;
              }

              .close-btn {
                  position: absolute;
                  top: 1.2rem;
                  right: 1.2rem;
                  background: rgba(222, 0, 0, 0.2);
                  border: 1px solid rgba(222, 0, 0, 0.3);
                  border-radius: 8px;
                  color: var(--text-primary);
                  width: 32px;
                  height: 32px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  transition: all 0.3s ease;
                  font-size: 1.2rem;
                  font-weight: bold;
              }

              .close-btn:hover {
                  background: var(--accent);
                  transform: scale(1.1);
                  box-shadow: 0 4px 12px rgba(222, 0, 0, 0.3);
              }

              .service-list {
                  padding: 1.5rem;
                  flex: 1;
                  overflow-y: auto;
                  max-height: 300px;
              }

              .service-item {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 1rem;
                  margin-bottom: 0.8rem;
                  background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  border-radius: 10px;
                  transition: all 0.3s ease;
              }

              .service-item:hover {
                  background: linear-gradient(135deg, rgba(222, 0, 0, 0.1) 0%, rgba(138, 6, 21, 0.05) 100%);
                  border-color: rgba(222, 0, 0, 0.3);
                  transform: translateY(-2px);
              }

              .service-item .service-price {
                  color: var(--accent);
                  font-weight: 700;
                  font-size: 1rem;
              }

              .remove-btn {
                  background: rgba(222, 0, 0, 0.2);
                  border: 1px solid rgba(222, 0, 0, 0.3);
                  border-radius: 6px;
                  color: var(--text-primary);
                  width: 28px;
                  height: 28px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  transition: all 0.3s ease;
                  font-size: 0.9rem;
              }

              .remove-btn:hover {
                  background: var(--accent);
                  transform: scale(1.1);
              }

              .summary-section {
                  padding: 1.5rem;
                  border-top: 1px solid rgba(222, 0, 0, 0.2);
                  background: rgba(0, 0, 0, 0.3);
              }

              .subtotal {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  font-size: 1.1rem;
                  font-weight: 700;
                  color: var(--text-primary);
              }

              #modalTotal {
                  color: #c0c0c0;
                  font-size: 1.4rem;
                  font-weight: 900;
              }

              /* ========== SERVICE SELECTION & DETAILS ========== */
              #serviceOrdersSection,
              #serviceSelectionContainer,
              #serviceOrdersList {
                  display: flex;
                  flex-direction: column;
                  color: #454545;
                  border: 2px solid rgba(169, 169, 169, 0.7);
                  border-radius: 12px;
                  padding: 20px;
                  margin: 16px auto;
                  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
                  backdrop-filter: blur(10px);
                  transition: all 0.3s ease;
              }

              #serviceOrdersSection {
                  background: linear-gradient(135deg, #d2d2d2 0%, #2a2a2a 100%);
                  color: white;
                  border-top: 4px solid var(--accent);
              }

              #serviceSelectionContainer {
                  border-top: 4px solid var(--accent);
                  background: rgba(255, 255, 255, 0.95);
              }

              #serviceOrdersList {
                  background: linear-gradient(135deg, #c0c0c0 0%, #e0e0e0 100%);
                  color: #2a2a2a;
                  border: 2px solid rgba(255, 255, 255, 0.8);
                  border-top: 4px solid var(--accent);
                  border-bottom: 4px solid var(--accent);
                  min-height: 120px;
                  justify-content: left;
                  align-items: center;
                  text-align: left;
                  gap: 12px;
              }

              .service-item-grid {
                  display: grid;
                  grid-template-columns: repeat(2, 1fr);
                  width: 100%;
                  aspect: 1 / 1;
                  gap: 1px;
                  box-sizing: border-box;
              }

              .service-item-card {
                  background: rgba(0, 0, 0, 0.85);
                  color: white;
                  padding: .5rem;
                  border-radius: 10px;
                  transition: all 0.2s ease;
                  cursor: pointer;
                  box-sizing: border-box;
                  width: 100%;
                  aspect: 1 / 1;
                  display: block;
                  flex-direction: column;
                  justify-content: column;
                  align-items: center;
                  text-align: center;
              }

              .service-item-card:hover {
                  background: var(--bg-card-hover);
                  transform: translateY(-2px);
                  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
              }

              .service-item-card h4 {
                  font-size: 0.7rem;
                  margin: 0.2rem 0;
                  line-height: 1;
                  word-break: break-word;
              }

              .service-item-card p {
                  font-size: .75rem;
                  color: silver;
                  margin: 2px;
                  padding: 2px;
                  line-height: 1;
                  word-break: break-word;
                  flex-shrink: 0;

              }

              .service-price {
                  position: auto;
                  font-weight: 800;
                  font-size: 1rem;
                  margin: 0.2rem 0;
                  color: #000;
                  background: rgba(169, 169, 169, .85);
                  padding: 0.5rem 0.5rem;
                  border-radius: 8px;
                  border: 2px solid rgba(0, 0, 0, 0.5);
                  flex-shrink: 0;
              }

              .service-item-icon {
                  font-weight: 800;
                  align-items: center;
                  /* Changed from 'column' */
                  font-size: 2.5rem;
                  margin-bottom: .5rem;
                  filter: grayscale(100%) brightness(1.2) contrast(1.1);
                  color: #f0f0f0;
                  /* Slightly off-white for metallic feel */
                  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
              }

              /* ========== DETAILS GRID ========== */
              .details-grid {
                  display: grid;
                  grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
                  gap: 0.5rem;
                  padding: 1rem;
                  background: rgba(166, 166, 166, 0.5);
                  border-radius: var(--border-radius);
                  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
              }

              .detail-card {
                  background: #f0f0f0;
                  border: 1px solid #ccc;
                  border-radius: 6px;
                  padding: 0.75rem 0.5rem;
                  text-align: center;
                  cursor: pointer;
                  transition: all 0.2s ease;
                  font-size: 0.8rem;
                  font-weight: 600;
                  color: #333;
              }

              .detail-card:hover {
                  background: #e0e0e0;
                  transform: translateY(-2px);
                  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                  border-color: var(--accent);
              }

              .detail-card.selected {
                  background: var(--accent);
                  color: white;
                  border-color: var(--accent);
                  box-shadow: 0 4px 10px rgba(250, 0, 0, 0.4);
                  transform: scale(1.03);
              }

              /* ========== SELECTED SERVICE ITEMS ========== */
              .requested-service-item {
                  display: flex;
                  align-items: center;
                  gap: 1rem;
                  padding: 1.2rem;
                  margin: 0;
                  border: 2px solid rgba(169, 169, 169, 0.4);
                  border-radius: 10px;
                  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(245, 245, 245, 0.8) 100%);
                  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                  box-sizing: border-box;
                  font-weight: 700;
                  position: relative;
                  overflow: hidden;
              }

              .requested-service-item::before {
                  content: '';
                  position: absolute;
                  top: 0;
                  left: -100%;
                  width: 100%;
                  height: 100%;
                  background: linear-gradient(90deg, transparent, rgba(222, 0, 0, 0.1), transparent);
                  transition: left 0.6s ease;
              }

              .requested-service-item:hover::before {
                  left: 100%;
              }

              .requested-service-item:hover {
                  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
                  border-color: var(--accent);
                  transform: translateY(-2px);
                  box-shadow: 0 8px 20px rgba(222, 0, 0, 0.15);
              }

              .requested-service-icon {
                  font-size: 1.25rem;
                  width: 50px;
                  height: 50px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  background: linear-gradient(135deg, var(--primary) 0%, #2a2a2a 100%);
                  border-radius: 10px;
                  flex-shrink: 0;
              }

              .requested-service-text {
                  flex: 1;
                  min-width: 0;
              }

              .requested-service-text h4 {
                  margin: 0 0 0.4rem 0;
                  font-size: 1rem;
                  font-weight: 800;
                  color: #2a2a2a;
                  line-height: 1;
              }

              .service-notes {
                  font-size: .75rem;
                  color: #666;
                  background: rgba(0, 0, 0, 0.05);
                  padding: .25rem;
                  border-radius: 6px;
                  margin-top: 0.5rem;
                  border-left: 3px solid var(--accent);
                  max-height: 4rem;
                  overflow-y: auto;
                  line-height: 1;
              }

              .requested-service-price {
                  font-size: .75rem;
                  font-weight: 900;
                  color: #c0c0c0);
                  background: rgba(169, 169, 169, 0.1);
                  padding: 0.5rem 0.8rem;
                  border-radius: 8px;
                  border: 2px solid rgba(0, 0, 0, 0.2);
                  flex-shrink: 0;
              }

              .remove-service-btn {
                  background: rgba(222, 0, 0, 0.1);
                  border: 2px solid rgba(222, 0, 0, 0.3);
                  border-radius: 8px;
                  width: 40px;
                  height: 40px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  transition: all 0.3s ease;
                  font-size: .75rem;
                  flex-shrink: 0;
              }

              .remove-service-btn:hover {
                  background: var(--accent);
                  color: white;
                  transform: scale(1.1);
                  box-shadow: 0 4px 12px rgba(222, 0, 0, 0.3);
              }

              .estimate-total {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
                  color: white;
                  padding: 1.2rem 1.5rem;
                  border-radius: 12px;
                  margin: 1.5rem 0;
                  font-size: 1.1rem;
                  font-weight: 700;
                  border: 2px solid rgba(222, 0, 0, 0.3);
                  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
              }

              #totalAmount {
                  color: #c0c0c0;
                  font-size: 1.4rem;
                  font-weight: 900;
              }

              /* ========== SERVICE INPUT AREAS ========== */
              #serviceNoteInput,
              .service-input-area {
                  width: calc(100% - 8px);
                  padding: 8px;
                  margin-top: 15px;
                  margin-bottom: 20px;
                  border: 1px solid #ccc;
                  border-radius: 8px;
                  font-family: 'Roboto', sans-serif;
                  font-size: 16px;
                  line-height: 1.5;
                  min-height: 80px;
                  resize: vertical;
                  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
              }

              #serviceNoteInput:focus,
              .service-input-area:focus {
                  border-color: #de0000;
                  outline: none;
                  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
              }

              #serviceNoteInput::placeholder,
              .service-input-area::placeholder {
                  color: #999;
                  font-style: italic;
              }

              /* ========== FURNITURE SELECTION - MODERNIZED ========== */

              /* ========== TASK & FURNITURE DETAILS ========== */
              .task-details {
                  margin-top: 1rem;
                  padding: 0.75rem;
                  background: rgba(255, 255, 255, 0.03);
                  border-radius: 8px;
                  border-left: 3px solid var(--accent);
              }

              .task-details h3 {
                  margin-bottom: 1rem;
                  color: var(--text-primary);
                  font-size: 1.1rem;
              }

              .task-details select,
              .task-details textarea {
                  width: 100%;
                  padding: 0.75rem;
                  margin-bottom: 1rem;
                  background: rgba(255, 255, 255, 0.05);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  color: var(--text-primary);
                  border-radius: 6px;
                  font-size: 16px;
              }

              .task-details textarea {
                  min-height: 80px;
                  resize: vertical;
                  min-width: 100%;
              }

              .furniture-items {
                  font-size: 0.8rem;
                  color: var(--text-secondary);
                  margin-top: 0.5rem;
              }

              #furnitureSelect,
              #furnituredetailsSection {
                  display: none;
                  margin-bottom: 1.5rem;
              }


              /* ========== FURNITURE SELECTION LAYOUT ========== */
              .furniture-selection-section {
                  margin: 1.5rem 0;
                  padding: 0;
              }

              .furniture-type-selection {
                  margin-bottom: 1.5rem;
              }

              .furniture-type-selection h4 {
                  margin-bottom: 1rem;
                  color: #474747;
                  font-size: 1.1rem;
              }

              .radio-group {
                  display: flex;
                  gap: 2rem;
                  flex-wrap: wrap;
              }

              .radio-group label {
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                  cursor: pointer;
                  font-weight: 600;
                  color: #454545;
              }

              .furniture-item-selection {
                  display: flex;
                  gap: 1rem;
                  align-items: center;
                  margin-bottom: 1.5rem;
                  flex-wrap: wrap;
              }

              .furniture-item-selection select {
                  flex: 1;
                  min-width: 200px;
              }

              .selected-furniture-section {
                  margin-top: 1.5rem;
              }

              .selected-furniture-section h5 {
                  margin-bottom: 1rem;
                  color: #454547;
                  font-size: 1rem;
              }

              .selected-furniture-list {
                  list-style: none;
                  margin: 1rem 0;
                  padding: 0;
                  max-height: 200px;
                  overflow-y: auto;
              }

              .selected-furniture-list li {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 0.8rem 1rem;
                  margin-bottom: 0.5rem;
                  background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  border-radius: 8px;
                  color: #474747;
                  transition: all 0.3s ease;
              }

              .selected-furniture-list li:hover {
                  background: linear-gradient(135deg, rgba(222, 0, 0, 0.1) 0%, rgba(138, 6, 21, 0.05) 100%);
                  border-color: rgba(222, 0, 0, 0.3);
                  transform: translateX(5px);
              }

              /* ========== ACTION BUTTONS ========== */

              #action-buttons,
              .action-buttons {
                  display: grid;
                  grid-template-columns: 1fr;
                  aspect-ratio: 3 / 1;
                  gap: 1rem;
                  padding: 8px;
                  margin: 1rem;

              }

              .clear-all-btn {
                  background: linear-gradient(135deg, #666 0%, #8a8a8a 100%);
                  color: white;
                  border: none;
                  padding: .5rem .5rem;
                  border-radius: 10px;
                  font-weight: 400;
                  cursor: pointer;
                  transition: all 0.3s ease;
                  font-size: 0.7rem;
                  text-transform: uppercase;
                  letter-spacing: 0.1px;
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
              }

              .clear-all-btn:hover {
                  background: linear-gradient(135deg, #8a8a8a 0%, #666 100%);
                  transform: translateY(-2px);
                  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
              }

              .book-more-button {
                  background: linear-gradient(135deg, #ffffff 0%, #e8e8e8 100%);
                  font-weight: 700;
                  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
                  color: #2a2a2a;
                  border: 2px solid rgba(222, 0, 0, 0.3);
                  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1),
                      inset 0 1px 2px rgba(255, 255, 255, 0.8);
                  padding: auto;
                  font-size: 12px;
                  cursor: pointer;
                  border-radius: 10px;
                  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                  text-transform: uppercase;
                  letter-spacing: 0.15px;
                  position: relative;
                  overflow: hidden;
              }

              .book-more-button::before {
                  content: '';
                  position: absolute;
                  top: 0;
                  left: -100%;
                  width: 100%;
                  height: 100%;
                  background: linear-gradient(90deg, transparent, rgba(222, 0, 0, 0.1), transparent);
                  transition: left 0.6s ease;
              }

              .book-more-button:hover::before {
                  left: 100%;
              }

              .book-more-button:hover {
                  background: linear-gradient(135deg, #f8f8f8 0%, #ffffff 100%);
                  transform: translateY(-2px);
                  box-shadow: 0 8px 25px rgba(222, 0, 0, 0.15);
                  border-color: #474747;
                  color: var(--accent);
              }

              .checkout-button {
                  background: radial-gradient(circle, transparent 5%, #de0000 40%, #8a0615 60%, #8a0615 90%);
                  font-weight: 700;
                  color: #fff;
                  border: 2px solid rgba(255, 255, 255, 0.3);
                  padding: 1rem 2rem;
                  font-size: 16px;
                  margin: 1rem;
                  border-radius: 10px;
                  cursor: pointer;
                  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                  text-transform: uppercase;
                  letter-spacing: 1px;
                  position: relative;
                  overflow: hidden;
                  justify-content: middle;
              }

              .client-login {
                  background: radial-gradient(circle, #454545 5%, #de0000 40%, #8a0615 60%, #8a0615 90%);
                  font-weight: 700;
                  color: #fff;
                  border: 2px solid rgba(255, 255, 255, 0.3);
                  padding: 1rem 2rem;
                  font-size: 16px;
                  margin-top: 1rem;
                  border-radius: 10px;
                  cursor: pointer;
                  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                  text-transform: uppercase;
                  letter-spacing: 1px;
                  position: relative;
                  overflow: hidden;
                  justify: center;

              }

              .client-login::before {
                  content: '';
                  position: absolute;
                  top: 0;
                  left: -100%;
                  width: 100%;
                  height: 100%;
                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                  transition: left 0.6s ease;
              }

              .client-login:hover::before {
                  left: 100%;
              }

              .client-login:hover {
                  background: linear-gradient(135deg, #8a0615 0%, #de0000 40%, #c0c0c0 60%, silver 100%);
                  transform: translateY(-3px);
                  box-shadow: 0 8px 25px rgba(222, 0, 0, 0.4);
                  border-color: rgba(255, 255, 255, 0.5);
              }

              .book-more-button:hover,
              .checkout-button:hover,
              .client-login:hover {
                  background: #000000;
                  transition: all .3s ease;
                  color: #c0c0c0;
              }

              .back-button {
                  background: var(--bg-card);
                  color: var(--text-primary);
                  border: 1px solid var(--accent);
                  padding: 0.75rem 1.25rem;
                  border-radius: 8px;
                  font-weight: 300;
                  font-size: small;
                  cursor: pointer;
                  transition: all 0.2s ease;
                  display: block;
                  margin-top: 1rem;
              }

              .back-button:hover {
                  background: rgba(222, 0, 0, 0.1);
                  transform: translateY(-2px);
              }

              .back-button::before {
                  content: "‚Üê";
                  margin-right: 0.5rem;
              }

              /* ========== INVOICES CARD ========== */
              .card-invoices {
                  display: block;
                  border: 1px outset rgba(0, 0, 0, .75);
                  background: rgba(255, 255, 255, .95);
                  border-radius: 10px;
                  box-shadow: 4px 4px 8px rgba(95, 95, 95, .85);
                  text-align: center;
                  padding: 2px;
                  margin-top: 4rem;
                  box-sizing: border-box;
              }

              .card-invoices h1 {
                  color: #000;
                  font-size: 5vw;
              }

              .card-invoices p {
                  color: #666;
              }

              /* ========== FOOTER ========== */
              footer {
                  display: flex;
                  font-weight: 700;
                  color: #FFF;
                  text-align: middle;
                  justify-content: center;
                  margin-top: 4rem;
              }

              footer a {
                  font-size: 10px;
                  margin: 2% 2%;
                  color: #fff;
                  font-weight: 700;
              }

              /* ========== TOUCH-FRIENDLY ELEMENTS ========== */
              .category-tile,
              .service-item-card,
              .detail-card {
                  touch-action: manipulation;
              }

              button,
              input,
              select {
                  min-height: 44px;
              }

              /* ========== ANIMATIONS & EFFECTS ========== */
              @keyframes fadeIn {
                  from {
                      opacity: 0;
                      transform: translateY(10px);
                  }

                  to {
                      opacity: 1;
                      transform: translateY(0);
                  }
              }

              @keyframes tapAnimation {
                  0% {
                      transform: scale(1);
                  }

                  50% {
                      transform: scale(0.95);
                  }

                  100% {
                      transform: scale(1);
                  }
              }

              @keyframes pulse {
                  0% {
                      transform: scale(1);
                  }

                  50% {
                      transform: scale(1.05);
                  }

                  100% {
                      transform: scale(1);
                  }
              }

              @keyframes shake {

                  0%,
                  100% {
                      transform: translateX(0);
                  }

                  20%,
                  60% {
                      transform: translateX(-5px);
                  }

                  40%,
                  80% {
                      transform: translateX(5px);
                  }
              }

              @keyframes backgroundPulse {
                  0% {
                      opacity: 0;
                      transform: scaleX(0);
                  }

                  50% {
                      opacity: 0.4;
                      transform: scaleX(1);
                  }

                  100% {
                      opacity: 0;
                  }
              }

              @keyframes textGlow {
                  0% {
                      text-shadow: 0 0 5px rgba(222, 0, 0, 0);
                  }

                  100% {
                      text-shadow: 0 0 8px rgba(222, 0, 0, 0.6), 0 0 12px rgba(222, 0, 0, 0.4), 0 0 16px rgba(222, 0, 0, 0.2);
                  }
              }

              @keyframes underlineExpand {
                  0% {
                      width: 0;
                      left: 50%;
                  }

                  100% {
                      width: 80%;
                      left: 10%;
                  }
              }

              .tap-animate {
                  animation: tapAnimation 0.3s ease;
              }

              .category-tile::after:hover {
                  animation: underlineExpand 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
              }

              /* ========== RESPONSIVE ADJUSTMENTS ========== */
              @media (max-width: 400px) {
                  .page-container {
                      overflow-x: auto;
                  }

                  #categories-grid {
                      grid-template-columns: repeat(3, 1fr);
                  }
              }

              @media (max-width: 480px) {
                  .highlight-box {
                      gap: 1%;
                      padding: 8px 10px;
                  }

                  .thandylogo {
                      max-height: 25px;
                  }

                  .tom_kongerslev img {
                      max-height: 35px;
                  }

                  .contact-button {
                      padding: 4px 8px;
                      font-size: 0.8rem;
                      font-weight: 700;
                  }

                  #categories-grid {
                      grid-template-columns: repeat(3, 1fr);
                  }

                  #serviceOrdersSection,
                  #serviceSelectionContainer,
                  #serviceOrdersList {
                      padding: 16px;
                      margin: 12px auto;
                  }

                  .requested-service-item {
                      flex-wrap: wrap;
                      gap: 0.8rem;
                      padding: 1rem;
                  }

                  .action-buttons {
                      grid-template-columns: 1fr 1fr;
                      aspect-ratio: 2/1;
                      gap: 2px;
                  }

                  .requested-service-text h4 {
                      font-size: 0.9rem;
                  }

                  .requested-service-price {
                      font-size: 1.1rem;
                      padding: 0.4rem 0.7rem;
                      font-weight: 900;
                      color: #c0c0c0;
                      background: rgba(169, 169, 169, 0.1);
                      padding: 0.5rem 0.8rem;
                      border-radius: 8px;
                      border: 2px solid rgba(0, 0, 0, 0.2);
                      flex-shrink: 0;
                  }
              }

              .contactModal-actions {
                  grid-template-columns: 1fr;
                  gap: 1rem;
              }

              .actionButton {
                  padding: 1.2rem 1rem;
              }

              .actionButton .iconImage {
                  width: 50px;
                  height: 50px;
              }

              .radio-group {
                  flex-direction: column;
                  gap: 1rem;
              }

              .furniture-item-selection {
                  flex-direction: column;
                  align-items: stretch;
              }

              .furniture-item-selection select {
                  min-width: auto;
              }

              .modal-content {
                  margin: 5%;
                  width: 90%;
              }
              }

              @media (max-width: 600px) {
                  #categories-grid {
                      grid-template-columns: repeat(3, 1fr);
                  }
              }

              @media (max-width: 768px) {

                  #serviceOrdersSection,
                  #serviceSelectionContainer,
                  #serviceOrdersList {
                      padding: 16px;
                      margin: 12px auto;
                  }
              }
          </style>

          <script src="https://tommichael88.github.io/booktomnyc/js/marquee.js" defer></script>
      </head>`


      <body style="font-family:Roboto">
          <div class="pg_background" style="background-image:url(https://github.com/tommichael88/booktomnyc/blob/main/images/BCO.30cffe35-ab38-43f9-a861-19e8acbf4843E.png?raw=true)"></div>
          <div class="fab-container"></div>
          <div class="qrc_page_inner">
              <div class="section qrc_gallery">
                  <div class="qrc_gallery_wrapper">
                      <div class="qrc_gallery_list">
                          <div class="profile-image-container">
                              <img class="profile-image" src="https://tommichael88.github.io/booktomnyc/images/TomKongerslev_nobg.png?raw=true" alt="Profile Image">
                          </div>

                          <span class="highlight-box">
                              <img class="thandylogo" src="https://raw.githubusercontent.com/tommichael88/booktomnyc/refs/heads/main/images/TomsHandyTech_logo_today_lowres_nobg.png" alt="HandyTech logo">
                              <div class="tom_kongerslev">
                                  <img src="https://tommichael88.github.io/booktomnyc/images/tmk_ai_signature_2b2.png?raw=true" alt="Tom Kongerslev signature">
                              </div>
                              <button id="contactBtn" class="contact-button" style="font-size:.85rem">contact ‚â£Ô∏è</button>
                          </span>

                          <!-- Contact Toolbar -->
                          <div id="contactToolbar" class="contact-toolbar">
                              <a href="mailto:booktom@icloud.com" class="contact-toolbar-item">
                                  <div class="contact-toolbar-icon">@</div>
                                  <div class="contact-toolbar-label"></div>
                              </a>
                              <a href="tel:+19294501977" class="contact-toolbar-item">
                                  <div class="contact-toolbar-icon">üìû</div>
                                  <div class="contact-toolbar-label"></div>
                              </a>
                              <a href="#" id="contactCardButton" class="contact-toolbar-item">
                                  <div class="contact-toolbar-icon">üïÆ</div>
                                  <div class="contact-toolbar-label"></div>
                              </a>
                              <a href="sms:+19294501977" class="contact-toolbar-item">
                                  <div class="contact-toolbar-icon">üí¨</div>
                                  <div class="contact-toolbar-label"></div>
                              </a>
                          </div>

                          <div class="card-schedule-service">
                              <h1 style="color:#454545;text-align:center;font-size:2rem;line-height:.85; margin-bottom:2.5rem;margin-top:3rem;">
                                  <img src="https://github.com/tommichael88/booktomnyc/blob/main/images/calendar.png?raw=true" style="max-width:45px;height:auto;padding:2px" alt="Service Calendar Icon"><br>
                                  <font><i>SERVICE</i></font><br>
                                  <b>SCHEDULE</b>
                              </h1>
                              <a href="https://tommichael88.github.io/booktomnyc/cat.html" style="text-decoration: none; color: inherit;">
                                  <div class="new-service-request-grid-topper" style="display:flex;justify-content:space-between;align-items:center;font-size:1rem;background: linear-gradient(25deg, #000 1%, #8a0615 20%, #de0000 40%, #8a0615 60%, #000 95%);color: #fff;">
                                      <span><u>·¥∫·µâ ∑</u> <b>Service Request ‚ñº</b></span>
                              </a>
                              <button class="reschedule-service-button"><img src="https://github.com/tommichael88/booktomnyc/blob/main/images/Copilot_20251010_033614.png?raw=true" style=max-height:1.25rem;max-width:auto;">Edit</button>
                          </div>

                          <!-- Categories Grid -->
                          <div class="menu-container" id="categories-grid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:0;margin-bottom:0">
                              <div class="category-tile" data-category="Minor Home Repairs">
                                  <div class="category-icon">üè†</div>
                                  <h2>Minor Home Repairs</h2>
                              </div>
                              <div class="category-tile" data-category="Furniture Fixes & Assembly">
                                  <div class="category-icon">üõãÔ∏è</div>
                                  <h2>Furniture Fixes</h2>

                              </div>
                              <div class="category-tile" data-category="Wall Mounting">
                                  <div class="category-icon">üñºÔ∏è</div>
                                  <h2>Wall Mounting</h2>

                              </div>
                              <div class="category-tile" data-category="Electrical Help">
                                  <div class="category-icon">üí°</div>
                                  <h2>Electrical Help</h2>
                              </div>
                              <div class="category-tile" data-category="Plumbing Help">
                                  <div class="category-icon">üöø</div>
                                  <h2>Plumbing Help</h2>

                              </div>
                              <div class="category-tile" data-category="Computer Repairs">
                                  <div class="category-icon">üíª</div>
                                  <h2>Computer Repairs</h2>
                              </div>
                          </div>
                          <!-- Floating Cart FAB (hidden if no items) -->
                          <div id="cartFab" class="fab-container" style="display: none;">
                              <button class="fab" onclick="toggleCartModal()">
                                  üìÉ <span id="fabCartCount">0</span>
                              </button>
                          </div>
                          <!-- Search Modal -->
                          <div id="searchModal" class="modal-overlay">
                              <div class="modal-content">
                                  <div class="modal-header">
                                      <h2 class="modal-title">Search Services</h2>
                                      <button class="close-btn" onclick="closeSearchModal()">√ó</button>
                                  </div>
                                  <input type="text" class="search-input" id="modalSearchInput" placeholder="" />
                                  <div id="modalSearchResults" class="service-list"></div>
                              </div>
                          </div>

                          <!-- Cart Modal -->
                          <div id="modalOverlay" class="modal-overlay">
                              <div class="modal-content">
                                  <div class="modal-header">
                                      <h2 class="modal-title">Your Service Order</h2>
                                      <button class="close-btn" onclick="toggleCartModal()">&nbsp;¬ª&nbsp;Ô∏è</button>
                                  </div>
                                  <div id="modalServiceList" class="service-list"></div>
                                  <div class="summary-section">
                                      <div class="subtotal">
                                          <span>Subtotal (<span id="serviceCount">0</span> items):</span>
                                          <span id="modalTotal">$0</span>
                                      </div>
                                  </div>
                                  <span class="action-buttons">
                                      <button class="book-more-button" onclick="showCategories()">‚ûï More Services</button><button class="checkout-button" onclick="bookServices()">‚òÖ BOOK ‚òÖ</button>
                                  </span>
                              </div>
                          </div>
                          <!-- Service Selection Container (for chosen category) -->
                          <div id="serviceSelectionContainer" style="display: none;">
                              <div id="selectedSection"></div>
                              <!-- Furniture Details (if applicable) -->
                              <div class="task-details" id="furnituredetailsSection" style="display: none;">
                                  <h4>Select Your Furniture Item</h4>
                                  <div>

                                      <label>
                                          <input type="radio" name="furnitureType" value="generic"> Furniture [Not IKEA]
                                      </label>
                                      <label>
                                          <input type="radio" name="furnitureType" value="ikea" checked> IKEA Collection
                                      </label>
                                  </div>
                                  <select id="furniture-select">
                                      <option value="">Select Here</option>
                                  </select>
                                  <button class="book-more-button" onclick="addFurnitureItem()">Add Furniture Item</button>
                                  <ul id="selectedFurnitureList"></ul>
                                  <button class="clear-all-btn" onclick="clearAllFurnitureItems()">Clear All Furniture</button>
                              </div>
                          </div>
                          <!-- Service Details Container (shows service details and note input) -->
                          <div id="servicedetailsContainer" style="display: none;"></div>

                          <!-- Service Order Summary -->
                          <div id="serviceOrdersSection" style="display: none;">
                              <h4>Services Requested</h4>
                              <div id="serviceOrdersList"></div>
                              <div id="estimateTotal" class="estimate-total" style="display: none;">
                                  <span>Estimated Subtotal:</span>
                                  <span id="totalAmount">$0</span>
                              </div>
                              <span class="action-buttons">
                                  <button class="clear-all-btn" onclick="clearAllServices()">Clear All</button>
                                  <button class="book-more-button" onclick="showCategories()">‚ûï More Services</button>
                                  <button class="checkout-button" onclick="bookServices()">‚òÖ BOOK ‚òÖ</button>
                              </span>

                          </div>
                      </div>
                      <div class="card-invoices" style="color:#fff">
                          <br>
                          <br>
                          <h1 style="color:rgba(155,0,0,.99)">
                              <img src="https://tommichael88.github.io/booktomnyc/images/zohoinvoice?raw=true" alt="Zoho Invoice favicon" style="width:3.5rem;height:auto;text-align:center;padding:10px;margin:4px;margin-top:4px"><br>

                              <span style="font-size:2.5rem;">
                                  <b>INVOICES</b>
                              </span>
                          </h1>
                          <p style="font-size:1rem;padding:4px">view invoices ‚Ä¢ process payments ‚Ä¢ digital receipts ‚Ä¢ review quote estimates ‚Ä¢ share documents ‚Ä¢ transaction history ‚Ä¢ expense receipts</p>
                          <button class="client-login">üîê ùóñùóüùóúùóòùó°ùóß PORTAL</button>
                          <br>
                          <br>
                          <br>
                      </div>
                  </div>
              </div>
          </div>
          <center>
              <h4><img src="https://raw.githubusercontent.com/tommichael88/booktomnyc/refs/heads/main/images/tomshandytech_highresol_today.png" alt="HandyTech logo" style="max-width: 150px"></h4>
          </center>

          <footer>
              <a href="https://tommichael88.github.io/booktomnyc/Privacy%20Policy">Privacy Policy</a> |
              <a href="https://tommichael88.github.io/booktomnyc/ServiceAgreement#annex-a">Service Scope</a> |
              <a href="https://tommichael88.github.io/booktomnyc/ServiceAgreement">Service Agreement</a>
          </footer>

          <script>
              /* Contact Toolbar Functionality */
              document.getElementById('contactBtn').addEventListener('click', function() {
                  const toolbar = document.getElementById('contactToolbar');
                  toolbar.classList.toggle('active');
              });

              // Close toolbar when clicking outside
              document.addEventListener('click', function(event) {
                  const toolbar = document.getElementById('contactToolbar');
                  const contactBtn = document.getElementById('contactBtn');

                  if (!toolbar.contains(event.target) && event.target !== contactBtn && !contactBtn.contains(event.target)) {
                      toolbar.classList.remove('active');
                  }
              });

              // Handle contact card button
              document.getElementById('contactCardButton').addEventListener('click', function(e) {
                  e.preventDefault();
                  alert('Contact card saved to your device!');
              });

              /* ========== GLOBAL STATE AND CONFIGURATION ========== */
              const state = {
                  serviceOrders: [],
                  furnitureItems: [],
                  currentView: 'categories'
              };

              const furnitureHourlyRate = 40;

              /* ========== FURNITURE DATA ========== */
              const ikeaFurniture = [{
                      category: "BEKANT",
                      items: ["Desk + Underframe"]
                  },
                  {
                      category: "BESTA",
                      items: ["Single frame, shelves/floor standing", "Single frame, door/drawer, floor standing", "Single frame/wall mounting"]
                  },
                  {
                      category: "BILLY",
                      items: ["Bookcase 1x frame"]
                  },
                  {
                      category: "BJURSTA",
                      items: ["Extendable table"]
                  },
                  {
                      category: "BRIMNES",
                      items: ["Bed frame", "2 drawer chest", "3 drawer chest", "4 drawer chest", "Bed frame & storage", "Headboard", "Wardrobe 2x doors", "Wardrobe 3x doors", "Nightstand", "Daybed 2x drawers"]
                  },
                  {
                      category: "BRUSALI",
                      items: ["Bed frame", "Bed + 4 storage boxes", "3 drawer chest", "Nightstand"]
                  },
                  {
                      category: "FINGAL",
                      items: ["Swivel chair"]
                  },
                  {
                      category: "FRIHETEN",
                      items: ["Sofa bed & chaise"]
                  },
                  {
                      category: "GALANT",
                      items: ["2x drawer", "3x drawer", "4x drawer", "Cabinet (sliding doors)"]
                  },
                  {
                      category: "HEMNES",
                      items: ["Bed frame", "2 drawer chest", "3 drawer chest", "6 drawer chest", "Dresser 8x drawer", "Nightstand", "Daybed & 3 drawers"]
                  },
                  {
                      category: "KALLAX",
                      items: ["Shelving unit 5x5", "Shelving unit 4x4", "Shelving unit 2x4", "Shelving unit 1x4", "Shelving unit 2x2", "Insert + 2 drawers", "Insert + door"]
                  },
                  {
                      category: "LACK",
                      items: ["Side table", "Coffee table", "TV Unit"]
                  },
                  {
                      category: "LINNMON ADILS",
                      items: ["Table (table top and four legs)"]
                  },
                  {
                      category: "MALM",
                      items: ["Bed Frame", "Bed Frame + 4 Storage boxes", "2 Drawer Chest", "3 Drawer Chest", "4 Drawer Chest", "6 Drawer Chest", "6 Drawer Dresser", "Lift bed"]
                  },
                  {
                      category: "MICKE",
                      items: ["Desk + 1 Drawer", "Desk + Drawers & Storage", "Add-on unit"]
                  },
                  {
                      category: "MORVIK",
                      items: ["Wardrobe"]
                  },
                  {
                      category: "PAX",
                      items: ["One frame, hinged doors, up to 3 addons", "Two frames, sliding doors, up to 5 addons"]
                  },
                  {
                      category: "SODERHAMN",
                      items: ["Sofa one seat section + cover"]
                  },
                  {
                      category: "TRYSIL",
                      items: ["Bed Frame", "3 Drawer Chest", "Nightstand", "Wardrobe"]
                  },
                  {
                      category: "OTHER NOT LISTED",
                      items: ["NOT LISTED or UNKNOWN"]
                  }
              ];

              const genericFurniture = [
                  "Desk", "Chair", "Bookcase", "Dresser", "Bed Frame",
                  "Sofa", "Table", "Cabinet", "Shelving Unit", "Wardrobe"
              ];

              /* ========== FURNITURE SELECTION FUNCTIONS ========== */
              function initFurnitureSelection(context = document) {
                  console.log('Initializing furniture selection in context:', context);

                  const furnitureSelect = context.querySelector('#furniture-select');
                  console.log('Found furniture select:', furnitureSelect);

                  if (!furnitureSelect) {
                      console.error('Furniture select element not found');
                      return;
                  }

                  const furnitureTypeRadios = context.querySelectorAll('input[name="furnitureType"]');
                  console.log('Found furniture type radios:', furnitureTypeRadios.length);

                  let isIKEA = true;
                  furnitureTypeRadios.forEach(radio => {
                      if (radio.checked) {
                          isIKEA = radio.value === 'ikea';
                      }
                  });

                  console.log('Furniture type:', isIKEA ? 'IKEA' : 'Non-IKEA');

                  // Clear and populate the dropdown
                  furnitureSelect.innerHTML = '<option value="">Select Furniture Item</option>';

                  if (isIKEA) {
                      console.log('Populating IKEA furniture:', ikeaFurniture.length + ' categories');
                      ikeaFurniture.forEach(group => {
                          const optgroup = document.createElement('optgroup');
                          optgroup.label = group.category;
                          group.items.forEach(item => {
                              const option = document.createElement('option');
                              option.value = `${group.category} - ${item}`;
                              option.textContent = item;
                              optgroup.appendChild(option);
                          });
                          furnitureSelect.appendChild(optgroup);
                      });
                  } else {
                      console.log('Populating generic furniture:', genericFurniture.length + ' items');
                      genericFurniture.forEach(item => {
                          const option = document.createElement('option');
                          option.value = item;
                          option.textContent = item;
                          furnitureSelect.appendChild(option);
                      });
                  }

                  console.log('Furniture selection initialized successfully');
              }

              function addFurnitureItem() {
                  console.log('Adding furniture item...');

                  // Find the furniture select in the current context
                  const serviceDetailsContainer = document.getElementById('servicedetailsContainer');
                  const furnitureSelect = serviceDetailsContainer ?
                      serviceDetailsContainer.querySelector('#furniture-select') :
                      document.querySelector('#furniture-select');

                  console.log('Found furniture select for adding:', furnitureSelect);

                  if (!furnitureSelect) {
                      console.error('Furniture select not found');
                      alert('Furniture selection not available.');
                      return;
                  }

                  const selectedItem = furnitureSelect.value;

                  if (!selectedItem) {
                      alert('Please select a furniture item first.');
                      return;
                  }

                  // Find the furniture list in the current context
                  const selectedFurnitureList = serviceDetailsContainer ?
                      serviceDetailsContainer.querySelector('#selectedFurnitureList') :
                      document.querySelector('#selectedFurnitureList');

                  console.log('Found furniture list:', selectedFurnitureList);

                  if (!selectedFurnitureList) {
                      console.error('Selected furniture list not found');
                      return;
                  }

                  const li = document.createElement('li');

                  li.innerHTML = `
            <span>${selectedItem}</span>
            <button class="remove-item" onclick="removeFurnitureItem(this)">‚úï</button>
        `;

                  selectedFurnitureList.appendChild(li);
                  furnitureSelect.value = "";

                  // Update the furniture items in state
                  if (!state.furnitureItems) state.furnitureItems = [];
                  state.furnitureItems.push(selectedItem);

                  console.log('Furniture item added:', selectedItem);
                  console.log('Current furniture items:', state.furnitureItems);
              }

              function removeFurnitureItem(button) {
                  const li = button.parentElement;
                  const itemText = li.querySelector('span').textContent;

                  console.log('Removing furniture item:', itemText);

                  // Remove from state
                  state.furnitureItems = state.furnitureItems.filter(item => item !== itemText);
                  li.remove();

                  console.log('Remaining furniture items:', state.furnitureItems);
              }

              function clearAllFurnitureItems() {
                  console.log('Clearing all furniture items');

                  // Clear from both possible locations
                  const serviceDetailsContainer = document.getElementById('servicedetailsContainer');
                  const selectedFurnitureList1 = serviceDetailsContainer ?
                      serviceDetailsContainer.querySelector('#selectedFurnitureList') : null;
                  const selectedFurnitureList2 = document.querySelector('#selectedFurnitureList');

                  if (selectedFurnitureList1) selectedFurnitureList1.innerHTML = "";
                  if (selectedFurnitureList2) selectedFurnitureList2.innerHTML = "";

                  state.furnitureItems = [];
                  console.log('All furniture items cleared');
              }

              /* ========== SERVICE DATA ========== */
              window.serviceData = {
                  "Minor Home Repairs": {
                      "Appliances": {
                          price: "$70/hour",
                          description: "Appliance assessment, maintenance or repair ‚è≤Hourly Service. Excludes specialized services.",
                          icon: "üéõÔ∏è",
                          details: ["Maintenance", "Repair", "Assessment"]
                      },
                      "Handles & Locks Installation": {
                          price: "$70",
                          description: "Installation of door knobs, handles, or locks. Hardware is invoiced separately.",
                          icon: "üîí",
                          details: ["Standard door", "Security lock", "Smart lock"]
                      },
                      "Furniture Repair ‚è≤Hourly Service": {
                          price: "$70/hour",
                          description: "Hourly furniture repair service.",
                          icon: "ü™ë",
                          details: ["Wood furniture", "Upholstery", "Metal furniture"]
                      },
                      "Door Damage Repair": {
                          price: "$125",
                          description: "Patch & paint interior door damage (baseball-sized or smaller, materials included. Large damage / solid-core doors incur a small additional fee.)",
                          icon: "üö™",
                          details: ["Patch & paint", "Hinge repair", "Frame adjustment"]
                      },
                      "Drywall Repair : Patch & Paint": {
                          price: "$70",
                          description: "Interior patch & paint with all materials included for damage up to baseball-sized; larger damage incurs a small additional fee.",
                          icon: "‚¨ú",
                          details: ["Small ‚öæ hole", "Large üèÄ hole", "üìàCrack Repair"]
                      }
                  },
                  "Furniture Fixes & Assembly": {
                      "Assembly": {
                          price: "$40/hour",
                          description: "Professional furniture assembly service",
                          icon: "üõ†Ô∏è",
                          details: ["Standard Assembly"],
                          requiresFurnitureSelection: true
                      },
                      "Repair": {
                          price: "$70/hour",
                          description: "Furniture repair and restoration service",
                          icon: "üî®",
                          details: ["Standard Repair"],
                          requiresFurnitureSelection: true
                      }
                  },
                  "Wall Mounting": {
                      "Curtains/Drapes w. Single Rod Installation": {
                          price: "$50",
                          description: "Installation of standard curtains or drapes with a single rod.",
                          icon: "ü™ü",
                          details: ["Standard rod", "Tension rod", "Decorative rod"]
                      },
                      "Frame/Shelf Mounting ‚è≤Hourly Service": {
                          price: "$60/hour",
                          description: "Hourly wall mounting service for frames and shelves.",
                          icon: "üìö",
                          details: ["Picture frames", "Shelves", "Wall art"]
                      },
                      "TV Mounting (Under 60\") + Concealed Cables": {
                          price: "$150",
                          description: "TV mounting for TVs under 60 inches, with concealed cables.",
                          icon: "üì∫",
                          details: ["Drywall", "Concrete", "Brick"]
                      },
                      "TV Mounting (Under 60\") standard": {
                          price: "$60",
                          description: "TV mounting for TVs under 60 inches. Additional hardware costs may apply.",
                          icon: "üì∫",
                          details: ["Basic mounting", "Tilt mount", "Swivel mount"]
                      }
                  },
                  "Computer Repairs": {
                      "Data": {
                          price: "$99",
                          description: "Data copying or backup creation. Additional hardware is not included.",
                          icon: "üíæ",
                          details: ["External drive", "Cloud backup", "Network transfer"]
                      },
                      "Diagnostic Service": {
                          price: "$75",
                          description: "Diagnosis of hardware or software issues. This fee is credited towards repair services.",
                          icon: "üîç",
                          details: ["Part", "Upgrade", "Software", "Performance"]
                      },
                      "Hardware": {
                          price: "$125",
                          description: "Replacement or upgrade of PC hardware parts. Parts can be client-provided or expensed.",
                          icon: "ü™´",
                          details: ["RAM", "SSD", "Graphics card"]
                      },
                      "Maleware & Virus": {
                          price: "$125",
                          description: "Removal of malicious programs while preserving your operating system.",
                          icon: "ü¶†",
                          details: ["Scan & remove", "System cleanup", "Prevention setup"]
                      },
                      "Software": {
                          price: "$50",
                          description: "Installation, update, or removal of up to four software applications.",
                          icon: "üìÄ",
                          details: ["Operating system", "Applications", "Drivers"]
                      },
                      "System Recovery": {
                          price: "$125",
                          description: "Bring back your PC to the state it was in before problems started.",
                          icon: "‚èÆÔ∏è",
                          details: ["Factory reset", "Recovery partition", "Backup restore"]
                      }
                  },
                  "Electrical Help": {
                      "Light Fixture Swap": {
                          price: "$60",
                          description: "Replacement of an existing light fixture (ceiling fans excluded).",
                          icon: "üí°",
                          details: ["Ceiling light", "Wall sconce", "Pendant light"]
                      }
                  },
                  "Plumbing Help": {
                      "Bidet Accessory Install/Removal": {
                          price: "$70",
                          description: "Bidet attachment installation or removal. Excludes specialized toilets.",
                          icon: "üöΩ",
                          details: ["Standard bidet", "Smart bidet", "Add-on"]
                      },
                      "Fixture Swap (Cosmetic)": {
                          price: "$70",
                          description: "Swapping a sink faucet or shower head.",
                          icon: "üö∞",
                          details: ["Faucet", "Shower head", "Drain cover"]
                      },
                      "Leak Under Sink Repair": {
                          price: "$75",
                          description: "Repair for minor leaks under the sink.",
                          icon: "üíß",
                          details: ["Pipe leak", "Drain leak", "Supply line"]
                      },
                      "Unclog Sink/Shower/Toilet (Minor)": {
                          price: "$70",
                          description: "Minor clog removal.",
                          icon: "ü™†",
                          details: ["Plunger", "Drain snake", "Chemical treatment"]
                      }
                  }
              };

              /* ========== VIEW MANAGEMENT ========== */
              function showCategories() {
                  console.log('Showing categories');
                  state.currentView = 'categories';

                  const categoriesGrid = document.getElementById('categories-grid');
                  const serviceSelectionContainer = document.getElementById('serviceSelectionContainer');
                  const servicedetailsContainer = document.getElementById('servicedetailsContainer');
                  const serviceOrdersSection = document.getElementById('serviceOrdersSection');
                  const furnituredetailsSection = document.getElementById('furnituredetailsSection');
                  const modalOverlay = document.getElementById('modalOverlay');

                  if (categoriesGrid) categoriesGrid.style.display = 'grid';
                  if (serviceSelectionContainer) serviceSelectionContainer.style.display = 'none';
                  if (servicedetailsContainer) servicedetailsContainer.style.display = 'none';
                  if (serviceOrdersSection) serviceOrdersSection.style.display = 'none';
                  if (furnituredetailsSection) furnituredetailsSection.style.display = 'none';
                  if (modalOverlay) modalOverlay.style.display = 'none';

                  // Show FAB if there are services
                  updateFabVisibility();
              }

              function showCategoryServices(category) {
                  if (!category) {
                      console.error('No category provided');
                      return;
                  }

                  console.log('Showing category services:', category);

                  // Hide the categories grid and Service Order
                  const categoriesGrid = document.getElementById('categories-grid');
                  const serviceOrdersSection = document.getElementById('serviceOrdersSection');
                  if (categoriesGrid) categoriesGrid.style.display = 'none';
                  if (serviceOrdersSection) serviceOrdersSection.style.display = 'none';

                  // Get the section to update
                  const section = document.getElementById('selectedSection');
                  if (!section) return;

                  section.innerHTML = "";

                  // Add the category heading
                  const h3 = document.createElement("h3");
                  h3.textContent = category + " Services";
                  section.appendChild(h3);

                  // Build the service grid
                  const grid = document.createElement('div');
                  grid.className = 'service-item-grid';

                  // Defensive: Check if category exists
                  if (!serviceData[category]) {
                      const err = document.createElement('p');
                      err.textContent = "No services found for this category.";
                      section.appendChild(err);
                      return;
                  }

                  // Create a card for each service in this category
                  Object.keys(serviceData[category]).forEach(service => {
                      const info = serviceData[category][service];
                      const card = document.createElement('div');
                      card.className = 'service-item-card';

                      // Icon
                      const iconDiv = document.createElement('div');
                      iconDiv.className = 'service-item-icon';
                      iconDiv.textContent = info.icon || 'üîß';

                      // Service name
                      const h4 = document.createElement('h4');
                      h4.textContent = service;

                      // Description
                      const p = document.createElement('p');
                      p.textContent = info.description;

                      // Price
                      const priceDiv = document.createElement('div');
                      priceDiv.className = 'service-price';
                      priceDiv.textContent = info.price;

                      // Assemble the card
                      card.appendChild(iconDiv);
                      card.appendChild(h4);
                      card.appendChild(p);
                      card.appendChild(priceDiv);

                      // Add click event to show service details
                      card.addEventListener('click', () => {
                          showServiceDetails(category, service);
                      });

                      grid.appendChild(card);
                  });

                  section.appendChild(grid);

                  // Back button
                  const backBtn = document.createElement('button');
                  backBtn.className = 'back-button';
                  backBtn.textContent = 'Back to Categories';
                  backBtn.onclick = showCategories;
                  section.appendChild(backBtn);

                  // IMPORTANT: Hide furniture selection in category view
                  const furnituredetailsSection = document.getElementById('furnituredetailsSection');
                  if (furnituredetailsSection) {
                      furnituredetailsSection.style.display = 'none';
                  }

                  const serviceSelectionContainer = document.getElementById('serviceSelectionContainer');
                  const servicedetailsContainer = document.getElementById('servicedetailsContainer');

                  if (serviceSelectionContainer) serviceSelectionContainer.style.display = 'block';
                  if (servicedetailsContainer) servicedetailsContainer.style.display = 'none';

                  // Scroll to the service selection container
                  if (serviceSelectionContainer) {
                      serviceSelectionContainer.scrollIntoView({
                          behavior: 'smooth',
                          block: 'start'
                      });
                  }
              }

              function showServiceDetails(category, service, preselectedDetail) {
                  if (!category || !service) {
                      console.error('Missing category or service');
                      return;
                  }

                  console.log('Showing service details:', category, service);

                  state.currentView = 'details';

                  // Reset furniture items when starting a new service
                  state.furnitureItems = [];

                  const categoriesGrid = document.getElementById('categories-grid');
                  const serviceSelectionContainer = document.getElementById('serviceSelectionContainer');
                  const servicedetailsContainer = document.getElementById('servicedetailsContainer');
                  const serviceOrdersSection = document.getElementById('serviceOrdersSection');

                  if (categoriesGrid) categoriesGrid.style.display = 'none';
                  if (serviceSelectionContainer) serviceSelectionContainer.style.display = 'none';
                  if (serviceOrdersSection) serviceOrdersSection.style.display = 'none';
                  if (!servicedetailsContainer) return;

                  servicedetailsContainer.innerHTML = "";
                  servicedetailsContainer.style.display = 'block';

                  const header = document.createElement('h3');
                  header.textContent = service;
                  servicedetailsContainer.appendChild(header);

                  const info = serviceData[category][service];
                  if (!info) {
                      servicedetailsContainer.innerHTML += '<p>Service information not found.</p>';
                      return;
                  }

                  // Create detail cards for non-furniture services
                  if (!info.requiresFurnitureSelection) {
                      const grid = document.createElement('div');
                      grid.className = 'details-grid';

                      info.details.forEach(detail => {
                          const card = document.createElement('div');
                          card.className = 'detail-card';
                          card.textContent = detail;
                          card.addEventListener('click', () => {
                              Array.from(grid.children).forEach(c => c.classList.remove('selected'));
                              card.classList.add('selected');
                              noteInput.style.display = 'block';
                              addBtn.style.display = 'block';
                          });

                          if (preselectedDetail && detail.toLowerCase().includes(preselectedDetail.toLowerCase())) {
                              card.classList.add('selected');
                          }
                          grid.appendChild(card);
                      });
                      servicedetailsContainer.appendChild(grid);
                  }

                  // Create furniture selection for furniture services
                  if (info.requiresFurnitureSelection) {
                      const furnitureSection = document.createElement('div');
                      furnitureSection.className = 'furniture-selection-section';
                      furnitureSection.innerHTML = `
                <div class="furniture-type-selection">
                    <h4>Select Furniture Type</h4>
                    <div class="radio-group">
                        
                        <label>
                            <input type="radio" name="furnitureType" value="generic" checked> 
                            <span class="radio-custom"></span>
                            Furniture [Not IKEA]
                        </label>
                        <label>
                            <input type="radio" name="furnitureType" value="ikea" > 
                            <span class="radio-custom"></span>
                            IKEA Collection
                        </label>
                    </div>
                </div>
                <div class="furniture-item-selection">
                    <select id="furniture-select">
                        <option value="">Select Furniture Item</option>
                    </select>
                    <button class="add-item-btn" onclick="addFurnitureItem()">Add Item</button>
                </div>
                <br>
                <div class="selected-furniture-section">
                    <h5><b>Your Furniture List</b></h5>
                    <ul id="selectedFurnitureList" class="selected-furniture-list"></ul>
                    <button class="clear-all-btn" onclick="clearAllFurnitureItems()">Remove All Furniture</button>
                </div>
            `;
                      servicedetailsContainer.appendChild(furnitureSection);

                      // Initialize furniture selection immediately after adding to DOM
                      setTimeout(() => {
                          initFurnitureSelection(servicedetailsContainer);
                      }, 0);

                      // Handle radio button changes
                      setTimeout(() => {
                          const radioButtons = servicedetailsContainer.querySelectorAll('input[name="furnitureType"]');
                          radioButtons.forEach(radio => {
                              radio.addEventListener('change', () => {
                                  console.log('Furniture type changed to:', radio.value);
                                  initFurnitureSelection(servicedetailsContainer);
                              });
                          });
                      }, 0);
                  }

                  // Note input (for all services)
                  const noteInput = document.createElement('textarea');
                  noteInput.id = 'serviceNoteInput';
                  noteInput.placeholder = info.requiresFurnitureSelection ?
                      'Add any additional notes about the furniture assembly/repair here...' :
                      'Add job details and notes here...';
                  noteInput.className = 'service-input-area';
                  noteInput.style.display = info.requiresFurnitureSelection ? 'block' : 'none';
                  servicedetailsContainer.appendChild(noteInput);

                  // Add to Cart button - FIXED VERSION
                  const addBtn = document.createElement('button');
                  addBtn.className = 'book-more-button';
                  addBtn.textContent = 'Add to Cart';
                  addBtn.style.display = info.requiresFurnitureSelection ? 'block' : 'none';

                  addBtn.addEventListener('click', function() {
                      console.log('Add to Cart button clicked');

                      let selectedDetail = '';
                      let finalNotes = noteInput.value.trim();

                      // Validation for non-furniture services
                      if (!info.requiresFurnitureSelection) {
                          const selectedCard = servicedetailsContainer.querySelector('.detail-card.selected');
                          if (!selectedCard) {
                              alert('Please select a service detail.');
                              return;
                          }
                          selectedDetail = selectedCard.textContent;

                          if (!finalNotes) {
                              alert('Please enter job details.');
                              return;
                          }
                      }

                      // Validation for furniture services
                      if (info.requiresFurnitureSelection) {
                          if (!state.furnitureItems || state.furnitureItems.length === 0) {
                              alert('Please add at least one furniture item.');
                              return;
                          }

                          // Add furniture items to notes if we have them
                          if (state.furnitureItems.length > 0) {
                              finalNotes += (finalNotes ? "\n" : "") + "Furniture Items: " + state.furnitureItems.join(", ");
                          }

                          selectedDetail = 'Furniture Service';
                      }

                      const entry = {
                          id: `${category}-${service}-${Date.now()}`,
                          category: category,
                          name: service,
                          price: info.price,
                          icon: info.icon || 'üîß',
                          detail: selectedDetail,
                          notes: finalNotes,
                          furnitureItems: info.requiresFurnitureSelection ? [...state.furnitureItems] : []
                      };

                      console.log('Adding to cart:', entry);
                      addToCart(entry);

                      // Reset and navigate
                      servicedetailsContainer.style.display = 'none';
                      state.furnitureItems = [];

                      // Show the Service Order section and update UI
                      const serviceOrdersSection = document.getElementById('serviceOrdersSection');
                      if (serviceOrdersSection) {
                          serviceOrdersSection.style.display = 'block';
                          updateserviceOrdersUI();
                          updateFabVisibility();
                      }
                  });

                  servicedetailsContainer.appendChild(addBtn);

                  // Show/hide logic for non-furniture services
                  if (!info.requiresFurnitureSelection) {
                      // Initially hide the add button for non-furniture services
                      addBtn.style.display = 'none';

                      // Show button when both detail is selected and notes are entered
                      const checkAddButtonVisibility = () => {
                          const selectedCard = servicedetailsContainer.querySelector('.detail-card.selected');
                          const hasNotes = noteInput.value.trim().length > 0;
                          addBtn.style.display = (selectedCard && hasNotes) ? 'block' : 'none';
                      };

                      // Listen for detail selection
                      const detailCards = servicedetailsContainer.querySelectorAll('.detail-card');
                      detailCards.forEach(card => {
                          card.addEventListener('click', checkAddButtonVisibility);
                      });

                      // Listen for note input
                      noteInput.addEventListener('input', checkAddButtonVisibility);
                  } else {
                      // For furniture services, show button immediately but validate on click
                      addBtn.style.display = 'block';
                      noteInput.style.display = 'block';
                  }

                  // Back button
                  const backBtn = document.createElement('button');
                  backBtn.className = 'back-button';
                  backBtn.textContent = 'Back to Services';
                  backBtn.addEventListener('click', () => {
                      servicedetailsContainer.style.display = 'none';
                      showCategoryServices(category);
                  });
                  servicedetailsContainer.appendChild(backBtn);
              }

              /* ========== CART MANAGEMENT ========== */
              function addToCart(serviceEntry) {
                  console.log('Adding service to cart:', serviceEntry);
                  state.serviceOrders.push(serviceEntry);

                  // Update UI to show Service Order
                  updateserviceOrdersUI();
                  updateFabVisibility();

                  alert('Service added to cart!');
              }

              function updateserviceOrdersUI() {
                  const serviceOrdersList = document.getElementById('serviceOrdersList');
                  const estimateTotal = document.getElementById('estimateTotal');
                  const totalAmount = document.getElementById('totalAmount');

                  if (!serviceOrdersList) return;

                  serviceOrdersList.innerHTML = '';

                  let total = 0;

                  state.serviceOrders.forEach(service => {
                      const serviceItem = document.createElement('div');
                      serviceItem.className = 'requested-service-item';

                      // Extract price for total calculation
                      const priceMatch = service.price.match(/\$?(\d+)/);
                      if (priceMatch) {
                          total += parseInt(priceMatch[1]);
                      }

                      serviceItem.innerHTML = `
                <div class="requested-service-icon">${service.icon}</div>
                <div class="requested-service-text">
                    <h4>${service.name}</h4>
                    <div class="service-detail">${service.detail}</div>
                    ${service.notes ? `<div class="service-notes">${service.notes}</div>` : ''}
                </div>
                <div class="requested-service-price">${service.price}</div>
                <button class="remove-service-btn" onclick="removeServiceFromCart('${service.id}')">‚úï</button>
            `;

                      serviceOrdersList.appendChild(serviceItem);
                  });

                  // Update total
                  if (state.serviceOrders.length > 0) {
                      estimateTotal.style.display = 'flex';
                      totalAmount.textContent = `$${total}.00`;
                  } else {
                      estimateTotal.style.display = 'none';
                  }

                  // Show the Service Order section if there are services
                  const serviceOrdersSection = document.getElementById('serviceOrdersSection');
                  if (serviceOrdersSection && state.serviceOrders.length > 0) {
                      serviceOrdersSection.style.display = 'block';
                  }
              }

              function removeServiceFromCart(serviceId) {
                  state.serviceOrders = state.serviceOrders.filter(service => service.id !== serviceId);
                  updateserviceOrdersUI();
                  updateFabVisibility();

                  // Hide Service Order section if no services left
                  if (state.serviceOrders.length === 0) {
                      const serviceOrdersSection = document.getElementById('serviceOrdersSection');
                      if (serviceOrdersSection) {
                          serviceOrdersSection.style.display = 'none';
                      }
                      showCategories();
                  }
              }

              function clearAllServices() {
                  state.serviceOrders = [];
                  updateserviceOrdersUI();
                  updateFabVisibility();
                  showCategories();
              }

              function updateFabVisibility() {
                  const cartFab = document.getElementById('cartFab');
                  const fabCartCount = document.getElementById('fabCartCount');

                  if (state.serviceOrders.length > 0) {
                      cartFab.style.display = 'block';
                      fabCartCount.textContent = state.serviceOrders.length;
                  } else {
                      cartFab.style.display = 'none';
                  }
              }

              function toggleCartModal() {
                  const modalOverlay = document.getElementById('modalOverlay');
                  const modalServiceList = document.getElementById('modalServiceList');
                  const serviceCount = document.getElementById('serviceCount');
                  const modalTotal = document.getElementById('modalTotal');

                  if (modalOverlay.style.display === 'block') {
                      modalOverlay.style.display = 'none';
                  } else {
                      // Update modal content
                      modalServiceList.innerHTML = '';
                      serviceCount.textContent = state.serviceOrders.length;

                      let total = 0;

                      state.serviceOrders.forEach(service => {
                          const serviceElement = document.createElement('div');
                          serviceElement.className = 'requested-service-item';

                          // Extract price for total calculation
                          const priceMatch = service.price.match(/\$?(\d+)/);
                          if (priceMatch) {
                              total += parseInt(priceMatch[1]);
                          }

                          serviceElement.innerHTML = `
                    <div class="requested-service-icon">${service.icon}</div>
                    <div class="requested-service-text">
                        <h4>${service.name}</h4>
                        <div class="service-detail">${service.detail}</div>
                        ${service.notes ? `<div class="service-notes">${service.notes}</div>` : ''}
                    </div>
                    <div class="requested-service-price">${service.price}</div>
                    <button class="remove-service-btn" onclick="removeServiceFromCart('${service.id}')">‚úï</button>
                `;
                          modalServiceList.appendChild(serviceElement);
                      });

                      modalTotal.textContent = `$${total}.00`;
                      modalOverlay.style.display = 'block';
                  }
              }

              function bookServices() {
                  if (state.serviceOrders.length === 0) {
                      alert('Please add at least one service before booking.');
                      return;
                  }

                  // Here you would typically redirect to a booking page or show a booking form
                  alert('Proceeding to booking with ' + state.serviceOrders.length + ' services!');
                  console.log('Booking services:', state.serviceOrders);
              }

              /* ========== INITIALIZATION ========== */
              document.addEventListener('DOMContentLoaded', function() {
                  console.log('DOM loaded, initializing event listeners...');

                  // Initialize category tiles
                  const categoryTiles = document.querySelectorAll('.category-tile');
                  console.log('Found category tiles:', categoryTiles.length);

                  categoryTiles.forEach(tile => {
                      tile.addEventListener('click', function() {
                          console.log('Category tile clicked');
                          const category = this.getAttribute('data-category');
                          console.log('Category:', category);

                          if (category) {
                              this.classList.add('tap-animate');
                              setTimeout(() => this.classList.remove('tap-animate'), 300);
                              showCategoryServices(category);
                          } else {
                              console.error('No category found on tile');
                          }
                      });
                  });

                  // Initialize static furniture section if visible
                  const staticFurnitureSection = document.getElementById('furnituredetailsSection');
                  if (staticFurnitureSection && staticFurnitureSection.style.display !== 'none') {
                      console.log('Initializing static furniture section');
                      initFurnitureSelection();

                      // Add event listeners for static furniture radio buttons
                      const staticRadios = document.querySelectorAll('#furnituredetailsSection input[name="furnitureType"]');
                      staticRadios.forEach(radio => {
                          radio.addEventListener('change', function() {
                              console.log('Static furniture type changed to:', this.value);
                              initFurnitureSelection();
                          });
                      });
                  }

                  console.log('Initialization complete');
              });
          </script>
      </body>

      </html>
