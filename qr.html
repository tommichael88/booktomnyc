<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BookTOM</title>
    <meta name="description" content="">
    <meta property="og:title" content="Tom Kongerslev">
    <meta property="og:type" content="website">
    <meta property="og:description" content="BookTom">
    <meta property="og:image" content="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <link id="favicon" rel="icon" href="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" type="image/x-icon">
    <link rel="preload" href="https://tommichael88.github.io/booktomnyc/images/tomshandytech_favicon.webp?raw=true" as="image">
    <link rel="preload" href="https://tommichael88.github.io/booktomnyc/images/TomKongerslev_nobg.png?raw=true" as="image">
    <link rel="preload" href="https://tommichael88.github.io/booktomnyc/js/marquee.js" as="script">
    <link rel="shortcut icon" href="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true" type="image/x-icon">
    <link rel="apple-touch-icon" href="https://github.com/tommichael88/booktomnyc/blob/main/images/___test.png?raw=true">
    <link rel="stylesheet" href="https://tommichael88.github.io/booktomnyc/External/styles.css">
    <style>
        
        /* ========== CORE ELEMENTS & VARIABLES ========== */
:root {
    --bg-card: #1e1e1e;
    --bg-card-hover: #2a2a2a;
    --primary: #474747;
    --primary-hover: #ffffff;
    --text-primary: #f5f5f5;
    --text-secondary: #c0c0c0;
    --accent-light: rgba(250, 0, 0, 1);
    --accent: rgba(250, 0, 0, 1);
    --selected-bg: rgba(250, 0, 0, 0.1);
    --border-radius: 12px;
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.2);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'Ubuntu', -apple-system, BlinkMacSystemFont, sans-serif;
}

html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
}

html, body {
    min-height: 100vh;
    background-color: var(--bg-dark);
    color: var(--text-primary);
    overflow-x: hidden;
}

body {
    padding: 10px;
    margin: auto;
    max-width: 468px;
    position: relative;
}

/* ========== PAGE BACKGROUND & LAYOUT ========== */
.pg_background {
    background-size: cover;
    background-attachment: fixed;
    background-position: center;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: -1;
    background-image: url('https://github.com/tommichael88/booktomnyc/blob/main/images/booktomnyc_bg.jpg?raw=true');
}

.qrc_page_wrapper {
    background-size: cover;
    background-position: inherit;
    background-color: var(--qrc-secondary);
    max-width: auto;
    padding: 0;
    padding-top: 0.1px;
    padding-bottom: 0.1px;
    overflow: auto;
    position: relative;
    height: 100vh;
}

.qrc_page_inner {
    max-width: 490px;
    margin: auto;
    position: relative;
    padding: 4px 4px 1px 4px;
    border-radius: var(--border-radius);
    padding-bottom: 90px;
    z-index: 9;
}

/* ========== HEADER & PROFILE ELEMENTS ========== */
.header {
    display: flex;
    background: rgba(168, 168, 168, .65);
    padding: 12px;
    border-radius: var(--border-radius);
    margin: 10px;
    text-align: center;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: var(--shadow-md);
}

.header h1 {
    font-size: 1.1rem;
    font-weight: 800;
    background: linear-gradient(225deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    display: inline-block;
    position: relative;
    letter-spacing: -0.5px;
}

.header h1::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 50%;
    height: 3px;
    background: linear-gradient(90deg, var(--primary), var(--accent));
    border-radius: 3px;
}

.profile-image {
    display: block;
    width: 100%;
    height: auto;
    border-radius: var(--border-radius);
    margin: 2px auto;
    box-sizing: border-box;
    box-shadow: var(--shadow-lg);
    transition: var(--transition);
}

.profile-image:hover {
    transform: scale(1.01);
}

.highlight-box {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 15px;
    gap: 2%;
    background: rgba(169, 169, 169, 0);
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    position: relative;
    border: 2px solid rgba(169, 169, 169, 0.9);
    border-radius: var(--border-radius);
    transition: var(--transition);
}

.highlight-box:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.thandylogo {
    max-height: 4rem;
    width: auto;
    flex: 0 0 auto;
    object-fit: contain;
    z-index: 1;
    transition: var(--transition);
}

.tom_kongerslev {
    flex: 1 1 auto;
    min-width: 0;
    margin: auto;
    position: relative;
    z-index: 1;
    object-fit: contain;
}

.tom_kongerslev img {
    max-height: relative;
    width: auto;
    max-width: 100%;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* ========== CONTACT BUTTON & TOOLBAR ========== */
.contact-button {
    padding: 8px 12px;
    font-size: 0.85rem;
    font-weight: 700;
    background: #C0C0C0;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    color: #2a2a2a;
    cursor: pointer;
    transition: var(--transition);
    position: relative;
    overflow: visible !important;
    isolation: isolate;
    min-width: 64px;
    min-height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
}

.contact-button::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    width: 4.2rem;
    height: 4.2rem;
    background:
        radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.9) 2%, transparent 4%),
        radial-gradient(circle at 70% 20%, rgba(255, 255, 255, 0.8) 3%, transparent 5%),
        radial-gradient(circle at 20% 70%, rgba(255, 255, 255, 0.7) 2%, transparent 4%),
        radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.6) 3%, transparent 5%),
        radial-gradient(circle,
            rgba(255, 255, 255, 0.25) 0%,
            rgba(255, 255, 255, 0.15) 25%,
            rgba(255, 255, 255, 0.08) 50%,
            transparent 80%);
    border: 1.5px solid rgba(255, 255, 255, 0.6);
    clip-path: polygon(50% 0%,
            61% 35%,
            98% 35%,
            68% 57%,
            79% 91%,
            50% 70%,
            21% 91%,
            32% 57%,
            2% 35%,
            39% 35%);
    filter: blur(0.5px) drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
    opacity: 0;
    z-index: -1;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.contact-button::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    width: 3.6rem;
    height: 3.6rem;
    background:
        radial-gradient(circle at 50% 50%,
            rgba(255, 255, 255, 0.4) 0%,
            rgba(255, 255, 255, 0.2) 30%,
            rgba(255, 255, 255, 0.1) 50%,
            transparent 70%);
    clip-path: polygon(50% 0%,
            58% 32%,
            95% 32%,
            65% 54%,
            76% 88%,
            50% 67%,
            24% 88%,
            35% 54%,
            5% 32%,
            42% 32%);
    filter: blur(1px);
    opacity: 0;
    z-index: -1;
    mix-blend-mode: screen;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s;
}

.contact-button .contact-glow-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    width: 4.8rem;
    height: 4.8rem;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow:
        0 0 20px rgba(255, 255, 255, 0.5),
        inset 0 0 20px rgba(255, 255, 255, 0.3);
    z-index: -2;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.05s;
}

.contact-button .contact-sparkle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    filter: blur(0.5px);
    opacity: 0;
    z-index: -1;
}

.contact-button .contact-sparkle:nth-child(1) {
    top: 20%;
    left: 25%;
}

.contact-button .contact-sparkle:nth-child(2) {
    top: 30%;
    right: 30%;
}

.contact-button .contact-sparkle:nth-child(3) {
    bottom: 35%;
    left: 35%;
}

.contact-button .contact-sparkle:nth-child(4) {
    bottom: 20%;
    right: 25%;
}

.contact-button:hover {
    transform: scale(1.4) rotate(5deg);
    text-shadow:
        0 0 12px rgba(222, 0, 0, 0.8),
        0 0 20px rgba(222, 0, 0, 0.4),
        0 0 30px rgba(222, 0, 0, 0.2);
    color: #FFF;
    background: radial-gradient(circle at 10% 60%, #8a0615 0%, #de0000 40%, #de0000 60%, #8a0615 90%);
    box-shadow:
        0 4px 20px rgba(138, 6, 21, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        0 0 30px rgba(255, 0, 0, 0.3);
    border-color: rgba(255, 0, 0, 0.3);
}

.contact-button:hover::before {
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
    opacity: 1;
    animation:
        contactStarSpin 8s linear infinite,
        contactStarPulse 2s ease-in-out infinite,
        contactStarGlitter 1.5s infinite;
}

.contact-button:hover::after {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.7;
    animation:
        contactStarSpinReverse 12s linear infinite,
        contactInnerShimmer 3s ease-in-out infinite;
}

.contact-button:hover .contact-glow-ring {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.8;
    animation: contactRingPulse 3s ease-in-out infinite;
}

.contact-button:hover .contact-sparkle {
    opacity: 1;
    animation: contactSparkleFloat 2s ease-in-out infinite;
}

.contact-button:hover .contact-sparkle:nth-child(1) {
    animation-delay: 0s;
}

.contact-button:hover .contact-sparkle:nth-child(2) {
    animation-delay: 0.3s;
}

.contact-button:hover .contact-sparkle:nth-child(3) {
    animation-delay: 0.6s;
}

.contact-button:hover .contact-sparkle:nth-child(4) {
    animation-delay: 0.9s;
}

.contact-button:active {
    transform: scale(0.95) rotate(-5deg);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    background: radial-gradient(circle at 90% 10%, #8a0615 0%, #de0000 40%, #de0000 60%, #8a0615 90%);
    box-shadow:
        0 2px 10px rgba(138, 6, 21, 0.6),
        0 0 0 2px rgba(255, 255, 255, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.contact-button:active::before {
    animation-duration: 4s, 1s, 0.8s;
    filter: blur(0.5px) drop-shadow(0 0 12px rgba(255, 255, 255, 0.9));
    border-color: rgba(255, 255, 255, 0.9);
}

.contact-button:active::after {
    animation-duration: 8s, 2s;
    opacity: 0.9;
}

.contact-button:active .contact-glow-ring {
    animation-duration: 1.5s;
    opacity: 1;
    box-shadow:
        0 0 25px rgba(255, 255, 255, 0.8),
        inset 0 0 25px rgba(255, 255, 255, 0.5);
}

.contact-button:active .contact-sparkle {
    animation-duration: 1s;
}

/* CONTACT TOOLBAR */
.contact-toolbar {
    display: none;
    background: rgba(169, 169, 169, 0);
    backdrop-filter: blur(10px);
    border: 2px outset rgba(169, 169, 169, 0.9);
    border-radius: var(--border-radius);
    padding: 12px 8px;
    margin: 0 auto;
    justify-content: space-around;
    align-items: center;
    box-shadow: var(--shadow-lg);
    animation: slideDown 0.4s ease;
    width: 100%;
    max-width: 460px;
}

.contact-toolbar.active {
    display: flex;
    --light-index: 0;
}

.contact-toolbar-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 10px 12px;
    border-radius: 10px;
    background: rgba(255, 255, 255, .75);
    transition: var(--transition);
    cursor: pointer;
    text-decoration: none;
    font-weight: 800;
    border: 1px solid rgba(169, 169, 169, 0.2);
    min-width: 100px;
    overflow: hidden;
    position: relative;
}

.contact-toolbar-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.5), transparent);
    transition: left 0.6s ease;
}

.contact-toolbar-item:hover::before {
    left: 100%;
}

.contact-toolbar-item:hover {
    background: radial-gradient(circle at 10% 60%, #c0c0c0 0%, #FFF 40%, #FFF 60%, #c0c0c0 90%);
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 20px rgba(250, 250, 250, 0.3);
    border-color: rgba(0, 0, 0, 0.6);
    color: #ffffff;
}

.contact-toolbar-icon {
    font-size: 2rem;
    margin-bottom: 6px;
    background: radial-gradient(circle at 10% 60%, #C0C0C0 0%, #FFF 40%, #FFF 60%, #c0c0c0 90%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: rgba(0, 0, 0, .9);
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.5), 1px 1px 0 rgba(255, 255, 255, 0.1);
    transition: var(--transition);
    filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.3));
}

.contact-toolbar-item:hover .contact-toolbar-icon {
    transform: scale(1.7) rotate(5deg);
    text-shadow: 0 0 12px rgba(222, 222, 222, 0.8), 0 0 20px rgba(222, 222, 222, 0.4), 0 0 30px rgba(222, 222, 222, 0.2);
}

.contact-toolbar-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-align: center;
    text-shadow: 1px 2px 4px rgba(0, 0, 0, 0.9);
    color: #2a2a2a;
    transition: var(--transition);
}

.contact-toolbar-item:hover .contact-toolbar-label {
    color: #ffffff;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

/* SEQUENTIAL LIGHTING ANIMATION FOR CONTACT TOOLBAR */
.contact-toolbar.active .contact-toolbar-item {
    position: relative;
    overflow: hidden;
    opacity: 0.7;
    background: rgba(255, 255, 255, 0.7);
    transform: scale(0.95);
    transition: none;
}

.contact-toolbar.active .contact-toolbar-item:nth-child(1) {
    animation:
        lightUpItem 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.1s forwards,
        itemPulse 2s ease-in-out 1.2s infinite;
}

.contact-toolbar.active .contact-toolbar-item:nth-child(2) {
    animation:
        lightUpItem 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards,
        itemPulse 2s ease-in-out 1.4s infinite;
}

.contact-toolbar-item.lighting::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle,
            rgba(255, 0, 0, 0.95) 0%,
            rgba(200, 0, 0, 0.8) 30%,
            rgba(150, 0, 0, 0.6) 50%,
            transparent 70%);
    transform: translate(-50%, -50%) scale(0);
    border-radius: 50%;
    animation: itemSparkle 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    z-index: 1;
    itemPulse 2s ease-in-out 1.4s infinite;
}

.contact-toolbar.active .contact-toolbar-item:nth-child(3) {
    animation:
        lightUpItem 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.5s forwards,
        itemPulse 2s ease-in-out 1.6s infinite;
}

.contact-toolbar.active .contact-toolbar-item:nth-child(4) {
    animation:
        lightUpItem 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.7s forwards,
        itemPulse 2s ease-in-out 1.8s infinite;
}

.contact-toolbar.active.all-lit .contact-toolbar-item {
    animation:
        itemPulse 3s ease-in-out infinite,
        itemGlow 4s ease-in-out infinite;
    transition: var(--transition);
}

.contact-toolbar.active.all-lit .contact-toolbar-item:nth-child(1),
.contact-toolbar.active.all-lit .contact-toolbar-item:nth-child(2),
.contact-toolbar.active.all-lit .contact-toolbar-item:nth-child(3),
.contact-toolbar.active.all-lit .contact-toolbar-item:nth-child(4) {
    animation:
        itemPulse 3s ease-in-out infinite,
        itemGlow 4s ease-in-out infinite;
}

.contact-toolbar.active::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    height: 3px;
    background: linear-gradient(90deg,
            #8a0615 0%,
            #de0000 25%,
            #ff0000 50%,
            #8a0000 75%,
            #000000 100%);
    border-radius: 0 0 var(--border-radius) var(--border-radius);
    animation: progressFill 1.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    z-index: 1;
}

.contact-toolbar.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    height: 3px;
    width: 100%;
    background: linear-gradient(90deg,
            transparent 0%,
            rgba(255, 0, 0, 0.9) 15%,
            rgba(220, 0, 0, 0.9) 30%,
            rgba(180, 0, 0, 0.8) 50%,
            rgba(100, 0, 0, 0.7) 70%,
            rgba(0, 0, 0, 0.9) 85%,
            transparent 100%);
    border-radius: 0 0 var(--border-radius) var(--border-radius);
    animation: sparkleTrail 1.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    z-index: 2;
    filter: blur(0.8px) brightness(1.1);
}

.contact-toolbar-item.lighting::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle,
            rgba(255, 0, 0, 0.95) 0%,
            rgba(200, 0, 0, 0.8) 30%,
            rgba(150, 0, 0, 0.6) 50%,
            transparent 70%);
    transform: translate(-50%, -50%) scale(0);
    border-radius: 50%;
    animation: itemSparkle 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    z-index: 1;
}

.contact-toolbar.active.all-lit .contact-toolbar-item:hover {
    animation:
        enhancedHover 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards,
        itemPulse 2s ease-in-out infinite,
        itemGlow 4s ease-in-out infinite;
}

/* ========== SERVICE SCHEDULE CARD ========== */
.card-schedule-service {
    display: block;
    border: 1px outset rgba(0, 0, 0, .75);
    background: rgba(255, 255, 255, 1);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    text-align: center;
    padding: 20px;
    margin: 15px auto;
    overflow: hidden;
    box-sizing: border-box;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: var(--transition);
}

.card-schedule-service:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

.new-service-request-grid-topper {
    display: flex;
    font-size: 1rem;
    padding: 12px 16px;
    border: 2px inset rgba(169, 169, 169, .1);
    color: #2a2a2a;
    justify-content: space-between;
    align-items: center;
    text-align: center;
    font-weight: 700;
    object-fit: contain;
    background: linear-gradient(25deg, #f8f8f8 1%, #e8e8e8 20%, #f0f0f0 40%, #e8e8e8 60%, #f8f8f8 95%);
    border-radius: 10px;
    transition: var(--transition);
    cursor: pointer;
}

.new-service-request-grid-topper:hover {
    background: linear-gradient(25deg, #ffffff 1%, #f0f0f0 20%, #f8f8f8 40%, #f0f0f0 60%, #ffffff 95%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.reschedule-service-button {
    font-weight: 700;
    padding: 10px auto;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    white-space: nowrap;
}

.reschedule-service-button:hover {
    transform: scale(1.75);
}

/* ENHANCED CART FAB WITH SPINNING GLITTERING STAR */
.cartFab {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px 14px;
    border-radius: 16px;
    background: linear-gradient(135deg, #8a0615 0%, #b80a1f 100%);
    box-shadow:
        0 4px 20px rgba(138, 6, 21, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        0 0 30px rgba(255, 215, 0, 0.3);
    overflow: visible;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 1000;
    min-width: 64px;
    min-height: 64px;
    backdrop-filter: blur(4px);
    border: 2px solid rgba(255, 255, 255, 0.1);
}

.cartFab::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 4.8rem;
    height: 4.8rem;
    background:
        radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.9) 2%, transparent 4%),
        radial-gradient(circle at 70% 20%, rgba(255, 255, 255, 0.8) 3%, transparent 5%),
        radial-gradient(circle at 20% 70%, rgba(255, 255, 255, 0.7) 2%, transparent 4%),
        radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.6) 3%, transparent 5%),
        radial-gradient(circle,
            rgba(255, 223, 0, 0.25) 0%,
            rgba(255, 215, 0, 0.15) 25%,
            rgba(255, 215, 0, 0.08) 50%,
            transparent 80%);
    border: 2px solid rgba(255, 215, 0, 0.6);
    clip-path: polygon(50% 0%,
            61% 35%,
            98% 35%,
            68% 57%,
            79% 91%,
            50% 70%,
            21% 91%,
            32% 57%,
            2% 35%,
            39% 35%);
    filter:
        blur(0.5px) drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
    animation:
        starSpin 15s linear infinite,
        starPulse 3s ease-in-out infinite,
        starGlitter 2s infinite;
    z-index: 0;
}

.cartFab::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 4.2rem;
    height: 4.2rem;
    background:
        radial-gradient(circle at 50% 50%,
            rgba(255, 255, 255, 0.4) 0%,
            rgba(255, 255, 255, 0.2) 30%,
            rgba(255, 255, 255, 0.1) 50%,
            transparent 70%);
    clip-path: polygon(50% 0%,
            58% 32%,
            95% 32%,
            65% 54%,
            76% 88%,
            50% 67%,
            24% 88%,
            35% 54%,
            5% 32%,
            42% 32%);
    filter: blur(1px);
    animation:
        starSpinReverse 20s linear infinite,
        innerShimmer 4s ease-in-out infinite;
    z-index: 1;
    mix-blend-mode: screen;
}

.cartFab .glow-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 5.4rem;
    height: 5.4rem;
    border-radius: 50%;
    border: 1px solid rgba(255, 215, 0, 0.4);
    box-shadow:
        0 0 25px rgba(255, 215, 0, 0.5),
        inset 0 0 25px rgba(255, 215, 0, 0.3);
    z-index: 0;
    opacity: 0.8;
    animation: ringPulse 4s ease-in-out infinite;
}

.cartFab img {
    position: relative;
    width: 2.4rem;
    height: 2.4rem;
    object-fit: contain;
    z-index: 3;
    filter:
        drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4)) drop-shadow(0 0 8px rgba(255, 255, 255, 0.8)) brightness(1.2);
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    transform-origin: center;
}

/* SPARKLING PARTICLES */
.cartFab .sparkle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    filter: blur(0.5px);
    animation: sparkleFloat 3s ease-in-out infinite;
    z-index: 2;
}

.cartFab .sparkle:nth-child(1) {
    top: 15%;
    left: 20%;
    animation-delay: 0s;
    width: 3px;
    height: 3px;
}

.cartFab .sparkle:nth-child(2) {
    top: 25%;
    right: 25%;
    animation-delay: 0.5s;
    width: 2px;
    height: 2px;
}

.cartFab .sparkle:nth-child(3) {
    bottom: 30%;
    left: 30%;
    animation-delay: 1s;
    width: 3px;
    height: 3px;
}

.cartFab .sparkle:nth-child(4) {
    bottom: 15%;
    right: 20%;
    animation-delay: 1.5s;
    width: 2px;
    height: 2px;
}

/* ITEM COUNT BADGE - DIAMOND-SHAPED */
#fabCartCount {
    position: absolute;
    top: -8px;
    right: -8px;
    background: linear-gradient(135deg, #ffffff 0%, #f8f8f8 100%);
    color: #8a0615;
    font-size: 0.75rem;
    font-weight: 900;
    padding: 4px 8px;
    border-radius: 8px;
    min-width: 26px;
    height: 26px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow:
        0 3px 10px rgba(138, 6, 21, 0.5),
        0 0 0 2px #ffffff,
        0 0 0 3px rgba(255, 215, 0, 0.9),
        inset 0 1px 1px rgba(255, 255, 255, 0.5);
    z-index: 4;
    animation:
        badgePulse 2s ease-in-out infinite,
        badgeShine 3s ease-in-out infinite;
    transition: all 0.3s ease;
    transform-style: preserve-3d;
    clip-path: polygon(20% 0%,
            80% 0%,
            100% 20%,
            100% 80%,
            80% 100%,
            20% 100%,
            0% 80%,
            0% 20%);
}

.cartFab:hover {
    transform: scale(1.15) translateY(-3px);
    background: linear-gradient(135deg, #9e0718 0%, #cc0c24 100%);
    box-shadow:
        0 10px 35px rgba(138, 6, 21, 0.6),
        0 0 0 2px rgba(255, 255, 255, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        0 0 40px rgba(255, 215, 0, 0.5);
    border-color: rgba(255, 215, 0, 0.4);
}

.cartFab:hover::before {
    animation-duration: 8s, 2s, 1.5s;
    border-color: rgba(255, 215, 0, 0.8);
    filter:
        blur(0.5px) drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
}

.cartFab:hover::after {
    animation-duration: 15s, 3s;
    opacity: 0.7;
}

.cartFab:hover img {
    transform: scale(1.15) rotate(-5deg);
    filter:
        drop-shadow(0 3px 6px rgba(0, 0, 0, 0.5)) drop-shadow(0 0 12px rgba(255, 255, 255, 1)) brightness(1.3);
}

.cartFab:hover #fabCartCount {
    transform: scale(1.2) translateZ(10px);
    box-shadow:
        0 5px 15px rgba(138, 6, 21, 0.6),
        0 0 0 2px #ffffff,
        0 0 0 4px rgba(255, 215, 0, 1),
        inset 0 1px 2px rgba(255, 255, 255, 0.8);
    animation-duration: 1s, 2s;
}

.cartFab:hover .sparkle {
    animation-duration: 2s;
}

.cartFab:active {
    transform: scale(0.95) translateY(1px);
    transition: all 0.1s ease;
    box-shadow:
        0 2px 10px rgba(138, 6, 21, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.cartFab:active::before {
    animation-play-state: paused;
}

.cartFab:active #fabCartCount {
    transform: scale(0.9);
}

.cartFab:has(#fabCartCount:empty) #fabCartCount,
.cartFab:has(#fabCartCount:contains("0")) #fabCartCount {
    opacity: 0.5;
    animation: none;
    filter: grayscale(0.5);
}

.cartFab[style*="display: flex"] {
    animation: cartFabAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.cartFab.removing {
    animation: cartFabDisappear 0.3s ease forwards;
}

/* ========== CATEGORIES GRID ========== */
.menu-container {
    display: grid;
    place-items: center;
    padding: 0;
    margin: 0;
    width: 100%;
}

#categories-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    max-width: 400px;
    margin: 15px auto;
    width: 100%;
}

.category-tile * {
    pointer-events: none;
}

.category-tile {
    background: rgba(255, 255, 255, 0.9);
    color: #2a2a2a;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(192, 192, 192, 0.5);
    padding: 15px 8px;
    width: 100%;
    aspect-ratio: 1 / 1 !important;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    box-sizing: border-box;
    transition: var(--transition);
    position: relative;
    border-radius: 12px;
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    cursor: pointer;
    user-select: none;
}

.category-tile::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(222, 0, 0, 0) 0%, rgba(222, 0, 0, 0.05) 100%);
    opacity: 0;
    transition: var(--transition);
}

.category-tile:hover::before {
    opacity: 1;
}

.category-tile h2 {
    font-size: 0.95rem;
    line-height: 1.3;
    margin: 0;
    padding: 0;
    word-break: break-word;
    font-weight: 700;
    position: relative;
    z-index: 1;
    transition: var(--transition);
}

.category-tile:active {
    transform: scale(0.95);
    transition: transform 0.1s ease;
}

.category-tile::after {
    content: '';
    position: absolute;
    left: 50%;
    bottom: 10px;
    width: 0;
    height: 3px;
    background: linear-gradient(25deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
    transition: var(--transition);
    transform: translateX(-50%);
}

.category-tile:hover::after {
    width: 70%;
}

.category-tile:hover h2 {
    text-shadow: 0 2px 8px rgba(222, 0, 0, 0.3);
    color: #de0000;
    transform: translateY(-2px);
}

.category-icon {
    font-size: 2.2rem;
    margin-bottom: 8px;
    background: linear-gradient(55deg, #000 10%, #de0000 60%, #de0000 70%, #8a0615 60%, #de0000 95%);
    -webkit-text-fill-color: transparent;
    -webkit-background-clip: text;
    background-clip: text;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    transition: var(--transition);
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.2));
}

.category-tile:hover {
    transform: translateY(-5px) scale(1.03);
    box-shadow: var(--shadow-lg);
    border-color: rgba(222, 0, 0, 0.3);
    background: rgba(255, 255, 255, 0.95);
}

.category-tile:hover .category-icon {
    transform: scale(1.15) rotate(5deg);
    filter: drop-shadow(0 3px 6px rgba(222, 0, 0, 0.3));
}

/* ========== SERVICE SELECTION & DETAILS ========== */
#serviceRequestContainer,
#servicedetailsContainer {
    display: flex;
    flex-direction: column;
    color: #2a2a2a;
    border: 2px solid rgba(169, 169, 169, 0.3);
    border-radius: 16px;
    padding: 12px;
    margin: 8px auto;
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(15px);
    transition: var(--transition);
    background: rgba(255, 255, 255, 0.95);
    width: calc(100% - 4px);
}

#serviceRequestContainer {
    border-top: 4px solid var(--accent);
    background: rgba(255, 255, 255, 0.98);
}

.service-item-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    width: 100%;
    gap: 8px;
    box-sizing: border-box;
    padding: 0;
}

.service-item-card {
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(42, 42, 42, 0.9) 100%);
    color: white;
    padding: 0.6rem;
    border-radius: 10px;
    transition: var(--transition);
    cursor: pointer;
    box-sizing: border-box;
    width: 100%;
    min-height: 120px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    text-align: center;
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: var(--shadow-sm);
}

.service-item-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(222, 0, 0, 0.2), transparent);
    transition: left 0.4s ease;
}

.service-item-card:hover::before {
    left: 100%;
}

.service-item-card:hover {
    background: linear-gradient(135deg, rgba(222, 0, 0, 0.9) 0%, rgba(138, 6, 21, 0.9) 100%);
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--shadow-md);
    border-color: rgba(255, 255, 255, 0.3);
}

.service-item-card h4 {
    font-size: 0.85rem;
    margin: 0.3rem 0;
    line-height: 1.2;
    word-break: break-word;
    font-weight: 700;
    position: relative;
    z-index: 1;
    flex: 0 1 auto;
    max-width: 100%;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.service-item-card p {
    font-size: 0.65rem;
    color: #c0c0c0;
    margin: 0.2rem 0;
    line-height: 1.2;
    word-break: break-word;
    flex: 1 1 auto;
    position: relative;
    z-index: 1;
    max-width: 100%;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.service-price {
    font-weight: 800;
    font-size: 0.75rem;
    margin: 0.2rem 0;
    color: #FFF;
    background: linear-gradient(135deg, #de0000, #8a0615);
    padding: 0.3rem 0.5rem;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    flex-shrink: 0;
    position: relative;
    z-index: 1;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
    line-height: 1;
}

.service-item-icon {
    font-weight: 800;
    font-size: 1.6rem;
    margin-bottom: 0.2rem;
    filter: grayscale(100%) brightness(1.3) contrast(1.1);
    color: #f8f8f8;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    transition: var(--transition);
    position: relative;
    z-index: 1;
    flex-shrink: 0;
}

.service-item-card:hover .service-item-icon {
    filter: grayscale(0%) brightness(1.5) contrast(1.2);
    transform: scale(1.05) rotate(3deg);
}

/* ========== TASK DETAILS & OPTIONS ========== */
.task-details {
    margin: 15px 0;
}

.radio-group {
    display: flex;
    gap: 15px;
    margin: 10px 0;
}

.radio-group label {
    display: flex;
    align-items: center;
    gap: 5px;
}

.details-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 0.8rem;
    padding: 1.2rem;
    background: rgba(166, 166, 166, 0.3);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    backdrop-filter: blur(10px);
    margin: 1rem 0;
}

.detail-card {
    background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
    border: 1px solid #ccc;
    border-radius: 10px;
    padding: 1rem 0.5rem;
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
    font-size: 0.85rem;
    font-weight: 600;
    color: #333;
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
}

.detail-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(222, 0, 0, 0.1), transparent);
    transition: left 0.6s ease;
}

.detail-card:hover::before {
    left: 100%;
}

.detail-card:hover {
    background: linear-gradient(135deg, #e8e8e8 0%, #d8d8d8 100%);
    transform: translateY(-3px);
    box-shadow: var(--shadow-md);
    border-color: var(--accent);
}

.detail-card.selected {
    background: linear-gradient(135deg, var(--accent) 0%, #8a0615 100%);
    color: white;
    border-color: var(--accent);
    box-shadow: 0 6px 20px rgba(250, 0, 0, 0.4);
    transform: scale(1.05);
}

.detail-card.selected::before {
    display: none;
}

.service-input-area {
    width: 100%;
    min-height: 80px;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    margin: 10px 0;
    resize: vertical;
}

/* ========== FURNITURE SELECTION ========== */
.furniture-selection-section {
    margin: 15px 0;
}

.furniture-item-selection {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin: 10px 0;
}

.selected-furniture-list {
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 10px;
    margin: 10px 0;
    background: rgba(255, 255, 255, 0.8);
}

.selected-furniture-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-bottom: 1px solid #eee;
}

.remove-item {
    background: rgba(222, 0, 0, 0.1);
    border: 1px solid rgba(222, 0, 0, 0.3);
    border-radius: 5px;
    padding: 4px 8px;
    cursor: pointer;
    transition: var(--transition);
}

.remove-item:hover {
    background: var(--accent);
    color: white;
}

/* ========== SELECTED SERVICES SECTION ========== */
#serviceRequestSection {
    display: none;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 248, 248, 0.95) 100%);
    border: 2px solid rgba(169, 169, 169, 0.3);
    border-radius: 16px;
    padding: 20px;
    margin: 16px auto;
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(15px);
    transition: var(--transition);
    color: #2a2a2a;
}

.Requested-service-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(222, 0, 0, 0.1);
    margin-bottom: 20px;
}

.Requested-service-header h4 {
    font-size: 1.3rem;
    font-weight: 800;
    color: #2a2a2a;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

#serviceRequestList {
    display: flex;
    flex-direction: column;
    gap: 16px;
    min-height: 120px;
    padding: 0;
    margin-bottom: 20px;
}

.requested-service-item {
    display: grid;
    grid-template-columns: 60px 1fr auto auto;
    gap: 16px;
    align-items: center;
    padding: 18px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 250, 250, 0.9) 100%);
    border: 1px solid rgba(169, 169, 169, 0.2);
    border-radius: 12px;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
}

.requested-service-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(222, 0, 0, 0.05), transparent);
    transition: left 0.6s ease;
}

.requested-service-item:hover::before {
    left: 100%;
}

.requested-service-item:hover {
    border-color: rgba(222, 0, 0, 0.3);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.requested-service-icon {
    font-size: 1.5rem;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    flex-shrink: 0;
    box-shadow: var(--shadow-md);
    transition: var(--transition);
}

.requested-service-item:hover .requested-service-icon {
    transform: scale(1.05);
    background: linear-gradient(135deg, var(--accent) 0%, #8a0615 100%);
}

.requested-service-text {
    flex: 1;
    min-width: 0;
}

.requested-service-text h4 {
    margin: 0 0 6px 0;
    font-size: 1.1rem;
    font-weight: 800;
    color: #2a2a2a;
    line-height: 1.2;
}

.service-detail {
    font-size: 0.9rem;
    color: #666;
    font-weight: 600;
    margin-bottom: 8px;
}

.service-notes {
    font-size: 0.8rem;
    color: #666;
    background: rgba(0, 0, 0, 0.03);
    padding: 8px 12px;
    border-radius: 8px;
    border-left: 3px solid var(--accent);
    line-height: 1.4;
    max-height: 60px;
    overflow-y: auto;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

.requested-service-price {
    font-size: 1rem;
    font-weight: 900;
    color: #2a2a2a;
    background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
    padding: 10px 14px;
    border-radius: 10px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    flex-shrink: 0;
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
    text-align: center;
    min-width: 100px;
}

.requested-service-item:hover .requested-service-price {
    background: linear-gradient(135deg, #de0000, #8a0615);
    color: white;
    transform: scale(1.05);
}

.remove-service-btn {
    background: rgba(222, 0, 0, 0.1);
    border: 1px solid rgba(222, 0, 0, 0.3);
    border-radius: 8px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition);
    font-size: 0.9rem;
    color: #2a2a2a;
    flex-shrink: 0;
}

.remove-service-btn:hover {
    background: var(--accent);
    color: white;
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 4px 12px rgba(222, 0, 0, 0.4);
}

.estimate-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
    color: white;
    padding: 18px 20px;
    border-radius: 12px;
    margin: 20px 0;
    font-size: 1.1rem;
    font-weight: 700;
    border: 1px solid rgba(222, 0, 0, 0.3);
    box-shadow: var(--shadow-md);
}

#totalAmount {
    color: #ffffff;
    font-size: 1.3rem;
    font-weight: 900;
    background: linear-gradient(135deg, #de0000, #8a0615);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 2px 8px rgba(222, 0, 0, 0.3);
}

/* ========== ENHANCED CONVERSATIONAL INTAKE STYLES ========== */
.conversational-intake {
    margin: 20px 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 248, 248, 0.95) 100%);
    border: 2px solid rgba(169, 169, 169, 0.3);
    border-radius: 16px;
    padding: 20px;
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(10px);
}

/* Progress Indicator - Sliding Dots */
.progress-indicator {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-bottom: 25px;
    padding: 10px 0;
    position: relative;
}

.progress-indicator::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 15%;
    right: 15%;
    height: 2px;
    background: linear-gradient(90deg, #de0000, #8a0615, #de0000);
    transform: translateY(-50%);
    z-index: 1;
}

.progress-dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: #c0c0c0;
    border: 2px solid #8a8a8a;
    position: relative;
    z-index: 2;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.progress-dot.active {
    background: #de0000;
    border-color: #8a0615;
    transform: scale(1.3);
    box-shadow: 0 0 0 3px rgba(222, 0, 0, 0.2);
}

.progress-dot.completed {
    background: #8a0615;
    border-color: #de0000;
    transform: scale(1.2);
}

.progress-dot:hover:not(.active) {
    background: #a8a8a8;
    transform: scale(1.1);
}

/* Current Step Indicator */
.current-step-indicator {
    position: absolute;
    top: 50%;
    left: 15%;
    height: 2px;
    background: linear-gradient(90deg, #de0000, #ff0000);
    z-index: 1;
    transition: all 0.4s ease;
    transform: translateY(-50%);
}

/* Question Container - Redesigned */
.question-container {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 250, 250, 0.9) 100%);
    border: 2px solid rgba(222, 0, 0, 0.15);
    border-radius: 12px;
    padding: 25px;
    margin: 20px 0;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    position: relative;
    overflow: hidden;
}

.question-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 5px;
    height: 100%;
    background: linear-gradient(180deg, #de0000 0%, #8a0615 100%);
}

.question-text {
    font-size: 1.2rem;
    font-weight: 800;
    color: #2a2a2a;
    line-height: 1.4;
    margin-bottom: 20px;
    padding-left: 10px;
    position: relative;
}

.question-text::before {
    content: 'Q:';
    position: absolute;
    left: -5px;
    color: #de0000;
    font-weight: 900;
}

/* Enhanced Options Grid */
.options-grid-conversational {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
    margin: 20px 0;
}

.conversation-option-btn {
    background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    padding: 18px 20px;
    font-size: 1rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    color: #2a2a2a;
    font-weight: 600;
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.conversation-option-btn:hover {
    background: linear-gradient(135deg, #f0f0f0 0%, #e8e8e8 100%);
    border-color: #de0000;
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(222, 0, 0, 0.1);
    color: #de0000;
}

.conversation-option-btn.selected {
    background: linear-gradient(135deg, #de0000 0%, #8a0615 100%);
    color: white;
    border-color: #de0000;
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 20px rgba(222, 0, 0, 0.2);
}

.conversation-option-btn.selected::after {
    content: '‚úì';
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.9);
}

.conversation-option-btn:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
}

.conversation-option-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(222, 0, 0, 0.1), transparent);
    transition: left 0.6s ease;
}

.conversation-option-btn:hover::before {
    left: 100%;
}

/* Mini Back Button */
.mini-back-button {
    background: rgba(169, 169, 169, 0.15);
    border: 1px solid rgba(169, 169, 169, 0.3);
    border-radius: 8px;
    padding: 8px 15px;
    font-size: 0.85rem;
    font-weight: 600;
    color: #666;
    cursor: pointer;
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    opacity: 0;
    visibility: hidden;
    position: relative;
    overflow: hidden;
}

.mini-back-button.visible {
    opacity: 1;
    visibility: visible;
    animation: slideInFromLeft 0.3s ease;
}

.mini-back-button::before {
    content: '‚Üê';
    font-weight: bold;
}

.mini-back-button:hover:not(:disabled) {
    background: rgba(169, 169, 169, 0.25);
    color: #2a2a2a;
    transform: translateX(-2px);
    border-color: rgba(222, 0, 0, 0.3);
}

.mini-back-button:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

/* Question Counter */
.question-counter {
    font-size: 0.9rem;
    color: #666;
    font-weight: 600;
    text-align: center;
    margin-top: 10px;
    padding: 8px 0;
    background: rgba(0, 0, 0, 0.03);
    border-radius: 8px;
    border: 1px solid rgba(0, 0, 0, 0.05);
}

/* Summary View */
.summary-view {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 250, 250, 0.9) 100%);
    border: 2px solid rgba(222, 0, 0, 0.15);
    border-radius: 12px;
    padding: 25px;
    margin: 20px 0;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    animation: fadeIn 0.4s ease;
}

.summary-title {
    font-size: 1.3rem;
    font-weight: 800;
    color: #2a2a2a;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(222, 0, 0, 0.1);
    display: flex;
    align-items: center;
    gap: 10px;
}

.summary-title::before {
    content: 'üìã';
    font-size: 1.2rem;
}

.summary-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 25px;
}

.summary-item {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 15px;
    padding: 18px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 250, 250, 0.9) 100%);
    border: 1px solid rgba(169, 169, 169, 0.2);
    border-radius: 10px;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
}

.summary-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, #de0000 0%, #8a0615 100%);
}

.summary-item:hover {
    border-color: rgba(222, 0, 0, 0.3);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.summary-question {
    font-size: 1rem;
    font-weight: 700;
    color: #2a2a2a;
    line-height: 1.1;
    margin-bottom: 8px;
}

.summary-answer {
    font-size: 0.95rem;
    color: #666;
    font-weight: 600;
    line-height: 1.3;
    background: rgba(222, 0, 0, 0.05);
    padding: 20px 55px;
    border-radius: 8px;
    border-left: 3px solid var(--accent);
}

.summary-edit-btn {
    background: rgba(222, 0, 0, 0.1);
    border: 1px solid rgba(222, 0, 0, 0.3);
    border-radius: 8px;
    padding: 2px 2px;
    font-size: 0.85rem;
    font-weight: 600;
    color: #2a2a2a;
    margin: 0;
    cursor: pointer;
    transition: var(--transition);
    display: inline-block;
    align-items: start;
    gap: 0;
    white-space: nowrap;
}

.summary-edit-btn:hover {
    background: var(--accent);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(222, 0, 0, 0.2);
}

/* Summary Action Buttons */
.summary-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    margin-top: 25px;
    padding-top: 20px;
    border-top: 2px solid rgba(222, 0, 0, 0.1);
}

.summary-back-btn {
    background: rgba(169, 169, 169, 0.15);
    border: 1px solid rgba(169, 169, 169, 0.3);
    border-radius: 8px;
    padding: 12px 20px;
    font-size: 0.9rem;
    font-weight: 600;
    color: #666;
    cursor: pointer;
    transition: all 0.2s ease;
    flex: 1;
}

.summary-back-btn:hover:not(:disabled) {
    background: rgba(169, 169, 169, 0.25);
    color: #2a2a2a;
    transform: translateY(-1px);
}

.summary-back-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.summary-submit-btn {
    background: linear-gradient(135deg, #de0000 0%, #8a0615 100%);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 10px;
    padding: 14px 25px;
    font-size: 1rem;
    font-weight: 700;
    color: white;
    cursor: pointer;
    transition: var(--transition);
    flex: 2;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 4px 15px rgba(222, 0, 0, 0.3);
}

.summary-submit-btn:hover {
    background: linear-gradient(135deg, #8a0615 0%, #de0000 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(222, 0, 0, 0.4);
}

.summary-submit-btn:active {
    transform: translateY(0);
}

/* ========== ACTION BUTTONS ========== */
.action-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    padding: 0;
    margin: 20px 0 0 0;
}

.clear-all-btn {
    background: linear-gradient(135deg, #666 0%, #8a8a8a 100%);
    color: white;
    border: none;
    padding: 14px 16px;
    border-radius: 10px;
    font-weight: 700;
    cursor: pointer;
    transition: var(--transition);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
}

.clear-all-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
}

.clear-all-btn:hover::before {
    left: 100%;
}

.clear-all-btn:hover {
    background: linear-gradient(135deg, #8a8a8a 0%, #666 100%);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.book-more-button {
    background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
    font-weight: 700;
    color: #2a2a2a;
    border: 2px solid rgba(222, 0, 0, 0.2);
    box-shadow: var(--shadow-sm);
    padding: 14px 16px;
    font-size: 0.9rem;
    cursor: pointer;
    border-radius: 10px;
    transition: var(--transition);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.book-more-button:hover {
    background: linear-gradient(135deg, #f8f8f8 0%, #ffffff 100%);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--accent);
    color: var(--accent);
}

.checkout-button {
    background: radial-gradient(circle, transparent 5%, #de0000 40%, #8a0615 60%, #8a0615 90%);
    font-weight: 800;
    color: #fff;
    border: 2px solid rgba(255, 255, 255, 0.3);
    padding: 16px 20px;
    font-size: 1rem;
    border-radius: 10px;
    cursor: pointer;
    transition: var(--transition);
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-md);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
    grid-column: 1 / -1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.checkout-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
}

.checkout-button:hover::before {
    left: 100%;
}

.checkout-button:hover {
    background: radial-gradient(circle, #de0000 5%, #8a0615 40%, #de0000 60%, transparent 90%);
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 20px rgba(222, 0, 0, 0.4);
    border-color: rgba(255, 255, 255, 0.5);
}

.back-button {
    background: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--accent);
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    font-weight: 300;
    font-size: small;
    cursor: pointer;
    transition: all 0.2s ease;
    display: block;
    margin-top: 1rem;
}

.back-button:hover {
    background: rgba(222, 0, 0, 0.1);
    transform: translateY(-2px);
}

.back-button::before {
    content: "‚Üê";
    margin-right: 0.5rem;
}

/* ========== INVOICE CARD ========== */
.card-invoices {
    display: block;
    border: 1px outset rgba(0, 0, 0, .75);
    background: rgba(255, 255, 255, 1);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    text-align: center;
    padding: 20px;
    margin: 15px auto;
    overflow: hidden;
    box-sizing: border-box;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: var(--transition);
}

.card-invoices h1 {
    color: #000;
    font-size: 5vw;
}

.card-invoices p {
    color: #666;
}

.client-login {
    background: radial-gradient(circle, #454545 5%, #de0000 40%, #8a0615 60%, #8a0615 90%);
    font-weight: 700;
    color: #fff;
    border: 2px solid rgba(255, 255, 255, 0.3);
    padding: 1rem 2rem;
    font-size: 16px;
    margin-top: 1rem;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
    justify: center;
}

.client-login::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), #de0000);
    transition: left 0.6s ease;
}

.client-login:hover::before {
    left: 100%;
}

.client-login:hover {
    background: linear-gradient(135deg, #454545 0%, #8a0615 40%, #de0000 60%, #de0000 100%);
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(222, 0, 0, 0.4);
    border-color: rgba(255, 255, 255, 0.5);
}

/* ========== FOOTER ========== */
footer {
    display: flex;
    font-weight: 700;
    color: #FFF;
    text-align: middle;
    justify-content: center;
    margin-top: 4rem;
}

footer a {
    font-size: 10px;
    margin: 2% 2%;
    color: #fff;
    font-weight: 700;
}

/* ========== INVOICE OVERLAYS & MODALS ========== */
.invoiceOverlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(12px);
    display: none;
    z-index: 2147483647;
    transform: none !important;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    animation: fadeIn 0.3s ease;
}

.invoice-content {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 248, 248, 0.95) 100%);
    color: #2a2a2a;
    border-radius: 16px;
    border: 2px solid rgba(169, 169, 169, 0.3);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 450px;
    position: relative;
    animation: invoiceSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.invoice-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--accent), #8a0615, var(--accent));
    box-shadow: 0 2px 8px rgba(222, 0, 0, 0.4);
}

.invoice-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    border-bottom: 2px solid rgba(222, 0, 0, 0.1);
    background: rgba(255, 255, 255, 0.95);
}

.invoice-title {
    margin: 0;
    font-size: 1.3rem;
    font-weight: 800;
    color: #2a2a2a;
    text-align: center;
}

.close-btn {
    background: rgba(222, 0, 0, 0.1);
    border: 1px solid rgba(222, 0, 0, 0.3);
    border-radius: 8px;
    color: #2a2a2a;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition);
    font-size: 1rem;
    font-weight: bold;
}

.close-btn:hover {
    background: var(--accent);
    color: white;
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 4px 12px rgba(222, 0, 0, 0.4);
}

.service-list {
    padding: 1.5rem;
    flex: 1;
    overflow-y: auto;
    max-height: 400px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.invoice-service-item {
    display: grid;
    grid-template-columns: 60px 1fr auto auto;
    gap: 16px;
    align-items: center;
    padding: 18px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 250, 250, 0.9) 100%);
    border: 1px solid rgba(169, 169, 169, 0.2);
    border-radius: 12px;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
}

.invoice-service-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(222, 0, 0, 0.05), transparent);
    transition: left 0.6s ease;
}

.invoice-service-item:hover::before {
    left: 100%;
}

.invoice-service-item:hover {
    border-color: rgba(222, 0, 0, 0.3);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.invoice-service-icon {
    font-size: 1.2rem;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--primary) 0%, #165165 100%);
    border-radius: 12px;
    flex-shrink: 1;
    box-shadow: var(--shadow-md);
    transition: var(--transition);
}

.invoice-service-item:hover .invoice-service-icon {
    transform: scale(1.05);
    background: linear-gradient(135deg, var(--accent) 0%, #8a0615 100%);
}

.invoice-service-text {
    flex: 1;
    min-width: 0;
}

.invoice-service-text h4 {
    margin: 0 0 6px 0;
    font-size: 1.1rem;
    font-weight: 800;
    color: #2a2a2a;
    line-height: 1.2;
}

.invoice-service-detail {
    font-size: 0.9rem;
    color: #666;
    font-weight: 600;
    margin-bottom: 8px;
}

.invoice-service-notes {
    font-size: 0.8rem;
    color: #666;
    background: rgba(0, 0, 0, 0.03);
    padding: 8px 16px;
    border-radius: 8px;
    border-left: 3px solid var(--accent);
    line-height: 1.4;
    max-height: 60px;
    max-width: auto;
    overflow-y: auto;
    overflow-x: auto;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

.invoice-service-price {
    font-size: 1rem;
    font-weight: 900;
    color: #2a2a2a;
    background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
    padding: 10px 14px;
    border-radius: 10px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    flex-shrink: 0;
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
    text-align: center;
    min-width: 100px;
}

.invoice-service-item:hover .invoice-service-price {
    background: linear-gradient(135deg, #de0000, #8a0615);
    color: white;
    transform: scale(1.05);
}

.invoice-remove-service-btn {
    background: rgba(222, 0, 0, 0.1);
    border: 1px solid rgba(222, 0, 0, 0.3);
    border-radius: 8px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition);
    font-size: 0.9rem;
    color: #2a2a2a;
    flex-shrink: 0;
}

.invoice-remove-service-btn:hover {
    background: var(--accent);
    color: white;
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 4px 12px rgba(222, 0, 0, 0.4);
}

.summary-section {
    padding: 1.5rem;
    border-top: 2px solid rgba(222, 0, 0, 0.1);
    background: rgba(255, 255, 255, 0.95);
}

.subtotal {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
    color: white;
    padding: 16px 20px;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 700;
    border: 1px solid rgba(222, 0, 0, 0.3);
    box-shadow: var(--shadow-md);
}

#invoiceTotal {
    color: #ffffff;
    font-size: 1.3rem;
    font-weight: 900;
    background: linear-gradient(135deg, #de0000, #8a0615);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 2px 8px rgba(222, 0, 0, 0.3);
}

.invoice-action-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    padding: 1.5rem;
    margin: 0;
}

/* ========== ANIMATIONS & EFFECTS ========== */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes invoiceSlideIn {
    from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes popIn {
    from {
        opacity: 0;
        transform: scale(0.5);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes tapAnimation {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(0.92);
    }
    100% {
        transform: scale(1);
    }
}

@keyframes pulse {
    0% {
        transform: scale(1);
        box-shadow: var(--shadow-md);
    }
    50% {
        transform: scale(1.05);
        box-shadow: var(--shadow-lg);
    }
    100% {
        transform: scale(1);
        box-shadow: var(--shadow-md);
    }
}

@keyframes shake {
    0%, 100% {
        transform: translateX(0);
    }
    20%, 60% {
        transform: translateX(-5px);
    }
    40%, 80% {
        transform: translateX(5px);
    }
}

@keyframes lightUpItem {
    0% {
        opacity: 0.3;
        background: rgba(255, 255, 255, 0.5);
        transform: scale(0.9);
        box-shadow:
            0 0 0 rgba(255, 255, 255, 0),
            inset 0 0 0 rgba(255, 255, 255, 0);
    }
    50% {
        opacity: 0.8;
        background: radial-gradient(circle at 30% 30%, #ffffff 0%, #f0f0f0 30%, #e0e0e0 70%);
        transform: scale(1.05);
        box-shadow:
            0 0 20px rgba(255, 255, 255, 0.8),
            0 0 40px rgba(255, 215, 0, 0.6),
            inset 0 0 10px rgba(255, 255, 255, 0.5);
    }
    100% {
        opacity: 1;
        background: radial-gradient(circle at 10% 60%, #c0c0c0 0%, #FFF 40%, #FFF 60%, #c0c0c0 90%);
        transform: scale(1);
        box-shadow: var(--shadow-sm);
    }
}

@keyframes itemPulse {
    0%, 100% {
        box-shadow:
            0 2px 8px rgba(0, 0, 0, 0.1),
            0 0 5px rgba(255, 255, 255, 0.2);
    }
    50% {
        box-shadow:
            0 4px 12px rgba(0, 0, 0, 0.15),
            0 0 10px rgba(255, 255, 255, 0.3);
    }
}

@keyframes itemGlow {
    0%, 100% {
        border-color: rgba(50, 0, 0, 0.3);
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.2);
    }
    33% {
        border-color: rgba(255, 0, 0, 0.5);
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.4),
            0 0 25px rgba(200, 0, 0, 0.2);
    }
    66% {
        border-color: rgba(100, 0, 0, 0.7);
        box-shadow: 0 0 5px rgba(100, 0, 0, 0.3);
    }
}

@keyframes progressFill {
    0% {
        width: 0%;
        opacity: 1;
        background: linear-gradient(90deg,
                rgba(255, 0, 0, 0.95) 0%,
                rgba(255, 50, 50, 0.9) 25%,
                rgba(255, 100, 100, 0.85) 50%,
                rgba(255, 150, 150, 0.8) 75%,
                rgba(255, 200, 200, 0.75) 100%
            );
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
    }
    25% {
        width: 25%;
        opacity: 1;
        background: linear-gradient(90deg,
                rgba(255, 0, 0, 0.95),
                rgba(255, 50, 50, 0.9));
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.8);
    }
    50% {
        width: 50%;
        opacity: 1;
        background: linear-gradient(90deg,
                rgba(255, 0, 0, 0.95),
                rgba(255, 50, 50, 0.9),
                rgba(255, 100, 100, 0.85));
        box-shadow: 0 0 20px rgba(255, 0, 0, 0.9);
    }
    75% {
        width: 75%;
        opacity: 1;
        background: linear-gradient(90deg,
                rgba(255, 0, 0, 0.95),
                rgba(255, 50, 50, 0.9),
                rgba(255, 100, 100, 0.85),
                rgba(255, 150, 150, 0.8));
        box-shadow: 0 0 25px rgba(255, 0, 0, 1);
    }
    100% {
        width: 100%;
        opacity: 0;
        background: linear-gradient(90deg,
                rgba(255, 0, 0, 0.95),
                rgba(255, 50, 50, 0.9),
                rgba(255, 100, 100, 0.85),
                rgba(255, 150, 150, 0.8),
                rgba(255, 200, 200, 0.75));
        box-shadow: 0 0 30px rgba(255, 0, 0, 1);
    }
}

@keyframes sparkleTrail {
    0% {
        left: -100%;
        opacity: 0;
        filter: blur(0.5px) brightness(1.5) drop-shadow(0 0 5px rgba(255, 0, 0, 0.8));
    }
    20% {
        opacity: 1;
        filter: blur(0.8px) brightness(2) drop-shadow(0 0 10px rgba(255, 0, 0, 1));
    }
    50% {
        opacity: 1;
        filter: blur(1px) brightness(2.5) drop-shadow(0 0 15px rgba(255, 0, 0, 1));
        box-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
        contact-toolbar.active
    }
    80% {
        opacity: 0.9;
        filter: blur(1.2px) brightness(2) drop-shadow(0 0 10px rgba(255, 0, 0, 0.8));
    }
    100% {
        left: 100%;
        opacity: 0;
        filter: blur(1.5px) brightness(1.5) drop-shadow(0 0 5px rgba(255, 0, 0, 0.5));
    }
}

@keyframes itemSparkle {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
        filter: brightness(1.5);
    }
    50% {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 1;
        filter: brightness(1.2);
    }
    100% {
        transform: translate(-50%, -50%) scale(2);
        opacity: 0;
        filter: brightness(0.8);
    }
}

@keyframes enhancedHover {
    0% {
        transform: translateY(0) scale(1);
    }
    50% {
        transform: translateY(-3px) scale(1.05);
    }
    100% {
        transform: translateY(-3px) scale(1.05);
    }
}

@keyframes contactStarSpin {
    from {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
    }
    to {
        transform: translate(-50%, -50%) scale(1) rotate(360deg);
    }
}

@keyframes contactStarSpinReverse {
    from {
        transform: translate(-50%, -50%) scale(1) rotate(360deg);
    }
    to {
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
    }
}

@keyframes contactStarPulse {
    0%, 100% {
        opacity: 0.7;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0.9;
        transform: translate(-50%, -50%) scale(1.1);
    }
}

@keyframes contactStarGlitter {
    0%, 100% {
        filter: blur(0.5px) drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
    }
    33% {
        filter: blur(0.5px) drop-shadow(0 0 12px rgba(255, 255, 255, 0.8)) drop-shadow(0 0 8px rgba(255, 215, 0, 0.6));
    }
    66% {
        filter: blur(0.5px) drop-shadow(0 0 10px rgba(255, 215, 0, 0.8)) drop-shadow(0 0 6px rgba(255, 255, 255, 0.6));
    }
}

@keyframes contactInnerShimmer {
    0%, 100% {
        opacity: 0.4;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0.8;
        transform: translate(-50%, -50%) scale(1.08);
    }
}

@keyframes contactRingPulse {
    0%, 100% {
        opacity: 0.6;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0.9;
        transform: translate(-50%, -50%) scale(1.05);
    }
}

@keyframes contactSparkleFloat {
    0%, 100% {
        transform: translate(0, 0) scale(1);
        opacity: 0.3;
    }
    25% {
        transform: translate(2px, -2px) scale(1.3);
        opacity: 0.8;
    }
    50% {
        transform: translate(-1px, 1px) scale(1.1);
        opacity: 0.5;
    }
    75% {
        transform: translate(-2px, -1px) scale(1.4);
        opacity: 0.9;
    }
}

@keyframes starSpin {
    from {
        transform: translate(-50%, -50%) rotate(0deg);
    }
    to {
        transform: translate(-50%, -50%) rotate(360deg);
    }
}

@keyframes starSpinReverse {
    from {
        transform: translate(-50%, -50%) rotate(360deg);
    }
    to {
        transform: translate(-50%, -50%) rotate(0deg);
    }
}

@keyframes starPulse {
    0%, 100% {
        opacity: 0.7;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0.9;
        transform: translate(-50%, -50%) scale(1.08);
    }
}

@keyframes starGlitter {
    0%, 100% {
        filter:
            blur(0.5px) drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
    }
    33% {
        filter:
            blur(0.5px) drop-shadow(0 0 15px rgba(255, 255, 255, 0.8)) drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
    }
    66% {
        filter:
            blur(0.5px) drop-shadow(0 0 12px rgba(255, 215, 0, 0.8)) drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
    }
}

@keyframes innerShimmer {
    0%, 100% {
        opacity: 0.4;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0.7;
        transform: translate(-50%, -50%) scale(1.05);
    }
}

@keyframes ringPulse {
    0%, 100% {
        opacity: 0.6;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0.9;
        transform: translate(-50%, -50%) scale(1.05);
    }
}

@keyframes sparkleFloat {
    0%, 100% {
        transform: translate(0, 0) scale(1);
        opacity: 0.3;
    }
    25% {
        transform: translate(3px, -3px) scale(1.3);
        opacity: 0.8;
    }
    50% {
        transform: translate(-2px, 2px) scale(1.1);
        opacity: 0.5;
    }
    75% {
        transform: translate(-3px, -2px) scale(1.4);
        opacity: 0.9;
    }
}

@keyframes badgePulse {
    0%, 100% {
        box-shadow:
            0 3px 10px rgba(138, 6, 21, 0.5),
            0 0 0 2px #ffffff,
            0 0 0 3px rgba(255, 215, 0, 0.9),
            inset 0 1px 1px rgba(255, 255, 255, 0.5);
    }
    50% {
        box-shadow:
            0 4px 15px rgba(138, 6, 21, 0.7),
            0 0 0 2px #ffffff,
            0 0 0 3px rgba(255, 215, 0, 1),
            0 0 20px rgba(255, 215, 0, 0.6),
            inset 0 1px 2px rgba(255, 255, 255, 0.8);
    }
}

@keyframes badgeShine {
    0%, 100% {
        background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
    }
    50% {
        background: linear-gradient(135deg, #ffed4e 0%, #ffd700 100%);
    }
}

@keyframes cartFabAppear {
    from {
        opacity: 0;
        transform: scale(0.5) translateY(20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes cartFabDisappear {
    to {
        opacity: 0;
        transform: scale(0.5) translateY(20px);
    }
}

/* New animations for conversational intake */
@keyframes slideInFromLeft {
    from {
        opacity: 0;
        transform: translateX(-10px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes pulseDot {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(222, 0, 0, 0.7);
    }
    70% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(222, 0, 0, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(222, 0, 0, 0);
    }
}

.tap-animate {
    animation: tapAnimation 0.3s ease;
}

.pulse-animate {
    animation: pulse 2s infinite;
}

.shake-animate {
    animation: shake 0.5s ease;
}

.progress-dot.pulse {
    animation: pulseDot 1.5s infinite;
}

/* ========== RESPONSIVE ADJUSTMENTS ========== */
/* Extra Small Devices (iPhone 5/SE, 320px and down) */
@media (max-width: 320px) {
    body {
        padding: 5px;
    }

    .qrc_page_inner {
        padding: 1px;
    }

    #categories-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 4px;
    }

    .category-tile {
        padding: 10px 4px;
    }

    .category-tile h2 {
        font-size: 0.75rem;
        line-height: 1.2;
    }

    .category-icon {
        font-size: 1.5rem;
        margin-bottom: 4px;
    }

    .action-buttons {
        gap: 0.6rem;
        padding: 0.6rem;
    }

    .clear-all-btn,
    .book-more-button,
    .checkout-button {
        padding: 0.8rem 1rem;
        font-size: 0.8rem;
        min-height: 45px;
    }

    .invoice-content {
        margin: 1%;
        width: 98%;
    }

    .service-item-grid {
        grid-template-columns: 1fr;
        gap: 5px;
    }

    .service-item-card {
        min-height: 100px;
        padding: 0.4rem;
    }

    .service-item-card h4 {
        font-size: 0.75rem;
    }

    .service-item-card p {
        font-size: 0.55rem;
    }
    
    /* Conversational intake mobile adjustments */
    .conversational-intake {
        padding: 15px;
    }
    
    .question-container {
        padding: 20px 15px;
    }
    
    .question-text {
        font-size: 1.1rem;
        margin-bottom: 15px;
    }
    
    .options-grid-conversational {
        grid-template-columns: 1fr;
        gap: 10px;
    }
    
    .conversation-option-btn {
        padding: 16px;
        font-size: 0.95rem;
    }
    
    .summary-view {
        padding: 50px 15px;
    }
    
    .summary-item {
        grid-template-columns: 2fr;
        gap: 10px;
        padding: 15px;
    }
    
    .summary-edit-btn {
        justify-self: start;
    }
    
    .summary-actions {
        flex-direction: bottom;
        gap: 10px;
    }
    
    .summary-back-btn,
    .summary-submit-btn {
        width: 100%;
    }
    
    .progress-dot {
        width: 12px;
        height: 12px;
    }
    
    .progress-indicator::before {
        left: 10%;
        right: 10%;
    }
}

/* Small devices (phones, 480px and down) */
@media (max-width: 480px) {
    body {
        padding: 8px;
    }

    .qrc_page_inner {
        padding: 2px;
        padding-bottom: 80px;
    }

    #categories-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 6px;
        margin: 10px auto;
    }

    .category-tile {
        padding: 12px 6px;
    }

    .category-tile h2 {
        font-size: 0.85rem;
    }

    .category-icon {
        font-size: 1.8rem;
        margin-bottom: 6px;
    }

    #serviceRequestContainer,
    #servicedetailsContainer {
        padding: 10px;
        margin: 6px auto;
        width: calc(100% - 2px);
    }

    .service-item-grid {
        gap: 6px;
    }

    .service-item-card {
        padding: 0.5rem;
        min-height: 110px;
        border-radius: 8px;
    }

    .service-item-card h4 {
        font-size: 0.8rem;
        margin: 0.25rem 0;
        -webkit-line-clamp: 2;
    }

    .service-item-card p {
        font-size: 0.6rem;
        margin: 0.15rem 0;
        -webkit-line-clamp: 2;
    }

    .service-price {
        font-size: 0.7rem;
        padding: 0.25rem 0.4rem;
        margin: 0.15rem 0;
    }

    .service-item-icon {
        font-size: 1.4rem;
        margin-bottom: 0.15rem;
    }

    #serviceRequestSection {
        padding: 12px;
        margin: 10px auto;
    }

    #serviceRequestList {
        padding: 10px;
        gap: 8px;
    }

    .requested-service-item {
        grid-template-columns: 50px 1fr;
        gap: 12px;
        padding: 16px;
    }

    .requested-service-icon {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
        grid-row: 1 / 3;
    }

    .requested-service-price {
        grid-column: 2;
        justify-self: start;
        font-size: 0.9rem;
        padding: 8px 12px;
        min-width: 80px;
    }

    .remove-service-btn {
        grid-column: 2;
        justify-self: end;
        width: 36px;
        height: 36px;
        font-size: 0.8rem;
    }

    .requested-service-text h4 {
        font-size: 0.95rem;
        margin-bottom: 4px;
    }

    .service-detail {
        font-size: 0.8rem;
        margin-bottom: 6px;
    }

    .service-notes {
        font-size: 0.75rem;
        padding: 6px 10px;
        max-height: 50px;
        grid-column: 1 / -1;
    }

    .estimate-total {
        padding: 14px 16px;
        margin: 16px 0;
        font-size: 1rem;
        flex-direction: column;
        gap: 0.5rem;
        text-align: center;
    }

    #totalAmount {
        font-size: 1.1rem;
    }

    .action-buttons {
        grid-template-columns: 1fr;
        gap: 10px;
        margin: 16px 0 0 0;
    }

    .clear-all-btn,
    .book-more-button,
    .checkout-button {
        padding: 12px 14px;
        font-size: 0.85rem;
        border-radius: 8px;
        min-height: 48px;
    }

    .checkout-button {
        font-size: 0.95rem;
        order: -1;
    }

    .invoice-content {
        margin: 2%;
        width: 96%;
        max-height: 85vh;
    }

    .invoice-header {
        padding: 1rem;
    }

    .invoice-title {
        font-size: 1.2rem;
    }

    .close-btn {
        width: 32px;
        height: 32px;
        top: 1rem;
        right: 1rem;
    }

    .service-list {
        padding: 1rem;
        max-height: 300px;
    }

    .invoice-service-item {
        grid-template-columns: 50px 1fr;
        gap: 12px;
        padding: 16px;
    }

    .invoice-service-icon {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
        grid-row: 1 / 3;
    }

    .invoice-service-price {
        grid-column: 2;
        justify-self: start;
        font-size: 0.9rem;
        padding: 8px 12px;
        min-width: 80px;
    }

    .invoice-remove-service-btn {
        grid-column: 2;
        justify-self: end;
        width: 36px;
        height: 36px;
        font-size: 0.8rem;
    }

    .invoice-service-text h4 {
        font-size: 0.95rem;
        margin-bottom: 4px;
    }

    .invoice-service-detail {
        font-size: 0.8rem;
        margin-bottom: 6px;
    }

    .invoice-service-notes {
        font-size: 0.75rem;
        padding: 6px 10px;
        max-height: 50px;
        grid-column: 1 / -1;
    }

    .summary-section {
        padding: 1rem;
    }

    .subtotal {
        font-size: 1rem;
        flex-direction: column;
        gap: 0.5rem;
        text-align: center;
    }

    #invoiceTotal {
        font-size: 1.3rem;
    }

    .invoice-action-buttons {
        grid-template-columns: 1fr;
        gap: 10px;
        padding: 1rem;
    }

    .contact-button {
        padding: 6px 10px;
        font-size: 0.75rem;
        min-width: 56px;
        min-height: 32px;
    }

    .contact-button::before {
        width: 3.2rem;
        height: 3.2rem;
    }

    .contact-button::after {
        width: 2.6rem;
        height: 2.6rem;
    }

    .contact-button .contact-glow-ring {
        width: 3.5rem;
        height: 3.5rem;
    }

    .contact-button:hover {
        transform: scale(1.1) rotate(5deg);
    }

    .contact-toolbar {
        padding: 8px 4px;
    }

    .contact-toolbar-item {
        padding: 8px 10px;
        min-width: 55px;
    }

    .contact-toolbar-icon {
        font-size: 1.4rem;
        margin-bottom: 4px;
    }

    .contact-toolbar-label {
        font-size: 0.65rem;
    }

    .highlight-box {
        padding: 10px 12px;
        gap: 1%;
    }

    .thandylogo {
        max-height: 2.5rem;
    }

    .tom_kongerslev img {
        max-height: 30px;
    }

    .details-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.6rem;
        padding: 1rem;
    }

    .detail-card {
        padding: 0.8rem 0.4rem;
        font-size: 0.8rem;
    }

    .furniture-selection-section {
        margin: 1rem 0;
    }

    .radio-group {
        flex-direction: column;
        gap: 0.8rem;
    }

    .furniture-item-selection {
        flex-direction: column;
        align-items: stretch;
        gap: 0.8rem;
    }

    .furniture-item-selection select {
        min-width: auto;
        width: 100%;
    }

    .selected-furniture-list {
        max-height: 150px;
    }

    .selected-furniture-list li {
        padding: 0.7rem 0.9rem;
        font-size: 0.8rem;
    }

    .cartFab {
        padding: 6px 10px;
        min-width: 52px;
        min-height: 52px;
        border-radius: 14px;
    }

    .cartFab::before {
        width: 3.8rem;
        height: 3.8rem;
        animation-duration: 12s, 3s, 2s;
    }

    .cartFab::after {
        width: 3.2rem;
        height: 3.2rem;
        animation-duration: 16s, 4s;
    }

    .cartFab .glow-ring {
        width: 4rem;
        height: 4rem;
    }

    .cartFab img {
        width: 1.8rem;
        height: 1.8rem;
    }

    #fabCartCount {
        top: -5px;
        right: -5px;
        font-size: 0.65rem;
        min-width: 20px;
        height: 20px;
        padding: 2px 5px;
    }

    /* Conversational intake mobile adjustments */
    .conversational-intake {
        padding: 15px;
    }
    
    .question-container {
        padding: 20px 15px;
    }
    
    .question-text {
        font-size: 1.1rem;
        margin-bottom: 15px;
    }
    
    .options-grid-conversational {
        grid-template-columns: 1fr;
        gap: 10px;
    }
    
    .conversation-option-btn {
        padding: 16px;
        font-size: 0.95rem;
    }
    
    .summary-view {
        padding: 20px 15px;
    }
    
    .summary-item {
        grid-template-columns: 1fr;
        gap: 10px;
        padding: 15px;
    }
    
    .summary-edit-btn {
        justify-self: start;
    }
    
    .summary-actions {
        flex-direction: column;
        gap: 10px;
    }
    
    .summary-back-btn,
    .summary-submit-btn {
        width: 100%;
    }
    
    .progress-dot {
        width: 12px;
        height: 12px;
    }
    
    .progress-indicator::before {
        left: 10%;
        right: 10%;
    }
}

/* Medium devices (tablets, 768px and down) */
@media (max-width: 768px) {
    body {
        padding: 8px;
    }

    .qrc_page_inner {
        padding: 2px;
        padding-bottom: 80px;
    }

    .header {
        padding: 10px;
        margin: 8px;
    }

    .header h1 {
        font-size: 1rem;
    }

    .contact-button::before {
        width: 3.6rem;
        height: 3.6rem;
    }

    .contact-button::after {
        width: 3rem;
        height: 3rem;
    }

    .contact-button .contact-glow-ring {
        width: 4rem;
        height: 4rem;
    }

    .contact-button .contact-sparkle {
        width: 2px;
        height: 2px;
    }

    .contact-button:hover {
        transform: scale(1.15) rotate(5deg);
    }

    .contact-toolbar {
        padding: 8px 4px;
    }

    .contact-toolbar-item {
        padding: 8px 10px;
        min-width: 55px;
    }

    .contact-toolbar-icon {
        font-size: 1.4rem;
        margin-bottom: 4px;
    }

    .contact-toolbar-label {
        font-size: 0.65rem;
    }

    .cartFab {
        padding: 8px 12px;
        min-width: 58px;
        min-height: 58px;
    }

    .cartFab::before {
        width: 4.2rem;
        height: 4.2rem;
    }

    .cartFab::after {
        width: 3.6rem;
        height: 3.6rem;
    }

    .cartFab .glow-ring {
        width: 4.6rem;
        height: 4.6rem;
    }

    .cartFab img {
        width: 2.1rem;
        height: 2.1rem;
    }

    #fabCartCount {
        top: -6px;
        right: -6px;
        font-size: 0.7rem;
        min-width: 22px;
        height: 22px;
        padding: 3px 6px;
    }

    .cartFab .sparkle {
        width: 3px;
        height: 3px;
    }
}</style>
</head>

<body style="font-family:Roboto">
    <div class="pg_background" style="background-image:url(https://github.com/tommichael88/booktomnyc/blob/main/images/booktomnyc_bg.jpg?raw=true)"></div>
    <div class="qrc_page_inner">
        <div class="section qrc_gallery"></div>
        <div class="qrc_gallery_wrapper">
            <div class="qrc_gallery_list">
                <div class="profile-image-container"><img class="profile-image" src="https://tommichael88.github.io/booktomnyc/images/TomKongerslev_nobg.png?raw=true" alt="Profile Image"></div><span class="highlight-box"><img class="thandylogo" src="https://raw.githubusercontent.com/tommichael88/booktomnyc/refs/heads/main/images/TomsHandyTech_logo_today_lowres_nobg.png" alt="HandyTech logo">
                    <div class="tom_kongerslev"><img src="https://tommichael88.github.io/booktomnyc/images/tmk_ai_signature_2b2.png?raw=true" alt="Tom Kongerslev signature"></div><button id="contactBtn" class="contact-button" aria-controls="contactToolbar" aria-expanded="false">ùó∞ùóºùóªùòÅùóÆùó∞ùòÅ‚â£
                        <!-- Glow ring -->
                        <div class="contact-glow-ring"></div>
                        <!-- Sparkle particles -->
                        <span class="contact-sparkle"></span>
                        <span class="contact-sparkle"></span>
                        <span class="contact-sparkle"></span>
                        <span class="contact-sparkle"></span>
                    </button>
                </span>
                <!-- Contact Toolbar -->
                <div id="contactToolbar" class="contact-toolbar" role="menu" tabindex="-1">
                    <a href="#" class="contact-toolbar-item contact-mail" data-email="Ym9va3RvbUBpY2xvdWQuY29t" aria-label="Email" role="menuitem">
                        <div class="contact-toolbar-icon">@</div>
                        <div class="contact-toolbar-label"></div>
                    </a>
                    <a href="#" class="contact-toolbar-item contact-phone" data-phone="+19292563252" aria-label="Call" role="menuitem">
                        <div class="contact-toolbar-icon">üìû</div>
                        <div class="contact-toolbar-label"></div>
                    </a>
                    <a href="#" id="contactCardButton" class="contact-toolbar-item" role="menuitem">
                        <div class="contact-toolbar-icon">
                            <font size="5rem">+</font>ü™™
                        </div>
                        <div class="contact-toolbar-label"></div>
                    </a>
                    <a href="#" class="contact-toolbar-item contact-sms" data-sms="+19292563252" aria-label="SMS" role="menuitem">
                        <div class="contact-toolbar-icon">üí¨</div>
                        <div class="contact-toolbar-label"></div>
                    </a>
                </div>
                <div class="card-schedule-service">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 2.5rem; margin-top: 3rem;">
                        <!-- Calendar Image -->
                        <img src="https://github.com/tommichael88/booktomnyc/blob/main/images/calendar.png?raw=true" style="height: 100%; max-width: 45px; object-fit: contain;" alt="Service Calendar Icon">
                        <!-- Text Stack -->
                        <div style="display: flex; flex-direction: column; line-height: .85;">
                            <span style="color:#454545; font-size:2rem; font-style: italic;">SERVICE</span>
                            <span style="color:#454545; font-size:2rem; font-weight: bold;">SCHEDULE</span>
                        </div>
                    </div>
                    <a href="https://tommichael88.github.io/booktomnyc/cat.html" style="text-decoration: none; color: inherit; flex-grow:1;"></a>
                    <div class="new-service-request-grid-topper" style="display:flex;justify-content:space-between;align-items:center;font-size:1rem;background: linear-gradient(25deg,#000 1%,#8a0615 20%,#de0000 40%,#8a0615 60%,#000 95%);color:#fff;">
                        <a href="https://tommichael88.github.io/booktomnyc/cat.html" style="text-decoration: none; color: inherit;">
                            <span>
                                <u>·¥∫·µâ ∑</u>
                                <b>Service Request ‚ñº</b>
                            </span>
                        </a>
                        <button class="reschedule-service-button" id="manageVisitBtn">
                            <img src="https://github.com/tommichael88/booktomnyc/blob/main/images/Copilot_20251010_033614.png?raw=true" style="width:2rem;height:auto;" alt="Edit Visit">&nbsp;Edit<br>&nbsp;Visit</button>
                        <div id="cartFab" class="cartFab star" style="display:none">
                            <!-- Sparkle particles -->
                            <span class="sparkle"></span>
                            <span class="sparkle"></span>
                            <span class="sparkle"></span>
                            <span class="sparkle"></span>
                            <!-- Glow ring -->
                            <div class="glow-ring"></div>
                            <!-- Cart icon -->
                            <img src="https://github.com/tommichael88/booktomnyc/blob/main/images/checkout.png?raw=true" alt="checkout">
                            <!-- Item count badge -->
                            <span id="fabCartCount">0</span>
                        </div>
                    </div>
                    <!-- Category tiles etc (kept as in QR.txt) -->
                    <div class="menu-container" id="categories-grid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:0;margin-bottom:0">
                        <div class="category-tile" data-category="Minor Home Repairs" tabindex="0">
                            <div class="category-icon">üè† </div>
                            <h2>Minor <br>Home Repairs </h2>
                        </div>
                        <div class="category-tile" data-category="Furniture Fixes &amp; Assembly" tabindex="0">
                            <div class="category-icon">üõãÔ∏è</div>
                            <h2>Furniture <br>Fixes </h2>
                        </div>
                        <div class="category-tile" data-category="Wall Mounting" tabindex="0">
                            <div class="category-icon">üñº</div>
                            <h2>Wall <br>Mounting </h2>
                        </div>
                        <div class="category-tile" data-category="Electrical Help" tabindex="0">
                            <div class="category-icon">üîå</div>
                            <h2>Electrical <br>Help </h2>
                        </div>
                        <div class="category-tile" data-category="Plumbing Help" tabindex="0">
                            <div class="category-icon">üöø</div>
                            <h2>Plumbing <br>Help </h2>
                        </div>
                        <div class="category-tile" data-category="Computer Repairs" tabindex="0">
                            <div class="category-icon">üíª</div>
                            <h2>Computer Repairs</h2>
                        </div>
                    </div>
                    <!-- overlays and containers (kept) -->
                    <div id="serviceRequestContainer" style="display:none;">
                        <div id="selectedSection"></div>
                        <div class="task-details" id="furnituredetailsSection" style="display:none;">
                            <h4>Select Your Furniture Item</h4>
                            <div>
                                <label>
                                    <input type="radio" name="furnitureType" value="generic"> Furniture [Not IKEA] </label>
                                <label>
                                    <input type="radio" name="furnitureType" value="ikea" checked=""> IKEA Collection </label>
                            </div>
                            <select id="furniture-select">
                                <option value="">Select Here</option>
                            </select>
                            <button class="book-more-button" id="addFurnitureInline">Add Furniture Item</button>
                            <ul id="selectedFurnitureList"></ul>
                            <button class="clear-all-btn" id="clearAllFurnitureInline">Clear All Furniture</button>
                        </div>
                    </div>
                    <div id="servicedetailsContainer" style="display:none"></div>
                </div>
                <div id="serviceRequestSection" style="display:none;">
                    <h4>Service Request</h4>
                    <div id="serviceRequestList"></div>
                    <div id="estimateTotal" class="estimate-total" style="display:none;">
                        <span>Estimated Subtotal:</span>
                        <span id="totalAmount">$0</span>
                    </div>
                    <span class="action-buttons">
                        <button class="clear-all-btn" id="clearAllServicesBtn" alt="Clear Cart">Clear All üóë</button>
                        <button class="book-more-button" id="bookMoreBtn" alt="Add Services">‚ûï More Services</button>
                        <button class="checkout-button" id="bookNowBtn" alt="Book Now">‚òÖ BOOK ‚òÖ</button>
                    </span>
                </div>
            </div>
            <ul>
                <div class="card-invoices">
                    <br>
                    <br>
                    <h1 style="color:rgba(155,0,0,.99)">
                        <img src="https://tommichael88.github.io/booktomnyc/images/zohoinvoice?raw=true" style="width:auto;max-height:45px; object-fit: contain;" alt="Zoho Invoice Icon">&nbsp; <span style="font-size:2rem;">
                            <b>INVOICES</b>
                        </span>
                    </h1>
                    <br>
                    <p style="font-size:1rem;padding:4px">view invoices ‚Ä¢ process payments ‚Ä¢ digital receipts ‚Ä¢ review quote estimates ‚Ä¢ share documents ‚Ä¢ transaction history ‚Ä¢ expense receipts</p>
                    <button class="client-login" id="clientLoginBtn">üîê ùóñùóüùóúùóòùó°ùóß PORTAL</button>
                    <br>
                    <br>
                    <br>
                </div>
                <center>
                    <h4>
                        <img src="https://raw.githubusercontent.com/tommichael88/booktomnyc/refs/heads/main/images/tomshandytech_highresol_today.png" alt="HandyTech logo" style="width:10rem;height:auto;">
                    </h4>
                </center>
                <footer>
                    <a href="https://tommichael88.github.io/booktomnyc/Privacy%20Policy">Privacy Policy</a> | <a href="https://tommichael88.github.io/booktomnyc/ServiceAgreement#annex-a">Service Scope</a> | <a href="https://tommichael88.github.io/booktomnyc/ServiceAgreement">Service Agreement</a>
                </footer>
        </div>

        <div id="searchinvoice" class="invoiceOverlay">
            <div class="invoice-content">
                <div class="invoice-header">
                    <h2 class="invoice-title">Search Services</h2>
                    <button class="close-btn" id="closeSearchinvoice">√ó</button>
                </div>
                <input type="text" class="search-input" id="invoiceSearchInput" placeholder="" />
                <div id="invoiceSearchResults" class="service-list"></div>
            </div>
        </div>

        <div id="invoiceOverlay" class="invoiceOverlay">
            <div class="invoice-content">
                <div class="invoice-header">
                    <h2 class="invoice-title">Service Request Order</h2>
                    <button class="close-btn" id="closeInvoiceOverlay">&nbsp;¬ª&nbsp;Ô∏è</button>
                </div>
                <div id="invoiceServiceList" class="service-list"></div>
                <div class="summary-section">
                    <div class="subtotal">
                        <span>Subtotal ( <span id="serviceCount">0</span> items): </span>
                        <span id="invoiceTotal">$0</span>
                    </div>
                </div>
                <span class="action-buttons">
                    <button class="clear-all-btn" id="clearAllServicesBtn" style="width:75%" alt="Clear cart">Clear All üóë</button>
                    <button class="book-more-button" id="showCategoriesBtn" alt="Add Services">‚ûï More Services</button>
                    <button class="checkout-button" id="checkoutBtn" alt="Book Now">‚òÖ BOOK ‚òÖ</button>
                </span>
            </div>
        </div>

        <script>
            if (window.__booktom_qr_loaded) {
                // already initialized
            } else {
                window.__booktom_qr_loaded = true;
                (function() {
                    "use strict";
                    /* ---------- Utilities ---------- */
                    const q = (sel, ctx = document) => (ctx || document).querySelector(sel);
                    const qAll = (sel, ctx = document) =>
                        Array.from((ctx || document).querySelectorAll(sel));
                    const create = (tag, props = {}, children = []) => {
                        const el = document.createElement(tag);
                        for (const k of Object.keys(props || {})) {
                            if (k === "class") el.className = props[k];
                            else if (k === "text") el.textContent = props[k];
                            else if (k === "html") el.innerHTML = props[k];
                            else el.setAttribute(k, props[k]);
                        }
                        for (const c of children || []) {
                            if (typeof c === "string") el.appendChild(document.createTextNode(c));
                            else if (c instanceof Node) el.appendChild(c);
                        }
                        return el;
                    };
                    const safeText = (n, t) => {
                        if (n) n.textContent = t;
                    };
                    const parsePriceToInt = (s) => {
                        if (!s || typeof s !== "string") return 0;
                        const m = s.match(/(\d+(?:\.\d+)?)/);
                        return m ? Math.round(parseFloat(m[1])) : 0;
                    };

                    function toast(msg) {
                        try {
                            const id = "booktom-toast";
                            let root = document.getElementById(id);
                            if (!root) {
                                root = create("div", {
                                    id
                                });
                                Object.assign(root.style, {
                                    position: "fixed",
                                    right: "12px",
                                    bottom: "12px",
                                    zIndex: 14000,
                                    display: "flex",
                                    flexDirection: "column",
                                    gap: "8px",
                                    alignItems: "flex-end"
                                });
                                document.body.appendChild(root);
                            }
                            const el = create("div", {});
                            Object.assign(el.style, {
                                background: "rgba(0,0,0,0.85)",
                                color: "#fff",
                                padding: "8px 12px",
                                borderRadius: "8px",
                                boxShadow: "0 6px 18px rgba(0,0,0,0.3)",
                                maxWidth: "320px",
                                fontSize: "13px"
                            });
                            el.textContent = msg;
                            root.appendChild(el);
                            setTimeout(() => el.remove(), 3000);
                        } catch (_) {
                            /* noop */
                        }
                    }
                    /* ---------- debounce helper (requestAnimationFrame-friendly) ---------- */
                    function debounce(fn, wait = 220) {
                        let timeout = null;
                        let raf = null;
                        return function(...args) {
                            const ctx = this;
                            if (timeout) clearTimeout(timeout);
                            if (raf) cancelAnimationFrame(raf);
                            if (wait <= 16) {
                                raf = requestAnimationFrame(() => fn.apply(ctx, args));
                            } else {
                                timeout = setTimeout(() => fn.apply(ctx, args), wait);
                            }
                        };
                    }
                    /* ---------- Centralized service data (canonical single source) ---------- */

                    window.SERVICE_DATA =
                        window.SERVICE_DATA ||
                        (function() {
                            const FURNITURE_MINUTES = {
                                "BEKANT - Desk with underframe": 40,
                                "BESTA - Single frame, shelves, floor standing": 30,
                                "BESTA - Single frame, door / drawer, floor standing": 45,
                                "BESTA - Single frame, wall mounting": 30,
                                "BILLY - Bookcase one frame": 40,
                                "BJURSTA - Extendable table": 45,
                                "BRIMNES - Bed frame": 45,
                                "BRIMNES - 2 drawer chest": 30,
                                "BRIMNES - 3 drawer chest": 40,
                                "BRIMNES - 4 drawer chest": 50,
                                "BRIMNES - Bed frame with storage": 150,
                                "BRIMNES - Headboard": 60,
                                "BRIMNES - Wardrobe with 2 doors": 60,
                                "BRIMNES - Wardrobe with 3 doors": 70,
                                "BRIMNES - Nightstand": 20,
                                "BRIMNES - Daybed with 2 drawers": 135,
                                "BRUSALI - Bed frame": 70,
                                "BRUSALI - Bed with 4 storage boxes": 120,
                                "BRUSALI - 3 drawer chest": 70,
                                "BRUSALI - Nightstand": 20,
                                "FINGAL - Swivel chair": 15,
                                "FRIHETEN - Sofa bed with chaise": 50,
                                "GALANT - 2 drawer unit": 75,
                                "GALANT - 3 drawer unit": 95,
                                "GALANT - 4 drawer unit": 110,
                                "GALANT - Cabinet with sliding doors": 150,
                                "HEMNES - Bed frame": 70,
                                "HEMNES - 2 drawer chest": 40,
                                "HEMNES - 3 drawer chest": 70,
                                "HEMNES - 6 drawer chest": 90,
                                "HEMNES - 8 drawer dresser": 105,
                                "HEMNES - Nightstand": 20,
                                "HEMNES - Daybed with 3 drawers": 150,
                                "KALLAX - Shelving unit 5x5": 60,
                                "KALLAX - Shelving unit 4x4": 45,
                                "KALLAX - Shelving unit 2x4": 40,
                                "KALLAX - Shelving unit 1x4": 35,
                                "KALLAX - Shelving unit 2x2": 20,
                                "KALLAX - Insert with 2 drawers": 20,
                                "KALLAX - Insert with door": 15,
                                "LACK - Side table": 10,
                                "LACK - Coffe table": 15,
                                "LACK - TV Unit": 20,
                                "LINNMON ADILS - Table (table top and four legs)": 15,
                                "MALM - Bed frame": 45,
                                "MALM - Bed frame with 4 storage boxes": 95,
                                "MALM - 2 drawer chest": 30,
                                "MALM - 3 drawer chest": 40,
                                "MALM - 4 drawer chest": 50,
                                "MALM - 6 drawer chest": 70,
                                "MALM - 6 drawer dresser": 90,
                                "MALM - Lift bed": 240,
                                "MICKE - Desk with 1 drawer": 30,
                                "MICKE - Desk with drawers, integrated storage": 40,
                                "MICKE - Add-on unit": 40,
                                "MORVIK - Wardrobe": 120,
                                "PAX - One frame, hinged doors, up to 3 addons": 180,
                                "PAX - Two frames, sliding doors, up to 5 addons": 480,
                                "SODERHAMN - Sofa one seat section with cover": 30,
                                "TRYSIL - Bed frame": 45,
                                "TRYSIL - 3 drawer chest": 40,
                                "TRYSIL - Nightstand": 20,
                                "TRYSIL - Wardrobe": 150
                            };
                            const GENERIC_FURNITURE_MINUTES = {
                                Desk: 40,
                                Chair: 25,
                                Bookcase: 40,
                                Dresser: 70,
                                "Bed Frame": 60,
                                Sofa: 60,
                                Table: 45,
                                Cabinet: 90,
                                "Shelving Unit": 60,
                                Wardrobe: 120,
                                "Side table": 15,
                                "Coffee table": 20,
                                "TV Unit": 25,
                                Nightstand: 20
                            };
                            const RATE_PER_HOUR = 40.0;
                            const REPAIR_RATE_PER_HOUR = 70.0;

const serviceData = {
    "Minor Home Repairs": {
        Appliances: {
            price: "$70/hour",
            description: "Assessment & Repair",
            icon: "üéõÔ∏è",
            details: ["Maintenance", "Repair", "Assessment"],
            intakeConfig: [
                {
                    id: "app_type",
                    label: "Which appliance needs service?",
                    options: ["Refrigerator", "Oven/Range", "Dishwasher", "Washer/Dryer", "Microwave", "Other"]
                },
                {
                    id: "brand_model",
                    label: "Do you know the brand or model number?",
                    options: ["Brand only", "Brand + model", "Not sure"]
                },
                {
                    id: "symptom",
                    label: "Are you seeing an error code or specific issue?",
                    options: ["Error code", "Not cooling/heating", "Not turning on", "Leaking", "Noise", "Other/unsure"]
                }
            ]
        },

        "Handles & Locks Installation": {
            price: "$70",
            description: "Install door hardware.",
            icon: "üîí",
            details: ["Standard door", "Security lock", "Smart lock"],
            intakeConfig: [
                {
                    id: "install_type",
                    label: "Is this a new door with no existing holes, or replacing an existing lock?",
                    options: ["New door (needs drilling)", "Replacing/upgrading existing lock"]
                },
                {
                    id: "lock_type",
                    label: "What type of lock or handle?",
                    options: ["Interior handle", "Exterior deadbolt", "Smart lock", "Cabinet hardware"]
                },
                {
                    id: "door_material",
                    label: "If it's a new door, what is the door made of?",
                    options: ["Wood", "Metal/steel", "Fiberglass", "Not sure"]
                }
            ]
        },

        "Furniture Repair ‚è≤Hourly Service": {
            price: "$70/hour",
            description: "Repair and restoration.",
            icon: "ü™ë",
            details: ["Wood furniture", "Upholstery", "Metal furniture"],
            intakeConfig: [
                {
                    id: "furn_type",
                    label: "What type of furniture needs repair?",
                    options: ["Chair", "Table", "Sofa", "Cabinet", "Outdoor/other"]
                },
                {
                    id: "issue",
                    label: "What‚Äôs the main issue?",
                    options: ["Broken part", "Loose/wobbly", "Surface damage", "Fabric/upholstery issue", "Drawer/door issue"]
                }
            ]
        },

        "Door Damage Repair": {
            price: "$125",
            description: "Repair and painting.",
            icon: "üö™",
            details: ["Patch & paint", "Hinge repair", "Frame adjustment"],
            intakeConfig: [
                {
                    id: "door_type",
                    label: "What type of door is damaged?",
                    options: ["Interior hollow", "Interior solid", "Exterior door", "Glass/patio", "Not sure"]
                },
                {
                    id: "dmg_type",
                    label: "What needs repair?",
                    options: ["Holes/dents", "Hinges", "Frame/jamb", "Sticking/won‚Äôt close", "Bottom seal"]
                }
            ]
        },

        "Drywall Repair : Patch & Paint": {
            price: "$70",
            description: "Patching and painting included.",
            icon: "‚¨ú",
            intakeConfig: [
                {
                    id: "dmg_size",
                    label: "What size is the damage?",
                    options: ["Golf ball", "Baseball", "Basketball", "Crack", "Water stain"]
                },
                {
                    id: "dmg_count",
                    label: "How many walls/areas need repair?",
                    options: ["1", "2‚Äì3", "4+"]
                },
                {
                    id: "paint",
                    label: "Do you have matching paint available?",
                    options: ["Yes", "No", "Not sure"]
                },
          
            ],
            details: ["Small holes", "Large holes", "Crack Repair"]
        }
    },

    "Furniture Fixes & Assembly": {
        Assembly: {
            price: "$40/hour",
            description: "Professional assembly.",
            icon: "üõ†Ô∏è",
            details: ["Standard Assembly"],
            requiresFurnitureSelection: true,
            intakeConfig: [
                {
                    id: "furn_item",
                    label: "What are we assembling?",
                    options: ["Bed", "Desk", "Shelving", "Wardrobe", "Other furniture"]
                },
                {
                    id: "parts",
                    label: "Are all parts and hardware available?",
                    options: ["Yes, everything is here", "Parts in boxes", "Missing hardware"]
                }
            ]
        },

        Repair: {
            price: "$70/hour",
            description: "Furniture repair.",
            icon: "üî®",
            details: ["Standard Repair"],
            requiresFurnitureSelection: true,
            intakeConfig: [
                {
                    id: "furn_item",
                    label: "What needs repair?",
                    options: ["Bed frame", "Desk", "Shelving", "Cabinet", "Chair/sofa"]
                },
                {
                    id: "issue",
                    label: "What‚Äôs the issue?",
                    options: ["Loose/wobbly", "Broken part", "Drawer/door issue", "Surface damage"]
                }
            ]
        }
    },

    "Wall Mounting": {
        "Curtains/Drapes w. Single Rod Installation": {
            price: "$50",
            description: "Rod installation.",
            icon: "ü™ü",
            details: ["Standard rod", "Tension rod", "Decorative rod"],
            intakeConfig: [
                {
                    id: "install_type",
                    label: "What are we installing?",
                    options: ["Curtains/drapes", "Blinds/shades", "Rod only"]
                },
                {
                    id: "ceiling_height",
                    label: "Approximate ceiling height?",
                    options: ["8‚Äì10 ft", "10‚Äì14 ft", "14+ ft / high ceiling"]
                },
                {
                    id: "window_count",
                    label: "How many windows or sections?",
                    options: ["1", "2‚Äì3", "4+"]
                }
            ]
        },

        "Frame/Shelf Mounting ‚è≤Hourly Service": {
            price: "$60/hour",
            description: "Frames and shelves.",
            icon: "üìö",
            details: ["Picture frames", "Shelves", "Wall art"],
            intakeConfig: [
                {
                    id: "items",
                    label: "What are we mounting?",
                    options: ["Shelf", "Multiple shelves", "Frames/art", "Heavy mirror", "Mixed items"]
                },
                {
                    id: "weight",
                    label: "Approximate weight per item?",
                    options: ["Light", "Medium", "Heavy"]
                }
            ]
        },

        'TV Mounting (Under 60") + Concealed Cables': {
            price: "$150",
            description: "Mounting with hidden cables.",
            icon: "üì∫",
            intakeConfig: [
                {
                    id: "wall",
                    label: "Do you know the wall type?",
                    options: ["Drywall", "Brick/Concrete", "Not sure"]
                },
                {
                    id: "mount",
                    label: "Do you already have a TV mount?",
                    options: ["Yes", "No, need help choosing"]
                }
            ],
            details: ["Drywall", "Concrete", "Brick"]
        },

        'TV Mounting (Under 60") standard': {
            price: "$60",
            description: "Basic mounting.",
            icon: "üì∫",
            details: ["Basic mounting", "Tilt mount", "Swivel mount"]
        }
    },

    "Computer Repairs": {
        Data: {
            price: "$99",
            description: "Backup & Transfer",
            icon: "üíæ",
            details: ["External drive", "Cloud backup"],
            intakeConfig: [
                {
                    id: "from_device",
                    label: "Where is the data coming from?",
                    options: ["Working computer", "Broken computer", "External drive", "Phone/tablet", "Multiple sources"]
                }
            ]
        },

        "Diagnostic Service": {
            price: "$75",
            description: "Diagnostics",
            icon: "üîç",
            details: ["Hardware", "Software"],
            intakeConfig: [
                {
                    id: "symptom",
                    label: "What‚Äôs happening with the device?",
                    options: ["Won‚Äôt turn on", "Slow", "Error screen", "Overheating/noisy", "Random shutdowns"]
                }
            ]
        },

        Hardware: {
            price: "$125",
            description: "Replacement/Upgrades",
            icon: "ü™´",
            details: ["RAM", "SSD", "GPU"]
        },

        "Maleware & Virus": {
            price: "$125",
            description: "Virus removal",
            icon: "ü¶†",
            details: ["Scan & remove", "System cleanup"]
        },

        Software: {
            price: "$50",
            description: "Install & Updates",
            icon: "üìÄ",
            details: ["OS", "Apps", "Drivers"]
        },

        "System Recovery": {
            price: "$125",
            description: "Restoration",
            icon: "‚èÆÔ∏è",
            details: ["Factory reset", "Backup restore"]
        }
    },

    "Electrical Help": {
        "Light Fixture Swap": {
            price: "$60",
            description: "Fixture replacement.",
            icon: "üí°",
            title: "Choose fixture type",
            details: ["Ceiling light", "Wall sconce", "Pendant light"],
            intakeConfig: [
                {
                    id: "fixture",
                    label: "What are we replacing?",
                    options: ["Ceiling light", "Wall sconce", "Pendant", "Bulbs only"]
                }
            ]
        }
    },

    "Plumbing Help": {
        "Bidet Accessory Install/Removal": {
            price: "$70",
            description: "Install/Remove.",
            icon: "üöΩ",
            details: ["Standard bidet", "Smart bidet"],
            intakeConfig: [
                {
                    id: "bidet_type",
                    label: "What type of bidet?",
                    options: ["Seat attachment", "Electric smart", "Handheld sprayer", "Removing old"]
                }
            ]
        },

        "Fixture Swap (Cosmetic)": {
            price: "$70",
            description: "Faucet/Shower head.",
            icon: "üö∞",
            details: ["Faucet", "Shower head"],
            intakeConfig: [
                {
                    id: "fixture",
                    label: "What are we replacing?",
                    options: ["Kitchen faucet", "Bathroom faucet", "Shower head", "Toilet parts"]
                }
            ]
        },

        "Leak Under Sink Repair": {
            price: "$75",
            description: "Leak repair.",
            icon: "üíß",
            details: ["Pipe leak", "Drain leak"],
            intakeConfig: [
                {
                    id: "leak_loc",
                    label: "Where is the leak coming from?",
                    options: ["Pipes", "Drain pipe", "Shut-off valve", "Not sure"]
                },
                {
                    id: "access",
                    label: "Is the area under the sink clear?",
                    options: ["Yes", "No", "Tight space"]
                }
            ]
        },

        "Unclog Sink/Shower/Toilet (Minor)": {
            price: "$70",
            description: "Drain clearing.",
            icon: "ü™†",
            details: ["Plunger", "Drain snake"],
            intakeConfig: [
                {
                    id: "location",
                    label: "What‚Äôs clogged?",
                    options: ["Kitchen sink", "Bathroom sink", "Shower/tub", "Toilet", "Multiple"]
                }
            ]
        }
    }
};
                            return {
                                FURNITURE_MINUTES,
                                GENERIC_FURNITURE_MINUTES,
                                RATE_PER_HOUR,
                                REPAIR_RATE_PER_HOUR,
                                serviceData
                            };
                        })();

                    function computeFurnitureCharge(itemsMinutes) {
                        if (!Array.isArray(itemsMinutes) || itemsMinutes.length === 0)
                            return {
                                hours: 0,
                                price: 0,
                                minutes: 0
                            };
                        // Sum all minutes from all furniture items
                        const totalMinutes = itemsMinutes.reduce((a, b) => a + b, 0);
                        // Apply your business rules:
                        // 1. If total minutes is 0, return 0
                        // 2. If total minutes is less than 60 minutes, charge for 1 hour
                        // 3. If total minutes is 60+ minutes, use the exact total
                        let hours = 0;
                        if (totalMinutes > 0) {
                            // Convert minutes to hours (with 2 decimal places)
                            hours = totalMinutes / 60;
                            // Apply minimum 1 hour only if total is less than 60 minutes
                            if (hours < 1) {
                                hours = 1;
                            }
                            // If 60+ minutes, use exact hours (no rounding up)
                        }
                        // Round to 2 decimal places for display
                        const hoursRounded = Math.round(hours * 100) / 100;
                        // Calculate price at $40/hour
                        const price =
                            Math.round(hoursRounded * window.SERVICE_DATA.RATE_PER_HOUR * 100) /
                            100;
                        return {
                            hours: hoursRounded,
                            price,
                            minutes: totalMinutes
                        };
                    }

                    function computeRepairCharge(hoursInput) {
                        let hours = parseFloat(hoursInput) || 0;
                        if (hours <= 0) hours = 1;
                        const hoursRounded = Math.round(hours * 100) / 100;
                        const price =
                            Math.round(
                                hoursRounded * window.SERVICE_DATA.REPAIR_RATE_PER_HOUR * 100
                            ) / 100;
                        return {
                            hours: hoursRounded,
                            price
                        };
                    }
                    /* ---------- Persistence & state ---------- */
                    const STORAGE_KEY = "booktom_cart_v1";

                    function persistCartPlain(state) {
                        try {
                            sessionStorage.setItem(STORAGE_KEY, JSON.stringify(state || []));
                        } catch (_) {
                            /* noop */
                        }
                    }

                    function loadCartPlain() {
                        try {
                            const v = sessionStorage.getItem(STORAGE_KEY);
                            return v ? JSON.parse(v) : [];
                        } catch (_) {
                            return [];
                        }
                    }
                    const State = {
                        serviceRequest: loadCartPlain(),
                        furnitureItems: []
                    };
                    /* ---------- DOM refs (created at init) ---------- */
                    const DOM = {
                        categoriesGrid: null,
                        contactBtn: null,
                        contactToolbar: null,
                        cartFab: null,
                        fabCount: null,
                        invoiceOverlay: null,
                        invoiceServiceList: null,
                        invoiceTotal: null,
                        serviceCount: null,
                        serviceRequestList: null,
                        estimateTotal: null,
                        totalAmount: null,
                        serviceRequestContainer: null,
                        servicedetailsContainer: null,
                        selectedSection: null,
                        serviceRequestSection: null,
                        scheduleCard: null,
                        fabButton: null,
                        closeInvoiceBtn: null,
                        checkoutBtn: null,
                        bookMoreBtn: null,
                        showCategoriesBtn: null
                    };

                    /* ---------- Inject small drawer CSS (kept as before) ---------- */
                    /* ---------- Inject Styles (Updated for Mobile UI) ---------- */
                    (function injectCSS() {
                        try {
                            const css = `
                        #invoiceOverlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(12px); display: none; z-index: 10000; animation: fadeIn 0.3s ease; justify-content: center; align-items: center; padding: 1rem; }
                        #invoiceOverlay.open { display: flex; }
                        #invoiceOverlay .invoice-content { background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 248, 248, 0.95) 100%); color: #2a2a2a; border-radius: 16px; border: 2px solid rgba(169, 169, 169, 0.3); box-shadow: var(--shadow-lg); overflow: hidden; max-height: 90vh; display: flex; flex-direction: column; width: 100%; max-width: 450px; position: relative; animation: invoiceSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
                        .repair-hint { font-size:0.85rem; color:#555; margin-top:6px; margin-bottom:6px; }
                        
                        /* NEW STYLES FOR MOBILE INTAKE */
                        .intake-section { margin-bottom: 15px; }
                        .intake-label { font-size: 0.9rem; font-weight: 700; margin-bottom: 8px; display: block; color: #444; }
                        .chip-container { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; }
                        .chip-btn { background: #f0f0f0; border: 1px solid #ccc; border-radius: 20px; padding: 8px 16px; font-size: 0.85rem; cursor: pointer; transition: all 0.2s; user-select: none; -webkit-tap-highlight-color: transparent; }
                        .chip-btn:hover { background: #e0e0e0; }
                        .chip-btn.selected { background: #de0000; color: white; border-color: #de0000; box-shadow: 0 2px 8px rgba(222,0,0,0.4); }
                        
                        /* FURNITURE SEARCH */
                        .furniture-search-input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 10px; font-size: 1rem; box-sizing: border-box; }
                        .furniture-list-container { max-height: 250px; overflow-y: auto; border: 1px solid #eee; border-radius: 8px; background: rgba(255,255,255,0.5); margin-bottom: 15px; }
                        .furniture-list-item { padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; font-size: 0.9rem; }
                        .furniture-list-item:hover { background: rgba(222,0,0,0.05); }
                        
                        /* TERMS CHECKBOX */
                        .terms-wrap { margin: 15px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 8px; font-size: 0.85rem; display: flex; gap: 10px; align-items: flex-start; border: 1px solid rgba(0,0,0,0.1); }
                        .terms-wrap input[type="checkbox"] { width: 20px; height: 20px; margin-top: 2px; accent-color: #de0000; flex-shrink: 0; }
                        
                        .checkout-button:disabled { background: #999; cursor: not-allowed; transform: none; box-shadow: none; filter: grayscale(1); }
                        @media (min-width:600px) { #invoiceOverlay .invoice-content { width: 450px; } }
                                    /* FIX: Make buttons responsive to taps */
 
            .close-btn, .clear-all-btn, .invoice-remove-service-btn {
                cursor: pointer;
                -webkit-tap-highlight-color: rgba(0,0,0,0.1);
                user-select: none;
                touch-action: manipulation;
            }
            
            .close-btn:active, .clear-all-btn:active, .invoice-remove-service-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
            
            /* Better touch targets for mobile */
            @media (max-width: 768px) {
                .close-btn, .invoice-remove-service-btn {
                    min-width: 44px;
                    min-height: 44px;
                }
                
                .clear-all-btn {
                    padding: 12px 20px;
                    font-size: 1rem;
                }
            }
                    `;
                            const s = document.createElement("style");
                            s.type = "text/css";
                            s.appendChild(document.createTextNode(css));
                            document.head.appendChild(s);
                        } catch (_) {
                            /* noop */
                        }
                    })();

                    /* ---------- invoice overlay helpers ---------- */
                    function ensureInvoiceOverlayExists() {
                        let ov = DOM.invoiceOverlay || q("#invoiceOverlay");
                        if (!ov) {
                            console.warn("Invoice overlay not found, using existing one");
                            ov = q("#invoiceOverlay");
                            if (!ov) {
                                console.error("Invoice overlay not found in DOM");
                                return null;
                            }
                        }
                        DOM.invoiceOverlay = ov;
                        DOM.invoiceServiceList =
                            DOM.invoiceServiceList || q("#invoiceServiceList");
                        DOM.invoiceTotal = DOM.invoiceTotal || q("#invoiceTotal");
                        DOM.serviceCount = DOM.serviceCount || q("#serviceCount");
                        DOM.closeInvoiceBtn = DOM.closeInvoiceBtn || q("#closeInvoiceOverlay");
                        DOM.checkoutBtn = DOM.checkoutBtn || q("#checkoutBtn");
                        DOM.showCategoriesBtn = DOM.showCategoriesBtn || q("#showCategoriesBtn");
                        return ov;
                    }

                    function openInvoiceOverlay() {
                        const ov = ensureInvoiceOverlayExists();
                        if (!ov) return;
                        ov.classList.add("open");
                        document.body.style.overflow = "hidden";
                        renderInvoiceOverlay();
                    }

                    function closeInvoiceOverlay() {
                        const ov = ensureInvoiceOverlayExists();
                        if (!ov) return;
                        ov.classList.remove("open");
                        document.body.style.overflow = "";
                    }
                    /* ---------- simple capture/restore UI state ---------- */
                    let priorDisplayState = null;

                    function capturePriorDisplays() {
                        try {
                            priorDisplayState = {
                                categoriesGrid: DOM.categoriesGrid ?
                                    getComputedStyle(DOM.categoriesGrid).display : "",
                                serviceRequestContainer: DOM.serviceRequestContainer ?
                                    getComputedStyle(DOM.serviceRequestContainer).display : "",
                                servicedetailsContainer: DOM.servicedetailsContainer ?
                                    getComputedStyle(DOM.servicedetailsContainer).display : "",
                                serviceRequestSection: DOM.serviceRequestSection ?
                                    getComputedStyle(DOM.serviceRequestSection).display : ""
                            };
                        } catch (_) {
                            priorDisplayState = null;
                        }
                    }

                    function restorePriorDisplays() {
                        if (!priorDisplayState) return;
                        try {
                            if (DOM.categoriesGrid)
                                DOM.categoriesGrid.style.display =
                                priorDisplayState.categoriesGrid || "grid";
                            if (DOM.serviceRequestContainer)
                                DOM.serviceRequestContainer.style.display =
                                priorDisplayState.serviceRequestContainer || "none";
                            if (DOM.servicedetailsContainer)
                                DOM.servicedetailsContainer.style.display =
                                priorDisplayState.servicedetailsContainer || "none";
                            if (DOM.serviceRequestSection)
                                DOM.serviceRequestSection.style.display =
                                priorDisplayState.serviceRequestSection ||
                                (State.serviceRequest.length ? "block" : "none");
                        } finally {
                            priorDisplayState = null;
                        }
                    }
                    /* ---------- render invoice overlay ---------- */
                    function renderInvoiceOverlay() {
                        const ov = DOM.invoiceOverlay;
                        if (!ov) return;
                        const list = DOM.invoiceServiceList;
                        const totalEl = DOM.invoiceTotal;
                        const countEl = DOM.serviceCount;
                        const checkoutBtn = DOM.checkoutBtn;

                        list.innerHTML = "";
                        let total = 0;

                        State.serviceRequest.forEach((svc) => {
                            const item = create("div", {
                                class: "invoice-service-item"
                            });

                            item.appendChild(
                                create("div", {
                                    class: "invoice-service-icon",
                                    text: svc.icon || "üîß"
                                })
                            );

                            const tw = create("div", {
                                class: "invoice-service-text"
                            });

                            tw.appendChild(create("h4", {
                                text: svc.name
                            }));
                            tw.appendChild(
                                create("div", {
                                    class: "invoice-service-detail",
                                    text: svc.detail || ""
                                })
                            );

                            if (svc.notes) {
                                tw.appendChild(
                                    create("div", {
                                        class: "invoice-service-notes",
                                        text: svc.notes
                                    })
                                );
                            }

                            // Handle furniture items if present
                            if (svc.furnitureItems && svc.furnitureItems.length > 0) {
                                const fwrap = create("div", {
                                    class: "requested-service-furniture"
                                });
                                svc.furnitureItems.forEach((fi, idx) => {
                                    const fitem = create("span", {
                                        class: "f-item"
                                    });

                                    // Create remove button first
                                    const rem = create("button", {
                                        type: "button",
                                        text: "‚úï",
                                        class: "remove-furniture-btn"
                                    });

                                    // Add remove button before furniture item label
                                    fitem.appendChild(rem);

                                    // Add event listener for the remove button
                                    rem.addEventListener("click", () => {
                                        removeFurnitureItemFromService(svc.id, idx);
                                        // Immediately update the overlay
                                        renderInvoiceOverlay();
                                        updateserviceRequestUI();
                                    });

                                    // Add furniture item label after the remove button
                                    fitem.appendChild(create("span", {
                                        text: fi.label
                                    }));

                                    fwrap.appendChild(fitem);
                                });
                                tw.appendChild(fwrap);
                            }

                            item.appendChild(tw);
                            item.appendChild(
                                create("div", {
                                    class: "invoice-service-price",
                                    text: svc.price || "$0"
                                })
                            );

                            // FIX: Add immediate visual feedback and update
                            const rem = create("button", {
                                class: "invoice-remove-service-btn",
                                text: "‚úï",
                                type: "button"
                            });

                            rem.addEventListener("click", () => {
                                // Add visual feedback
                                rem.style.transform = "scale(0.9)";
                                setTimeout(() => {
                                    rem.style.transform = "";
                                }, 100);

                                // Remove service and immediately update UI
                                removeServiceFromCart(svc.id);

                                // Re-render the overlay immediately
                                renderInvoiceOverlay();

                                // Also update main UI
                                updateserviceRequestUI();

                                toast("Service removed from cart");
                            });

                            item.appendChild(rem);
                            list.appendChild(item);
                            total += parsePriceToInt(svc.price);
                        });

                        safeText(countEl, String(State.serviceRequest.length));
                        safeText(totalEl, `$${total}.00`);

                        // Wire Clear All button in overlay
                        const clearBtn = ov.querySelector('#clearAllServicesBtn');
                        if (clearBtn) {
                            // Remove existing listeners
                            const newClearBtn = clearBtn.cloneNode(true);
                            clearBtn.parentNode.replaceChild(newClearBtn, clearBtn);

                            // In renderInvoiceOverlay function, update the Clear All button event listener:
                            newClearBtn.addEventListener("click", () => {
                                // Visual feedback
                                newClearBtn.style.opacity = "0.7";
                                setTimeout(() => {
                                    newClearBtn.style.opacity = "";
                                }, 200);

                                State.serviceRequest = [];
                                persistCartPlain(State.serviceRequest);
                                updateserviceRequestUI();
                                updateFabVisibility();

                                // Close the overlay and show categories
                                closeInvoiceOverlay();
                                showCategories();

                                toast("All services cleared from cart");
                            });
                        }

                        // Wire Close button in overlay
                        const closeBtn = ov.querySelector('#closeInvoiceOverlay');
                        if (closeBtn) {
                            // Remove existing listeners
                            const newCloseBtn = closeBtn.cloneNode(true);
                            closeBtn.parentNode.replaceChild(newCloseBtn, closeBtn);

                            newCloseBtn.addEventListener("click", () => {
                                closeInvoiceOverlay();
                                restorePriorDisplays();
                            });
                        }

                        // Wire More Services button
                        const showCategoriesBtn = ov.querySelector('#showCategoriesBtn');
                        if (showCategoriesBtn) {
                            showCategoriesBtn.onclick = () => {
                                closeInvoiceOverlay();
                                showCategories();
                            };
                        }

                        // CLICKWRAP TERMS LOGIC
                        const oldTerms = ov.querySelector(".terms-wrap");
                        if (oldTerms) oldTerms.remove();

                        if (State.serviceRequest.length > 0) {
                            const termsWrap = create("div", {
                                class: "terms-wrap"
                            });
                            const checkbox = create("input", {
                                type: "checkbox",
                                id: "termsCheck"
                            });
                            const label = create("label", {
                                for: "termsCheck",
                                style: "cursor:pointer"
                            });
                            label.innerHTML =
                                'I have reviewed and agree to the <a href="https://tommichael88.github.io/booktomnyc/ServiceAgreement" target="_blank" style="text-decoration:underline;">Service Agreement</a>.';
                            termsWrap.appendChild(checkbox);
                            termsWrap.appendChild(label);

                            const actionBtns =
                                ov.querySelector(".action-buttons") ||
                                ov.querySelector(".invoice-action-buttons");
                            if (actionBtns)
                                actionBtns.parentNode.insertBefore(termsWrap, actionBtns);

                            if (checkoutBtn) {
                                checkoutBtn.disabled = true;
                                checkbox.addEventListener(
                                    "change",
                                    (e) => (checkoutBtn.disabled = !e.target.checked)
                                );
                                checkoutBtn.onclick = () => {
                                    if (!checkbox.checked) return toast("Please agree to the terms.");
                                    toast("Proceeding to booking...");
                                    // Implement final checkout navigation here
                                };
                            }
                        }
                    }

                    function createInvoiceServiceItem(svc) {
                        const el = create("div", {
                            class: "invoice-service-item"
                        });
                        el.appendChild(
                            create("div", {
                                class: "invoice-service-icon",
                                text: svc.icon || "üîß"
                            })
                        );
                        const tw = create("div", {
                            class: "invoice-service-text"
                        });
                        tw.appendChild(
                            create("h4", {
                                text: svc.name
                            })
                        );
                        tw.appendChild(
                            create("div", {
                                class: "invoice-service-detail",
                                text: svc.detail || ""
                            })
                        );
                        if (
                            svc.notes &&
                            (!svc.furnitureItems || svc.furnitureItems.length === 0)
                        ) {
                            tw.appendChild(
                                create("div", {})
                            );
                        }
                        if (svc.furnitureItems && svc.furnitureItems.length > 0) {
                            const fwrap = create("div", {
                                class: "requested-service-furniture"
                            });
                            svc.furnitureItems.forEach((fi, idx) => {
                                const fitem = create("span", {
                                    class: "f-item"
                                });
                                fitem.appendChild(
                                    create("span", {
                                        text: fi.label
                                    })
                                );
                                const rem = create("button", {
                                    type: "button",
                                    text: "‚úï"
                                });
                                rem.addEventListener(
                                    "click",
                                    () => {
                                        removeFurnitureItemFromService(svc.id, idx);
                                        renderInvoiceOverlay();
                                        updateserviceRequestUI();
                                    }, {
                                        passive: true
                                    }
                                );
                                fitem.appendChild(rem);
                                fwrap.appendChild(fitem);
                            });
                            tw.appendChild(fwrap);
                        }
                        const price = create("div", {
                            class: "invoice-service-price",
                            text: svc.price || "$0"
                        });
                        const rem = create("button", {
                            class: "invoice-remove-service-btn",
                            text: "‚úï",
                            type: "button"
                        });
                        rem.addEventListener(
                            "click",
                            () => {
                                removeServiceFromCart(svc.id);
                                renderInvoiceOverlay();
                                updateserviceRequestUI();
                            }, {
                                passive: true
                            }
                        );
                        el.appendChild(tw);
                        el.appendChild(price);
                        el.appendChild(rem);
                        return el;
                    }
                    /* ---------- cart helpers ---------- */
                    function removeFurnitureItemFromService(serviceId, itemIndex) {
                        const svc = State.serviceRequest.find((s) => s.id === serviceId);
                        if (!svc || !Array.isArray(svc.furnitureItems)) return;
                        // Remove the specific furniture item
                        svc.furnitureItems.splice(itemIndex, 1);
                        // If this is an Assembly service and no furniture items left, remove the entire service
                        if (svc.name === "Assembly" && svc.furnitureItems.length === 0) {
                            removeServiceFromCart(serviceId);
                            return;
                        }
                        // Recalculate the assembly total with remaining items
                        if (svc.name === "Assembly") {
                            const itemsMinutes = svc.furnitureItems.map(
                                (fi) =>
                                fi.minutes ||
                                window.SERVICE_DATA.FURNITURE_MINUTES[fi.key] ||
                                window.SERVICE_DATA.GENERIC_FURNITURE_MINUTES[fi.label] ||
                                60
                            );
                            const charge = computeFurnitureCharge(itemsMinutes);
                            svc.estimatedHours = charge.hours;
                            svc.estimatedPrice = charge.price;
                            svc.price = `$${charge.price.toFixed(2)}`;
                            svc.notes = `Furniture Items: ${svc.furnitureItems
          .map((f) => f.label)
          .join(", ")} ‚Ä¢ Est: ${charge.hours.toFixed(
          2
        )} hr ‚Ä¢ $${charge.price.toFixed(2)}`;
                        }
                        persistCartPlain(State.serviceRequest);
                        updateserviceRequestUI();
                        updateFabVisibility();
                    }

                    function addToCart(entry) {
                        if (!entry || !entry.id) return;
                        // SPECIAL CASE: For Furniture Assembly services, combine them into one
                        if (
                            entry.category === "Furniture Fixes & Assembly" &&
                            entry.name === "Assembly"
                        ) {
                            // Check if there's already an Assembly service in the cart
                            const existingAssembly = State.serviceRequest.find(
                                (s) =>
                                s.category === "Furniture Fixes & Assembly" && s.name === "Assembly"
                            );
                            if (existingAssembly) {
                                // Merge furniture items into the existing assembly service
                                if (entry.furnitureItems && entry.furnitureItems.length > 0) {
                                    existingAssembly.furnitureItems = [
                                        ...(existingAssembly.furnitureItems || []),
                                        ...entry.furnitureItems
                                    ];
                                    // Recalculate the total for the combined assembly
                                    const allMinutes = existingAssembly.furnitureItems.map(
                                        (fi) =>
                                        fi.minutes ||
                                        window.SERVICE_DATA.FURNITURE_MINUTES[fi.key] ||
                                        window.SERVICE_DATA.GENERIC_FURNITURE_MINUTES[fi.label] ||
                                        60
                                    );
                                    const charge = computeFurnitureCharge(allMinutes);
                                    existingAssembly.estimatedHours = charge.hours;
                                    existingAssembly.estimatedPrice = charge.price;
                                    existingAssembly.price = `$${charge.price.toFixed(2)}`;
                                    existingAssembly.notes = `Furniture Items: ${existingAssembly.furnitureItems
              .map((f) => f.label)
              .join(", ")} ‚Ä¢ Est: ${charge.hours.toFixed(
              2
            )} hr ‚Ä¢ $${charge.price.toFixed(2)}`;
                                    // Remove the new entry since we merged it
                                    // Just update the UI and persist
                                    updateserviceRequestUI();
                                    updateFabVisibility();
                                    persistCartPlain(State.serviceRequest);
                                    return; // Don't push the new entry
                                }
                            }
                        }
                        // Default behavior for non-assembly services or first assembly service
                        State.serviceRequest.push(entry);
                        updateserviceRequestUI();
                        updateFabVisibility();
                        persistCartPlain(State.serviceRequest);
                    }

                    function removeServiceFromCart(id) {
                        State.serviceRequest = State.serviceRequest.filter((s) => s.id !== id);
                        updateserviceRequestUI();
                        updateFabVisibility();
                        persistCartPlain(State.serviceRequest);
                    }

                    function updateserviceRequestUI() {
                        try {
                            const list = DOM.serviceRequestList;
                            if (!list) return;
                            // Clear list safely
                            while (list.firstChild) list.removeChild(list.firstChild);
                            let total = 0;
                            State.serviceRequest.forEach((svc) => {
                                const item = create("div", {
                                    class: "requested-service-item"
                                });
                                item.appendChild(
                                    create("div", {
                                        class: "requested-service-icon",
                                        text: svc.icon || "üîß"
                                    })
                                );
                                const tw = create("div", {
                                    class: "requested-service-text"
                                });
                                tw.appendChild(
                                    create("h4", {
                                        text: svc.name
                                    })
                                );
                                tw.appendChild(
                                    create("div", {
                                        class: "service-detail",
                                        text: svc.detail || ""
                                    })
                                );
                                if (
                                    svc.notes &&
                                    (!svc.furnitureItems || svc.furnitureItems.length === 0)
                                ) {
                                    tw.appendChild(
                                        create("div", {
                                            class: "service-notes",
                                            text: svc.notes
                                        })
                                    );
                                }
                                if (svc.furnitureItems && svc.furnitureItems.length > 0) {
                                    const fwrap = create("div", {
                                        class: "requested-service-furniture"
                                    });
                                    svc.furnitureItems.forEach((fi, idx) => {
                                        const fitem = create("span", {
                                            class: "f-item"
                                        });
                                        fitem.appendChild(
                                            create("span", {
                                                text: fi.label
                                            })
                                        );
                                        const rem = create("button", {
                                            type: "button",
                                            text: "‚úï"
                                        });
                                        rem.addEventListener(
                                            "click",
                                            () => removeFurnitureItemFromService(svc.id, idx), {
                                                passive: true
                                            }
                                        );
                                        fitem.appendChild(rem);
                                        fwrap.appendChild(fitem);
                                    });
                                    tw.appendChild(fwrap);
                                    if (svc.notes && svc.notes.trim().length > 0) {
                                        tw.appendChild(
                                            create("div", {})
                                        );
                                    }
                                }
                                const price = create("div", {
                                    class: "requested-service-price",
                                    text: svc.price || "$0"
                                });
                                const rem = create("button", {
                                    class: "remove-service-btn",
                                    text: "‚úï",
                                    type: "button"
                                });
                                rem.addEventListener("click", () => removeServiceFromCart(svc.id), {
                                    passive: true
                                });
                                item.appendChild(tw);
                                item.appendChild(price);
                                item.appendChild(rem);
                                list.appendChild(item);
                                total += parsePriceToInt(svc.price);
                            });
                            // Update UI state
                            if (State.serviceRequest.length > 0) {
                                if (DOM.estimateTotal) DOM.estimateTotal.style.display = "flex";
                                if (DOM.totalAmount) safeText(DOM.totalAmount, `$${total}.00`);
                                if (DOM.serviceRequestSection)
                                    DOM.serviceRequestSection.style.display = "block";
                            } else {
                                if (DOM.estimateTotal) DOM.estimateTotal.style.display = "none";
                                if (DOM.serviceRequestSection)
                                    DOM.serviceRequestSection.style.display = "none";
                            }
                            // Update counts
                            if (DOM.serviceCount)
                                safeText(DOM.serviceCount, String(State.serviceRequest.length));
                            if (DOM.fabCount)
                                safeText(DOM.fabCount, String(State.serviceRequest.length));
                            persistCartPlain(State.serviceRequest);
                        } catch (e) {
                            console.error("Error updating service request UI:", e);
                        }
                    }

                    function updateFabVisibility() {
                        try {
                            if (!DOM.cartFab || !DOM.fabCount) return;
                            const hasItems = State.serviceRequest.length > 0;
                            if (hasItems) {
                                // Use flex to align icon and text correctly
                                DOM.cartFab.style.display = "flex";
                                DOM.cartFab.classList.add("visible");
                                safeText(DOM.fabCount, String(State.serviceRequest.length));
                                // Pulse animation
                                DOM.cartFab.classList.add("pulse-animate");
                                setTimeout(() => {
                                    DOM.cartFab.classList.remove("pulse-animate");
                                }, 600);
                            } else {
                                DOM.cartFab.style.display = "none";
                                DOM.cartFab.classList.remove("visible");
                            }
                            // Update other counters if they exist
                            const otherCartCounts = qAll(".cart-count");
                            otherCartCounts.forEach((el) => {
                                safeText(el, String(State.serviceRequest.length));
                            });
                        } catch (e) {
                            console.error("Error updating FAB visibility:", e);
                        }
                    }

                    function wireFab() {
                        // We use DOM.cartFab which now points to the new inline button
                        const fab = DOM.cartFab;
                        if (!fab) return;
                        // Ensure we prevent default to stop any parent interactions
                        fab.addEventListener(
                            "click",
                            (ev) => {
                                ev.preventDefault();
                                ev.stopPropagation();
                                toggleCartInvoice();
                            }, {
                                passive: false
                            }
                        );
                        fab.addEventListener(
                            "touchend",
                            (ev) => {
                                ev.preventDefault();
                                ev.stopPropagation();
                                fab.classList.remove("tap-animate");
                                toggleCartInvoice();
                            }, {
                                passive: false
                            }
                        );
                    }
                    /* ---------- ENHANCED CONTACT TOOLBAR WITH SEQUENTIAL LIGHTING ---------- */
                    function wireContactToolbar() {
                        const contactBtn = q("#contactBtn");
                        const contactToolbar = q("#contactToolbar");
                        if (!contactBtn || !contactToolbar) return;

                        contactBtn.setAttribute("aria-controls", "contactToolbar");
                        contactBtn.setAttribute("aria-expanded", "false");
                        contactToolbar.setAttribute("role", "menu");
                        contactToolbar.setAttribute("tabindex", "-1");
                        contactToolbar
                            .querySelectorAll("a, button")
                            .forEach((el) => el.setAttribute("role", "menuitem"));

                        contactBtn.addEventListener("click", (e) => {
                            e.stopPropagation();
                            const isOpen = contactToolbar.classList.toggle("active");
                            contactBtn.setAttribute("aria-expanded", String(isOpen));

                            if (isOpen) {
                                // Remove the all-lit class to reset the animation
                                contactToolbar.classList.remove("all-lit");
                                contactToolbar.focus();

                                // Add the all-lit class after all items have been lit (0.7s + 0.4s = 1.1s)
                                setTimeout(() => {
                                    contactToolbar.classList.add("all-lit");
                                }, 1100); // Match the longest animation delay + duration
                            } else {
                                // When closing, remove all-lit class
                                contactToolbar.classList.remove("all-lit");
                            }
                        });

                        contactBtn.addEventListener("keydown", (ev) => {
                            if (ev.key === "Enter" || ev.key === " ") {
                                ev.preventDefault();
                                contactBtn.click();
                            }
                            if (ev.key === "Escape") {
                                contactToolbar.classList.remove("active");
                                contactToolbar.classList.remove("all-lit");
                                contactBtn.setAttribute("aria-expanded", "false");
                                contactBtn.focus();
                            }
                        });

                        contactToolbar.addEventListener("click", (ev) => {
                            ev.stopPropagation();
                        });

                        contactToolbar.addEventListener("keydown", (ev) => {
                            if (ev.key === "Escape") {
                                contactToolbar.classList.remove("active");
                                contactToolbar.classList.remove("all-lit");
                                contactBtn.setAttribute("aria-expanded", "false");
                                contactBtn.focus();
                            }
                        });

                        document.addEventListener(
                            "click",
                            (ev) => {
                                if (!contactToolbar.contains(ev.target) && ev.target !== contactBtn) {
                                    if (contactToolbar.classList.contains("active")) {
                                        contactToolbar.classList.remove("active");
                                        contactToolbar.classList.remove("all-lit");
                                        contactBtn.setAttribute("aria-expanded", "false");
                                    }
                                }
                            }, {
                                passive: true
                            }
                        );
                    }
                    /* ---------- category tile handling ---------- */
                    function buildCategoryTiles() {
                        const grid = DOM.categoriesGrid;
                        if (!grid) return;
                        // Add click event listeners to all category tiles
                        qAll(".category-tile", grid).forEach((tile) => {
                            if (!tile.hasAttribute("tabindex")) tile.setAttribute("tabindex", "0");
                            // Remove any existing event listeners to prevent duplicates
                            const newTile = tile.cloneNode(true);
                            tile.parentNode.replaceChild(newTile, tile);
                            newTile.addEventListener(
                                "click",
                                (ev) => {
                                    ev.preventDefault();
                                    ev.stopPropagation();
                                    handleCategorySelect(newTile.dataset.category);
                                }, {
                                    passive: false
                                }
                            );
                            newTile.addEventListener("keydown", (ev) => {
                                if (ev.key === "Enter" || ev.key === " ") {
                                    ev.preventDefault();
                                    handleCategorySelect(newTile.dataset.category);
                                }
                            });
                            // Add touch support for mobile
                            newTile.addEventListener(
                                "touchstart",
                                (ev) => {
                                    ev.preventDefault();
                                    ev.stopPropagation();
                                    newTile.classList.add("tap-animate");
                                }, {
                                    passive: false
                                }
                            );
                            newTile.addEventListener(
                                "touchend",
                                (ev) => {
                                    ev.preventDefault();
                                    ev.stopPropagation();
                                    newTile.classList.remove("tap-animate");
                                    handleCategorySelect(newTile.dataset.category);
                                }, {
                                    passive: false
                                }
                            );
                        });
                    }

                    function showCategories() {
                        if (DOM.categoriesGrid) DOM.categoriesGrid.style.display = "grid";
                        if (DOM.serviceRequestContainer)
                            DOM.serviceRequestContainer.style.display = "none";
                        if (DOM.servicedetailsContainer)
                            DOM.servicedetailsContainer.style.display = "none";
                        if (DOM.selectedSection) DOM.selectedSection.innerHTML = "";
                        if (DOM.serviceRequestSection)
                            DOM.serviceRequestSection.style.display = "none";
                        // Close invoice overlay if open
                        closeInvoiceOverlay();
                    }

                    function handleCategorySelect(category) {
                        try {
                            if (!category) return;
                            // Close invoice overlay if open
                            closeInvoiceOverlay();
                            if (DOM.categoriesGrid) DOM.categoriesGrid.style.display = "none";
                            const sel = DOM.selectedSection;
                            if (!sel) return;
                            // Clear existing content safely
                            while (sel.firstChild) sel.removeChild(sel.firstChild);
                            sel.appendChild(
                                create("h3", {
                                    text: `${category} Services`
                                })
                            );
                            const gridBox = create("div", {
                                class: "service-item-grid"
                            });
                            const cat = window.SERVICE_DATA.serviceData[category] || null;
                            if (!cat) {
                                gridBox.appendChild(
                                    create("p", {
                                        text: "No services for this category."
                                    })
                                );
                                sel.appendChild(gridBox);
                                return;
                            }
                            Object.keys(cat).forEach((svc) => {
                                const info = cat[svc];
                                const card = create("div", {
                                    class: "service-item-card",
                                    tabindex: "0",
                                    role: "button",
                                    "data-service": svc,
                                    "aria-label": `Select ${svc} service`
                                });
                                card.appendChild(
                                    create("div", {
                                        class: "service-item-icon",
                                        text: info.icon || "üîß"
                                    })
                                );
                                card.appendChild(
                                    create("h4", {
                                        text: svc
                                    })
                                );
                                card.appendChild(
                                    create("p", {
                                        text: info.description || ""
                                    })
                                );
                                card.appendChild(
                                    create("div", {
                                        class: "service-price",
                                        text: info.price || ""
                                    })
                                );
                                // Add click event
                                card.addEventListener(
                                    "click",
                                    (ev) => {
                                        ev.preventDefault();
                                        ev.stopPropagation();
                                        showServiceDetails(category, svc);
                                    }, {
                                        passive: false
                                    }
                                );
                                // Add keyboard support
                                card.addEventListener("keydown", (ev) => {
                                    if (ev.key === "Enter" || ev.key === " ") {
                                        ev.preventDefault();
                                        showServiceDetails(category, svc);
                                    }
                                });
                                // Add touch support
                                card.addEventListener(
                                    "touchstart",
                                    (ev) => {
                                        ev.preventDefault();
                                        ev.stopPropagation();
                                        card.classList.add("tap-animate");
                                    }, {
                                        passive: false
                                    }
                                );
                                card.addEventListener(
                                    "touchend",
                                    (ev) => {
                                        ev.preventDefault();
                                        ev.stopPropagation();
                                        card.classList.remove("tap-animate");
                                        showServiceDetails(category, svc);
                                    }, {
                                        passive: false
                                    }
                                );
                                gridBox.appendChild(card);
                            });
                            sel.appendChild(gridBox);
                            const back = create("button", {
                                class: "back-button",
                                text: "Back to Categories",
                                type: "button"
                            });
                            back.addEventListener(
                                "click",
                                () => {
                                    showCategories();
                                }, {
                                    passive: true
                                }
                            );
                            sel.appendChild(back);
                            if (DOM.serviceRequestContainer)
                                DOM.serviceRequestContainer.style.display = "block";
                            if (DOM.servicedetailsContainer)
                                DOM.servicedetailsContainer.style.display = "none";
                            sel.scrollIntoView({
                                behavior: "smooth",
                                block: "start"
                            });
                        } catch (e) {
                            console.error("Error handling category select:", e);
                        }
                    }

                    /* ---------- UPDATED UI: Service Details & Intake ---------- */
                    /* ---------- UPDATED: Service Details with Conversational Intake ---------- */
                    function showServiceDetails(category, svc) {
                        try {
                            if (!category || !svc) return;
                            const info =
                                window.SERVICE_DATA.serviceData[category] &&
                                window.SERVICE_DATA.serviceData[category][svc] ?
                                window.SERVICE_DATA.serviceData[category][svc] :
                                null;
                            const container = DOM.servicedetailsContainer;
                            if (!container) return;

                            // Hide others
                            if (DOM.categoriesGrid) DOM.categoriesGrid.style.display = "none";
                            if (DOM.serviceRequestContainer)
                                DOM.serviceRequestContainer.style.display = "none";
                            container.innerHTML = "";
                            container.style.display = "block";

                            // Header
                            container.appendChild(create("h3", {
                                text: svc
                            }));

                            if (!info) {
                                container.appendChild(
                                    create("p", {
                                        text: "Service information not found."
                                    })
                                );
                                return;
                            }

                            // --- PATH 1: FURNITURE (Using Search List) ---
                            if (info.requiresFurnitureSelection) {
                                renderFurnitureSelection(container, category, svc, info);
                                return;
                            }

                            // --- PATH 2: CONVERSATIONAL INTAKE FLOW ---
                            if (info.intakeConfig && Array.isArray(info.intakeConfig)) {
                                renderConversationalIntake(container, category, svc, info);
                                return;
                            }

                            // --- PATH 3: LEGACY DETAILS CARDS (for services without intakeConfig) ---
                            const inputContainer = create("div", {
                                class: "service-input-container"
                            });
                            let selectedDetail = null;

                            // Job Detail Cards for services with details array
                            if (info.details && Array.isArray(info.details) && info.details.length > 0) {
                                const detailsGrid = create("div", {
                                    class: "details-grid"
                                });

                                info.details.forEach(detail => {
                                    const card = create("div", {
                                        class: "detail-card",
                                        text: detail,
                                        tabindex: "0",
                                        role: "button"
                                    });

                                    card.addEventListener("click", () => {
                                        Array.from(detailsGrid.children).forEach(c => c.classList.remove("selected"));
                                        card.classList.add("selected");
                                        selectedDetail = detail;
                                        notes.style.display = "";
                                        addBtn.style.display = "";
                                        addBtn.disabled = false;
                                    }, {
                                        passive: true
                                    });

                                    card.addEventListener("touchstart", (ev) => {
                                        ev.preventDefault();
                                        ev.stopPropagation();
                                        card.classList.add("tap-animate");
                                    }, {
                                        passive: false
                                    });

                                    card.addEventListener("touchend", (ev) => {
                                        ev.preventDefault();
                                        ev.stopPropagation();
                                        card.classList.remove("tap-animate");
                                        card.click();
                                    }, {
                                        passive: false
                                    });

                                    detailsGrid.appendChild(card);
                                });

                                inputContainer.appendChild(detailsGrid);
                            }

                            // Notes Field
                            const notesLabel = create("span", {
                                class: "intake-label",
                                text: "Additional Details (Optional)"
                            });
                            inputContainer.appendChild(notesLabel);

                            const notes = create("textarea", {
                                class: "service-input-area",
                                placeholder: "Any specific details or notes for the technician...",
                                rows: "3"
                            });
                            notes.style.display = "none";
                            inputContainer.appendChild(notes);

                            // Enable add button when user types notes
                            notes.addEventListener("input", () => {
                                if (notes.value.trim().length > 0) {
                                    addBtn.style.display = "";
                                    addBtn.disabled = false;
                                } else if (!selectedDetail) {
                                    addBtn.style.display = "none";
                                    addBtn.disabled = true;
                                }
                            }, {
                                passive: true
                            });

                            container.appendChild(inputContainer);

                            // Add to Cart Button
                            const addBtn = create("button", {
                                class: "book-more-button",
                                text: "Add to Cart",
                                type: "button",
                                style: "width: 100%; margin-top: 15px; display: none;"
                            });

                            addBtn.addEventListener("click", () => {
                                let finalNotes = "";
                                if (selectedDetail) {
                                    finalNotes = `Detail: ${selectedDetail}`;
                                }
                                if (notes.value.trim()) {
                                    if (finalNotes) finalNotes += " | ";
                                    finalNotes += notes.value.trim();
                                }

                                const entry = {
                                    id: `${category}-${svc}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
                                    category,
                                    name: svc,
                                    price: info.price || "$0",
                                    icon: info.icon || "üîß",
                                    detail: selectedDetail || "Standard Service",
                                    notes: finalNotes || "No additional details",
                                    furnitureItems: [],
                                    estimatedHours: 0,
                                    estimatedPrice: 0
                                };

                                addToCart(entry);
                                container.style.display = "none";
                                if (DOM.serviceRequestSection) DOM.serviceRequestSection.style.display = "block";
                                updateserviceRequestUI();
                                updateFabVisibility();
                                persistCartPlain(State.serviceRequest);
                                toast("Service added to cart!");
                            });

                            container.appendChild(addBtn);

                            // Back Button
                            const back = create("button", {
                                class: "back-button",
                                text: "Back to Services",
                                type: "button"
                            });
                            back.addEventListener("click", () => {
                                container.style.display = "none";
                                handleCategorySelect(category);
                            });
                            container.appendChild(back);

                        } catch (e) {
                            console.error("Error showing service details:", e);
                            toast("Error loading service details. Please try again.");
                        }
                    }

                    /* ---------- NEW: Conversational Intake System ---------- */
/* ---------- ENHANCED CONVERSATIONAL INTAKE WITH PROGRESS INDICATOR ---------- */
function renderConversationalIntake(container, category, svc, info) {
    const intakeConfig = info.intakeConfig;
    let currentQuestionIndex = 0;
    const answers = {};
    
    // Clear container
    container.innerHTML = '';
    container.style.display = 'block';
    
    // Create conversational UI
    const conversationUI = create('div', {
        class: 'conversational-intake'
    });
    
    // Create progress indicator with sliding dots
    const progressContainer = create('div', {
        class: 'progress-indicator'
    });
    
    const dots = [];
    for (let i = 0; i < intakeConfig.length; i++) {
        const dot = create('button', {
            class: 'progress-dot',
            'data-index': i,
            type: 'button',
            'aria-label': `Question ${i + 1}`
        });
        
        // Add click event to navigate to specific question
        dot.addEventListener('click', (e) => {
            e.stopPropagation();
            const targetIndex = parseInt(dot.dataset.index);
            if (targetIndex <= currentQuestionIndex || answers[targetIndex]) {
                currentQuestionIndex = targetIndex;
                updateProgressIndicator();
                renderQuestion();
                updateMiniBackButton();
            }
        });
        
        dots.push(dot);
        progressContainer.appendChild(dot);
    }
    
    // Current step indicator (sliding line)
    const currentStepIndicator = create('div', {
        class: 'current-step-indicator'
    });
    progressContainer.appendChild(currentStepIndicator);
    
    // Mini back button (initially hidden)
    const miniBackButton = create('button', {
        class: 'mini-back-button',
        type: 'button',
        text: ' Back',
        disabled: true
    });
    
    miniBackButton.addEventListener('click', () => {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            updateProgressIndicator();
            renderQuestion();
            updateMiniBackButton();
        }
    });
    
    // Question container
    const questionContainer = create('div', {
        class: 'question-container'
    });
    
    // Question counter
    const questionCounter = create('div', {
        class: 'question-counter',
        text: `Question ${currentQuestionIndex + 1} of ${intakeConfig.length}`
    });
    
    // Summary view (hidden initially)
    const summaryView = create('div', {
        class: 'summary-view',
        style: 'display: none;'
    });
    
    // Build conversation UI structure
    conversationUI.appendChild(questionContainer);
            conversationUI.appendChild(progressContainer);
    conversationUI.appendChild(questionCounter);
        conversationUI.appendChild(miniBackButton);
    conversationUI.appendChild(summaryView);
    
    container.appendChild(conversationUI);
    
    // Update progress indicator function
    function updateProgressIndicator() {
        const totalQuestions = intakeConfig.length;
        const completedQuestions = Object.keys(answers).length;
        
        // Update dots
        dots.forEach((dot, index) => {
            dot.classList.remove('active', 'completed', 'pulse');
            
            if (index === currentQuestionIndex) {
                dot.classList.add('active', 'pulse');
            } else if (answers[index]) {
                dot.classList.add('completed');
            }
            
            // Enable/disable click based on progress
            dot.style.cursor = (index <= currentQuestionIndex || answers[index]) ? 'pointer' : 'default';
        });
        
        // Update current step indicator position
        const dotWidth = 14; // px
        const dotGap = 10; // px
        const progressWidth = (currentQuestionIndex / (totalQuestions - 1)) * 70; // 70% width between first and last dot
        currentStepIndicator.style.width = `${progressWidth}%`;
        
        // Update question counter
        questionCounter.textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
    }
    
    // Update mini back button visibility
    function updateMiniBackButton() {
        if (currentQuestionIndex > 0) {
            miniBackButton.classList.add('visible');
            miniBackButton.disabled = false;
        } else {
            miniBackButton.classList.remove('visible');
            miniBackButton.disabled = true;
        }
    }
    
    // Render current question
    function renderQuestion() {
        questionContainer.style.display = 'block';
        summaryView.style.display = 'none';
        
        const currentQuestion = intakeConfig[currentQuestionIndex];
        
        // Clear question container
        questionContainer.innerHTML = '';
        
        // Question text
        const questionText = create('div', {
            class: 'question-text',
            text: currentQuestion.label
        });
        questionContainer.appendChild(questionText);
        
        // Options grid
        const optionsGrid = create('div', {
            class: 'options-grid-conversational'
        });
        
        currentQuestion.options.forEach((option) => {
            const optionBtn = create('button', {
                class: 'conversation-option-btn',
                text: option,
                type: 'button'
            });
            
            // Mark as selected if this was previously answered
            if (answers[currentQuestionIndex] === option) {
                optionBtn.classList.add('selected');
            }
            
            optionBtn.addEventListener('click', () => {
                // Store answer
                answers[currentQuestionIndex] = option;
                
                // Visual feedback
                optionBtn.classList.add('selected');
                
                // If this is the last question, show summary
                if (currentQuestionIndex === intakeConfig.length - 1) {
                    showSummary();
                } else {
                    // Move to next question
                    currentQuestionIndex++;
                    updateProgressIndicator();
                    renderQuestion();
                    updateMiniBackButton();
                }
            });
            
            // Touch support
            optionBtn.addEventListener('touchstart', (ev) => {
                ev.preventDefault();
                optionBtn.classList.add('tap-animate');
            }, { passive: false });
            
            optionBtn.addEventListener('touchend', (ev) => {
                ev.preventDefault();
                optionBtn.classList.remove('tap-animate');
                optionBtn.click();
            }, { passive: false });
            
            optionsGrid.appendChild(optionBtn);
        });
        
        questionContainer.appendChild(optionsGrid);
    }
    
    // Show summary view
    function showSummary() {
        questionContainer.style.display = 'none';
        summaryView.style.display = 'block';
        
        // Clear summary view
        summaryView.innerHTML = '';
        
        // Summary title
        const summaryTitle = create('div', {
            class: 'summary-title',
            text: 'Review Your Answers'
        });
        summaryView.appendChild(summaryTitle);
        
        // Summary list
        const summaryList = create('div', {
            class: 'summary-list'
        });
        
        intakeConfig.forEach((question, index) => {
            const summaryItem = create('div', {
                class: 'summary-item'
            });
            
            const questionText = create('div', {
                class: 'summary-question',
                text: question.label
            });
            
            const editButton = create('button', {
                class: 'summary-edit-btn',
                type: 'button',
                html: '‚úèÔ∏è'
            });
            
            editButton.addEventListener('click', () => {
                currentQuestionIndex = index;
                updateProgressIndicator();
                renderQuestion();
                updateMiniBackButton();
            });
            
            const answerText = create('div', {
                class: 'summary-answer',
                text: answers[index] || 'Not answered'
            });
            
            
            
            summaryItem.appendChild(questionText);
            summaryItem.appendChild(answerText);
            summaryItem.appendChild(editButton);
            summaryList.appendChild(summaryItem);
        });
        
        summaryView.appendChild(summaryList);
        
        // Summary actions
        const summaryActions = create('div', {
            class: 'summary-actions'
        });
        
        const summaryBackBtn = create('button', {
            class: 'summary-back-btn',
            type: 'button',
            text: '‚Üê Back to Questions'
        });
        
        summaryBackBtn.addEventListener('click', () => {
            // Go to last answered question
            const lastIndex = Math.max(...Object.keys(answers).map(Number));
            currentQuestionIndex = lastIndex;
            updateProgressIndicator();
            renderQuestion();
            updateMiniBackButton();
        });
        
        const summarySubmitBtn = create('button', {
            class: 'summary-submit-btn',
            type: 'button',
            text: '‚úì Submit Answers'
        });
        
        summarySubmitBtn.addEventListener('click', () => {
            // Build notes from answers
            let finalNotes = "INTAKE DETAILS: ";
            Object.keys(answers).forEach((key, index) => {
                const question = intakeConfig[key];
                if (question) {
                    finalNotes += `${question.label}: ${answers[key]}`;
                    if (index < Object.keys(answers).length - 1) {
                        finalNotes += " ‚Ä¢ ";
                    }
                }
            });
            
            const entry = {
                id: `${category}-${svc}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
                category,
                name: svc,
                price: info.price || "$0",
                icon: info.icon || "üîß",
                detail: "Details provided",
                notes: finalNotes,
                furnitureItems: [],
                estimatedHours: 0,
                estimatedPrice: 0
            };
            
            addToCart(entry);
            container.style.display = "none";
            if (DOM.serviceRequestSection) DOM.serviceRequestSection.style.display = "block";
            updateserviceRequestUI();
            updateFabVisibility();
            persistCartPlain(State.serviceRequest);
            toast("Service added to cart!");
        });
        
        summaryActions.appendChild(summaryBackBtn);
        summaryActions.appendChild(summarySubmitBtn);
        summaryView.appendChild(summaryActions);
    }
    
    // Back to services button
    const backToServices = create('button', {
        class: 'back-button',
        text: 'Back to Services',
        type: 'button',
        style: 'margin-top: 20px;'
    });
    
    backToServices.addEventListener('click', () => {
        container.style.display = 'none';
        handleCategorySelect(category);
    });
    
    container.appendChild(backToServices);
    
    // Initialize
    updateProgressIndicator();
    renderQuestion();
    updateMiniBackButton();
}

                    function renderFurnitureSelection(container, category, svc, info) {
                        const isRepair = svc.toLowerCase().includes("repair");

                        // Search Input
                        const searchInput = create("input", {
                            type: "text",
                            class: "furniture-search-input",
                            placeholder: 'Search furniture (e.g. "Desk")...'
                        });
                        const listContainer = create("div", {
                            class: "furniture-list-container"
                        });

                        // Build Master List
                        let masterList = [];
                        if (!isRepair) {
                            Object.keys(window.SERVICE_DATA.FURNITURE_MINUTES).forEach((key) =>
                                masterList.push({
                                    key: key,
                                    label: key,
                                    type: "IKEA"
                                })
                            );
                            Object.keys(
                                window.SERVICE_DATA.GENERIC_FURNITURE_MINUTES
                            ).forEach((key) =>
                                masterList.push({
                                    key: key,
                                    label: "Generic " + key,
                                    type: "Generic"
                                })
                            );
                        } else {
                            Object.keys(
                                window.SERVICE_DATA.GENERIC_FURNITURE_MINUTES
                            ).forEach((key) =>
                                masterList.push({
                                    key: key,
                                    label: key,
                                    type: "Generic"
                                })
                            );
                        }

                        const renderList = (filterText) => {
                            listContainer.innerHTML = "";
                            const term = filterText.toLowerCase();
                            const filtered = masterList.filter((item) =>
                                item.label.toLowerCase().includes(term)
                            );
                            const displaySet = filtered.slice(0, 50); // limit for perf

                            if (displaySet.length === 0) {
                                listContainer.appendChild(
                                    create("div", {
                                        text: "No items found",
                                        style: "padding:10px;"
                                    })
                                );
                                return;
                            }

                            displaySet.forEach((item) => {
                                const row = create("div", {
                                    class: "furniture-list-item",
                                    text: item.label
                                });
                                row.addEventListener("click", () => {
                                    let minutes = 60;
                                    if (item.type === "IKEA")
                                        minutes = window.SERVICE_DATA.FURNITURE_MINUTES[item.key] || 60;
                                    else
                                        minutes =
                                        window.SERVICE_DATA.GENERIC_FURNITURE_MINUTES[item.key] || 60;

                                    const entry = {
                                        key: item.key,
                                        label: item.label,
                                        minutes,
                                        isIkea: item.type === "IKEA"
                                    };
                                    State.furnitureItems.push(entry);
                                    updateSelectedFurnitureUI(container, category, svc, info);
                                    searchInput.value = "";
                                    renderList("");
                                    toast(`Added ${item.label}`);
                                });
                                listContainer.appendChild(row);
                            });
                        };
                        renderList("");
                        searchInput.addEventListener("input", (e) => renderList(e.target.value));

                        container.appendChild(
                            create("h4", {
                                text: isRepair ? "Search Item to Repair" : "Search Item to Assemble"
                            })
                        );
                        container.appendChild(searchInput);
                        container.appendChild(listContainer);

                        const selectionWrapper = create("div", {
                            id: "furniture-selection-wrapper"
                        });
                        container.appendChild(selectionWrapper);
                        updateSelectedFurnitureUI(container, category, svc, info); // init wrapper

                        const back = create("button", {
                            class: "back-button",
                            text: "Back",
                            type: "button"
                        });
                        back.addEventListener("click", () => {
                            State.furnitureItems = []; // clear temp on back
                            container.style.display = "none";
                            handleCategorySelect(category);
                        });
                        container.appendChild(back);


                        function updateSelectedFurnitureUI(container, category, svc, info) {
                            const wrapper = container.querySelector("#furniture-selection-wrapper");
                            if (!wrapper) return;
                            wrapper.innerHTML = "";

                            if (State.furnitureItems.length > 0) {
                                const h5 = create("h5", {
                                    text: "Selected Items:",
                                    style: "margin-top:15px;"
                                });
                                wrapper.appendChild(h5);

                                const ul = create("ul", {
                                    class: "selected-furniture-list"
                                });

                                State.furnitureItems.forEach((item, idx) => {
                                    const li = create("li");
                                    li.appendChild(create("span", {
                                        text: item.label
                                    }));
                                    const btn = create("button", {
                                        text: "‚úï",
                                        class: "remove-item"
                                    });
                                    btn.addEventListener("click", () => {
                                        State.furnitureItems.splice(idx, 1);
                                        updateSelectedFurnitureUI(container, category, svc, info);
                                    });
                                    li.appendChild(btn);
                                    ul.appendChild(li);
                                });
                                wrapper.appendChild(ul);

                                // Create the "Add to Cart" button
                                const addBtn = create("button", {
                                    class: "book-more-button",
                                    text: "Add Items to Cart",
                                    style: "width:100%; margin-top:10px;"
                                });

                                addBtn.addEventListener("click", () => {
                                    const itemsMinutes = State.furnitureItems.map((fi) => fi.minutes);
                                    const charge = computeFurnitureCharge(itemsMinutes);
                                    const entry = {
                                        id: `${category}-${svc}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
                                        category,
                                        name: svc,
                                        price: `$${charge.price.toFixed(2)}`,
                                        icon: "üõãÔ∏è",
                                        detail: "Furniture Service",
                                        notes: `Items: ${State.furnitureItems.map((f) => f.label).join(", ")}`,
                                        furnitureItems: [...State.furnitureItems],
                                        estimatedHours: charge.hours,
                                        estimatedPrice: charge.price
                                    };

                                    addToCart(entry);
                                    State.furnitureItems = [];
                                    container.style.display = "none";

                                    // RESTORED: Show service request section instead of categories
                                    if (DOM.serviceRequestSection) {
                                        DOM.serviceRequestSection.style.display = "block";
                                    }

                                    // Update UI
                                    updateserviceRequestUI();
                                    updateFabVisibility();
                                    persistCartPlain(State.serviceRequest);
                                    toast("Furniture added to cart!");
                                });

                                wrapper.appendChild(addBtn);
                            }
                        }
                    } /* ---------- FAB wiring ---------- */
                    function wireContactToolbar() {
                        const contactBtn = q("#contactBtn");
                        const contactToolbar = q("#contactToolbar");
                        if (!contactBtn || !contactToolbar) return;
                        contactBtn.setAttribute("aria-controls", "contactToolbar");
                        contactBtn.setAttribute("aria-expanded", "false");
                        contactToolbar.setAttribute("role", "menu");
                        contactToolbar.setAttribute("tabindex", "-1");
                        contactToolbar
                            .querySelectorAll("a, button")
                            .forEach((el) => el.setAttribute("role", "menuitem"));
                        contactBtn.addEventListener("click", (e) => {
                            e.stopPropagation();
                            const isOpen = contactToolbar.classList.toggle("active");
                            contactBtn.setAttribute("aria-expanded", String(isOpen));
                            if (isOpen) contactToolbar.focus();
                        });
                        contactBtn.addEventListener("keydown", (ev) => {
                            if (ev.key === "Enter" || ev.key === " ") {
                                ev.preventDefault();
                                contactBtn.click();
                            }
                            if (ev.key === "Escape") {
                                contactToolbar.classList.remove("active");
                                contactBtn.setAttribute("aria-expanded", "false");
                                contactBtn.focus();
                            }
                        });
                        contactToolbar.addEventListener("click", (ev) => {
                            ev.stopPropagation();
                        });
                        contactToolbar.addEventListener("keydown", (ev) => {
                            if (ev.key === "Escape") {
                                contactToolbar.classList.remove("active");
                                contactBtn.setAttribute("aria-expanded", "false");
                                contactBtn.focus();
                            }
                        });
                        document.addEventListener(
                            "click",
                            (ev) => {
                                if (!contactToolbar.contains(ev.target) && ev.target !== contactBtn) {
                                    if (contactToolbar.classList.contains("active")) {
                                        contactToolbar.classList.remove("active");
                                        contactBtn.setAttribute("aria-expanded", "false");
                                    }
                                }
                            }, {
                                passive: true
                            }
                        );
                    }
                    /* ---------- cart invoice toggle ---------- */
                    function toggleCartInvoice() {
                        const ov = ensureInvoiceOverlayExists();
                        if (!ov) return;
                        if (ov.classList.contains("open")) {
                            closeInvoiceOverlay();
                            restorePriorDisplays();
                        } else {
                            capturePriorDisplays();
                            // Hide other sections
                            if (DOM.categoriesGrid) DOM.categoriesGrid.style.display = "none";
                            if (DOM.serviceRequestContainer)
                                DOM.serviceRequestContainer.style.display = "none";
                            if (DOM.servicedetailsContainer)
                                DOM.servicedetailsContainer.style.display = "none";
                            if (DOM.serviceRequestSection)
                                DOM.serviceRequestSection.style.display = "none";
                            openInvoiceOverlay();
                        }
                    }
                    /* ---------- global wiring ---------- */
                    function wireFab() {
                        // We use DOM.cartFab which now points to the new inline button
                        const fab = DOM.cartFab;
                        if (!fab) return;
                        // Ensure we prevent default to stop any parent interactions
                        fab.addEventListener(
                            "click",
                            (ev) => {
                                ev.preventDefault();
                                ev.stopPropagation();
                                toggleCartInvoice();
                            }, {
                                passive: false
                            }
                        );
                        fab.addEventListener(
                            "touchend",
                            (ev) => {
                                ev.preventDefault();
                                ev.stopPropagation();
                                fab.classList.remove("tap-animate");
                                toggleCartInvoice();
                            }, {
                                passive: false
                            }
                        );
                    }

                    function wireGlobal() {
                        // Initialize Cart Button Visibility
                        if (DOM.cartFab && State.serviceRequest.length > 0) {
                            DOM.cartFab.style.display = "flex";
                        }
                        wireFab();
                        wireContactToolbar();
                        // Wire checkout buttons
                        qAll(".checkout-button").forEach((b) => {
                            if (b.id !== "checkoutBtn") {
                                // Avoid duplicate wiring
                                b.addEventListener(
                                    "click",
                                    () => {
                                        if (!State.serviceRequest.length) {
                                            toast("Please add at least one service before booking.");
                                            return;
                                        }
                                        toggleCartInvoice();
                                    }, {
                                        passive: true
                                    }
                                );
                            }
                        });
                        // Wire clear all buttons
                        // Wire clear all buttons (for other potential clear buttons)
                        qAll('.clear-all-btn').forEach(b => {
                            if (b.id !== 'clearAllFurnitureInline' && b.id !== 'clearAllServicesBtn') {
                                b.addEventListener("click", () => {
                                    State.serviceRequest = [];
                                    persistCartPlain(State.serviceRequest);
                                    updateserviceRequestUI();
                                    updateFabVisibility();

                                    // Show categories and toast
                                    showCategories();
                                    toast("All services cleared");
                                }, {
                                    passive: true
                                });
                            }
                        });
                        // Wire specific clear all services button
                        const clearAllServicesBtn = q('#clearAllServicesBtn');
                        if (clearAllServicesBtn) {
                            clearAllServicesBtn.addEventListener("click", () => {
                                State.serviceRequest = [];
                                persistCartPlain(State.serviceRequest);
                                updateserviceRequestUI();
                                updateFabVisibility();
                                if (DOM.serviceRequestSection) DOM.serviceRequestSection.style.display = "none";

                                // Show categories and toast
                                showCategories();
                                toast("All services cleared");
                            }, {
                                passive: true
                            });
                        }
                        // Wire all "More Services" buttons to showCategories
                        qAll(".book-more-button").forEach((btn) => {
                            if (
                                !btn.id ||
                                (!btn.id.includes("addFurniture") && btn.id !== "bookMoreBtn")
                            ) {
                                btn.addEventListener("click", () => {
                                    try {
                                        showCategories();
                                    } catch (_) {}
                                    const grid = q("#categories-grid");
                                    if (grid)
                                        grid.scrollIntoView({
                                            behavior: "smooth",
                                            block: "start"
                                        });
                                });
                            }
                        });
                        // Wire specific book more button
                        const bookMoreBtn = q("#bookMoreBtn");
                        if (bookMoreBtn) {
                            bookMoreBtn.addEventListener("click", () => {
                                showCategories();
                                const grid = q("#categories-grid");
                                if (grid)
                                    grid.scrollIntoView({
                                        behavior: "smooth",
                                        block: "start"
                                    });
                            });
                        }
                        // Contact card button
                        const contactCardBtn = q("#contactCardButton");
                        if (contactCardBtn) {
                            contactCardBtn.addEventListener("click", (e) => {
                                e.preventDefault();
                                toast("Contact card functionality to be implemented");
                            });
                        }
                        // Manage visit button
                        const manageVisitBtn = q("#manageVisitBtn");
                        if (manageVisitBtn) {
                            manageVisitBtn.addEventListener(
                                "click",
                                () => {
                                    toast("Redirecting to Manage Your Visit page...");
                                }, {
                                    passive: true
                                }
                            );
                        }
                        // Client login button
                        const clientLoginBtn = q("#clientLoginBtn");
                        if (clientLoginBtn) {
                            clientLoginBtn.addEventListener(
                                "click",
                                () => {
                                    toast("Redirecting to Client Portal...");
                                }, {
                                    passive: true
                                }
                            );
                        }
                    }
                    /* ---------- initialization ---------- */
                    function initDomRefs() {
                        DOM.categoriesGrid = q("#categories-grid");
                        DOM.contactBtn = q("#contactBtn");
                        DOM.contactToolbar = q("#contactToolbar");
                        // NOTE: This now points to the INLINE button inside the header
                        DOM.cartFab = q("#cartFab");
                        DOM.fabCount = q("#fabCartCount");
                        DOM.invoiceOverlay = q("#invoiceOverlay");
                        DOM.invoiceServiceList = q("#invoiceServiceList");
                        DOM.invoiceTotal = q("#invoiceTotal");
                        DOM.serviceCount = q("#serviceCount");
                        DOM.serviceRequestList = q("#serviceRequestList");
                        DOM.estimateTotal = q("#estimateTotal");
                        DOM.totalAmount = q("#totalAmount");
                        DOM.serviceRequestContainer = q("#serviceRequestContainer");
                        DOM.servicedetailsContainer = q("#servicedetailsContainer");
                        DOM.selectedSection = q("#selectedSection");
                        DOM.serviceRequestSection = q("#serviceRequestSection");
                        DOM.scheduleCard = q(".card-schedule-service");
                        DOM.closeInvoiceBtn = q("#closeInvoiceOverlay");
                        DOM.checkoutBtn = q("#checkoutBtn");
                        DOM.bookMoreBtn = q("#bookMoreBtn");
                        DOM.showCategoriesBtn = q("#showCategoriesBtn");
                    }

                    function init() {
                        try {
                            initDomRefs();
                            // Immediately update FAB visibility on init based on existing cart
                            updateFabVisibility();
                            if (DOM.serviceRequestSection) {
                                DOM.serviceRequestSection.style.display =
                                    State.serviceRequest && State.serviceRequest.length > 0 ?
                                    "block" :
                                    "none";
                            }
                            buildCategoryTiles();
                            wireGlobal();
                            updateserviceRequestUI();
                            // Force a check after a short delay to ensure everything is synced
                            setTimeout(updateFabVisibility, 100);
                            // guarded persistence interval to avoid duplicates across re-inits
                            if (!window.__booktom_persist_interval) {
                                window.__booktom_persist_interval = setInterval(
                                    () => persistCartPlain(State.serviceRequest),
                                    10000
                                );
                            }
                            window.addEventListener(
                                "beforeunload",
                                () => persistCartPlain(State.serviceRequest), {
                                    passive: true
                                }
                            );
                            // debounced resize handler
                            if (!window.__booktom_resize_installed) {
                                const onResizeHandler = debounce(() => {
                                    // minimal work only: set CSS vars (use CSS for layout changes)
                                    document.documentElement.style.setProperty(
                                        "--vp-width",
                                        String(window.innerWidth)
                                    );
                                    document.documentElement.style.setProperty(
                                        "--vp-height",
                                        String(window.innerHeight)
                                    );
                                }, 220);
                                window.addEventListener("resize", onResizeHandler, {
                                    passive: true
                                });
                                window.__booktom_resize_installed = true;
                            }
                        } catch (e) {
                            console.error("Error during initialization:", e);
                        }
                    }
                    // Initialize when DOM is ready
                    if (document.readyState === "loading") {
                        document.addEventListener("DOMContentLoaded", init, {
                            passive: true
                        });
                    } else {
                        init();
                    }
                })(); // End of IIFE
            }
        </script>
        <script defer="" src="https://tommichael88.github.io/booktomnyc/js/marquee.js" integrity="sha384-sO/JQTm9KwYvAECgBW5DJPh2b4kkN4l5dOAPLzLFiikVDMiyWaQWG/Sg4Ke3PnKy" crossorigin="anonymous"></script>
        <script type="module">
            document.addEventListener('DOMContentLoaded', () => {
                const el = document.querySelector('.marquee');
                if (!el) return;
                const isMobile = /Mobi|Android/i.test(navigator.userAgent);
                const speed = isMobile ? 0.03 : 0.06;
                if (window.Marquee) el._marqueeInstance = new Marquee(el, {
                    speed,
                    pauseOnHover: true
                });
            });
        </script>
        <script>
            (function() {
                'use strict';

                function decodeB64(s) {
                    try {
                        return atob(s);
                    } catch (e) {
                        return '';
                    }
                }

                function safePhone(s) {
                    return (s || '').replace(/[^+\d\s\-()]/g, '').trim();
                }

                function safeEmail(s) {
                    // allow common email characters only
                    return (s || '').replace(/[^A-Za-z0-9@._+\-]/g, '').trim();
                }

                function openMail(el) {
                    var b64 = el.getAttribute('data-email') || '';
                    var email = safeEmail(decodeB64(b64));
                    if (!email) return;
                    // optionally prefill subject/body
                    var subject = encodeURIComponent('Inquiry from website');
                    var body = encodeURIComponent('');
                    @keyframes itemGlow {
                        0 % , 100 % {
                            border - color: rgba(50, 0, 0, 0.3);
                            box - shadow: 0 0 10 px rgba(255, 0, 0, 0.2);
                        }
                        33 % {
                            border - color: rgba(255, 0, 0, 0.5);
                            box - shadow: 0 0 15 px rgba(255, 0, 0, 0.4),
                            0 0 25 px rgba(200, 0, 0, 0.2);
                        }
                        66 % {
                            border - color: rgba(100, 0, 0, 0.7);
                            box - shadow: 0 0 5 px rgba(100, 0, 0, 0.3);
                        }
                    }

                    /* Replace the existing @keyframes progressFill section (around line 368) with: */
                    @keyframes progressFill {
                        0 % {
                            width: 0 % ;
                            opacity: 0.8;
                            background: linear - gradient(90 deg,
                                rgba(255, 0, 0, 0.9),
                                rgba(200, 0, 0, 0.8));
                        }
                        25 % {
                            width: 25 % ;
                            opacity: 1;
                            background: linear - gradient(90 deg,
                                rgba(255, 0, 0, 0.9),
                                rgba(180, 0, 0, 0.8));
                        }
                        50 % {
                            width: 50 % ;
                            opacity: 1;
                            background: linear - gradient(90 deg,
                                rgba(220, 0, 0, 0.9),
                                rgba(150, 0, 0, 0.8));
                        }
                        75 % {
                            width: 75 % ;
                            opacity: 1;
                            background: linear - gradient(90 deg,
                                rgba(200, 0, 0, 0.9),
                                rgba(100, 0, 0, 0.8));
                        }
                        100 % {
                            width: 100 % ;
                            opacity: 0;
                            background: linear - gradient(90 deg,
                                rgba(150, 0, 0, 0.9),
                                rgba(0, 0, 0, 0.8));
                        }
                    }

                    /* Replace the existing @keyframes sparkleTrail section (around line 389) with: */
                    @keyframes sparkleTrail {
                        0 % {
                            left: -100 % ;
                            opacity: 0;
                        }
                        20 % {
                            opacity: 0.9;
                            filter: blur(0.8 px) brightness(1.3);
                        }
                        50 % {
                            opacity: 1;
                            filter: blur(0.8 px) brightness(1.1);
                        }
                        80 % {
                            opacity: 0.8;
                            filter: blur(1 px) brightness(0.9);
                        }
                        100 % {
                            left: 100 % ;
                            opacity: 0;
                            filter: blur(1.2 px) brightness(0.7);
                        }
                    }

                    /* Replace the existing @keyframes itemSparkle section (around line 403) with: */
                    @keyframes itemSparkle {
                        0 % {
                            transform: translate(-50 % , -50 % ) scale(0);
                            opacity: 0;
                            filter: brightness(1.5);
                        }
                        50 % {
                            transform: translate(-50 % , -50 % ) scale(1.5);
                            opacity: 1;
                            filter: brightness(1.2);
                        }
                        100 % {
                            transform: translate(-50 % , -50 % ) scale(2);
                            opacity: 0;
                            filter: brightness(0.8);
                        }
                    }
                    window.location.href = 'mailto:' + email + '?subject=' + subject + '&body=' + body;
                }

                function openTel(el) {
                    var raw = el.getAttribute('data-phone') || '';
                    var num = safePhone(raw);
                    if (!num) return;
                    window.location.href = 'tel:' + num;
                }

                function openSms(el) {
                    var raw = el.getAttribute('data-sms') || '';
                    var num = safePhone(raw);
                    if (!num) return;
                    window.location.href = 'sms:' + num;
                }
                // Wire handlers
                document.querySelectorAll('.contact-mail').forEach(function(el) {
                    el.addEventListener('click', function(ev) {
                        ev.preventDefault();
                        openMail(el);
                    }, {
                        passive: false
                    });
                    el.addEventListener('keydown', function(ev) {
                        if (ev.key === 'Enter' || ev.key === ' ') {
                            ev.preventDefault();
                            openMail(el);
                        }
                    });
                });
                document.querySelectorAll('.contact-phone').forEach(function(el) {
                    el.addEventListener('click', function(ev) {
                        ev.preventDefault();
                        openTel(el);
                    }, {
                        passive: false
                    });
                    el.addEventListener('keydown', function(ev) {
                        if (ev.key === 'Enter' || ev.key === ' ') {
                            ev.preventDefault();
                            openTel(el);
                        }
                    });
                });
                document.querySelectorAll('.contact-sms').forEach(function(el) {
                    el.addEventListener('click', function(ev) {
                        ev.preventDefault();
                        openSms(el);
                    }, {
                        passive: false
                    });
                    el.addEventListener('keydown', function(ev) {
                        if (ev.key === 'Enter' || ev.key === ' ') {
                            ev.preventDefault();
                            openSms(el);
                        }
                    });
                });
            })();
        </script>
</body>

</html>
